var Zs=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ya=Zs((yl,M)=>{function ji(t,e){return function(){return t.apply(e,arguments)}}const{toString:Qs}=Object.prototype,{getPrototypeOf:qt}=Object,{iterator:lt,toStringTag:Ni}=Symbol,ct=(t=>e=>{const i=Qs.call(e);return t[i]||(t[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),J=t=>(t=t.toLowerCase(),e=>ct(e)===t),dt=t=>e=>typeof e===t,{isArray:_e}=Array,ke=dt("undefined");function Ne(t){return t!==null&&!ke(t)&&t.constructor!==null&&!ke(t.constructor)&&V(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bi=J("ArrayBuffer");function en(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bi(t.buffer),e}const tn=dt("string"),V=dt("function"),Vi=dt("number"),Be=t=>t!==null&&typeof t=="object",sn=t=>t===!0||t===!1,et=t=>{if(ct(t)!=="object")return!1;const e=qt(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Ni in t)&&!(lt in t)},nn=t=>{if(!Be(t)||Ne(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},rn=J("Date"),on=J("File"),an=J("Blob"),ln=J("FileList"),cn=t=>Be(t)&&V(t.pipe),dn=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||V(t.append)&&((e=ct(t))==="formdata"||e==="object"&&V(t.toString)&&t.toString()==="[object FormData]"))},un=J("URLSearchParams"),[hn,pn,fn,mn]=["ReadableStream","Request","Response","Headers"].map(J),gn=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ve(t,e,{allOwnKeys:i=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),_e(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{if(Ne(t))return;const r=i?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let a;for(s=0;s<o;s++)a=r[s],e.call(null,t[a],a,t)}}function Ui(t,e){if(Ne(t))return null;e=e.toLowerCase();const i=Object.keys(t);let s=i.length,n;for(;s-- >0;)if(n=i[s],e===n.toLowerCase())return n;return null}const ue=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qi=t=>!ke(t)&&t!==ue;function Lt(){const{caseless:t,skipUndefined:e}=qi(this)&&this||{},i={},s=(n,r)=>{const o=t&&Ui(i,r)||r;et(i[o])&&et(n)?i[o]=Lt(i[o],n):et(n)?i[o]=Lt({},n):_e(n)?i[o]=n.slice():(!e||!ke(n))&&(i[o]=n)};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&Ve(arguments[n],s);return i}const wn=(t,e,i,{allOwnKeys:s}={})=>(Ve(e,(n,r)=>{i&&V(n)?t[r]=ji(n,i):t[r]=n},{allOwnKeys:s}),t),yn=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),bn=(t,e,i,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),i&&Object.assign(t.prototype,i)},Sn=(t,e,i,s)=>{let n,r,o;const a={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),r=n.length;r-- >0;)o=n[r],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=i!==!1&&qt(t)}while(t&&(!i||i(t,e))&&t!==Object.prototype);return e},vn=(t,e,i)=>{t=String(t),(i===void 0||i>t.length)&&(i=t.length),i-=e.length;const s=t.indexOf(e,i);return s!==-1&&s===i},zn=t=>{if(!t)return null;if(_e(t))return t;let e=t.length;if(!Vi(e))return null;const i=new Array(e);for(;e-- >0;)i[e]=t[e];return i},xn=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qt(Uint8Array)),kn=(t,e)=>{const s=(t&&t[lt]).call(t);let n;for(;(n=s.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},En=(t,e)=>{let i;const s=[];for(;(i=t.exec(e))!==null;)s.push(i);return s},An=J("HTMLFormElement"),_n=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,n){return s.toUpperCase()+n}),wi=(({hasOwnProperty:t})=>(e,i)=>t.call(e,i))(Object.prototype),Ln=J("RegExp"),Hi=(t,e)=>{const i=Object.getOwnPropertyDescriptors(t),s={};Ve(i,(n,r)=>{let o;(o=e(n,r,t))!==!1&&(s[r]=o||n)}),Object.defineProperties(t,s)},Pn=t=>{Hi(t,(e,i)=>{if(V(t)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=t[i];if(V(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Tn=(t,e)=>{const i={},s=n=>{n.forEach(r=>{i[r]=!0})};return _e(t)?s(t):s(String(t).split(e)),i},Cn=()=>{},Mn=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Dn(t){return!!(t&&V(t.append)&&t[Ni]==="FormData"&&t[lt])}const In=t=>{const e=new Array(10),i=(s,n)=>{if(Be(s)){if(e.indexOf(s)>=0)return;if(Ne(s))return s;if(!("toJSON"in s)){e[n]=s;const r=_e(s)?[]:{};return Ve(s,(o,a)=>{const l=i(o,n+1);!ke(l)&&(r[a]=l)}),e[n]=void 0,r}}return s};return i(t,0)},On=J("AsyncFunction"),Wn=t=>t&&(Be(t)||V(t))&&V(t.then)&&V(t.catch),Gi=((t,e)=>t?setImmediate:e?((i,s)=>(ue.addEventListener("message",({source:n,data:r})=>{n===ue&&r===i&&s.length&&s.shift()()},!1),n=>{s.push(n),ue.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",V(ue.postMessage)),Rn=typeof queueMicrotask<"u"?queueMicrotask.bind(ue):typeof process<"u"&&process.nextTick||Gi,Fn=t=>t!=null&&V(t[lt]),u={isArray:_e,isArrayBuffer:Bi,isBuffer:Ne,isFormData:dn,isArrayBufferView:en,isString:tn,isNumber:Vi,isBoolean:sn,isObject:Be,isPlainObject:et,isEmptyObject:nn,isReadableStream:hn,isRequest:pn,isResponse:fn,isHeaders:mn,isUndefined:ke,isDate:rn,isFile:on,isBlob:an,isRegExp:Ln,isFunction:V,isStream:cn,isURLSearchParams:un,isTypedArray:xn,isFileList:ln,forEach:Ve,merge:Lt,extend:wn,trim:gn,stripBOM:yn,inherits:bn,toFlatObject:Sn,kindOf:ct,kindOfTest:J,endsWith:vn,toArray:zn,forEachEntry:kn,matchAll:En,isHTMLForm:An,hasOwnProperty:wi,hasOwnProp:wi,reduceDescriptors:Hi,freezeMethods:Pn,toObjectSet:Tn,toCamelCase:_n,noop:Cn,toFiniteNumber:Mn,findKey:Ui,global:ue,isContextDefined:qi,isSpecCompliantForm:Dn,toJSONObject:In,isAsyncFn:On,isThenable:Wn,setImmediate:Gi,asap:Rn,isIterable:Fn};function z(t,e,i,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),i&&(this.config=i),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}u.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:u.toJSONObject(this.config),code:this.code,status:this.status}}});const Ki=z.prototype,Xi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Xi[t]={value:t}});Object.defineProperties(z,Xi);Object.defineProperty(Ki,"isAxiosError",{value:!0});z.from=(t,e,i,s,n,r)=>{const o=Object.create(Ki);u.toFlatObject(t,o,function(d){return d!==Error.prototype},c=>c!=="isAxiosError");const a=t&&t.message?t.message:"Error",l=e==null&&t?t.code:e;return z.call(o,a,l,i,s,n),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",r&&Object.assign(o,r),o};const $n=null;function Pt(t){return u.isPlainObject(t)||u.isArray(t)}function Yi(t){return u.endsWith(t,"[]")?t.slice(0,-2):t}function yi(t,e,i){return t?t.concat(e).map(function(n,r){return n=Yi(n),!i&&r?"["+n+"]":n}).join(i?".":""):e}function jn(t){return u.isArray(t)&&!t.some(Pt)}const Nn=u.toFlatObject(u,{},null,function(e){return/^is[A-Z]/.test(e)});function ut(t,e,i){if(!u.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,i=u.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,f){return!u.isUndefined(f[g])});const s=i.metaTokens,n=i.visitor||d,r=i.dots,o=i.indexes,l=(i.Blob||typeof Blob<"u"&&Blob)&&u.isSpecCompliantForm(e);if(!u.isFunction(n))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(u.isDate(p))return p.toISOString();if(u.isBoolean(p))return p.toString();if(!l&&u.isBlob(p))throw new z("Blob is not supported. Use a Buffer instead.");return u.isArrayBuffer(p)||u.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,g,f){let S=p;if(p&&!f&&typeof p=="object"){if(u.endsWith(g,"{}"))g=s?g:g.slice(0,-2),p=JSON.stringify(p);else if(u.isArray(p)&&jn(p)||(u.isFileList(p)||u.endsWith(g,"[]"))&&(S=u.toArray(p)))return g=Yi(g),S.forEach(function(b,I){!(u.isUndefined(b)||b===null)&&e.append(o===!0?yi([g],I,r):o===null?g:g+"[]",c(b))}),!1}return Pt(p)?!0:(e.append(yi(f,g,r),c(p)),!1)}const h=[],w=Object.assign(Nn,{defaultVisitor:d,convertValue:c,isVisitable:Pt});function m(p,g){if(!u.isUndefined(p)){if(h.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(p),u.forEach(p,function(S,_){(!(u.isUndefined(S)||S===null)&&n.call(e,S,u.isString(_)?_.trim():_,g,w))===!0&&m(S,g?g.concat(_):[_])}),h.pop()}}if(!u.isObject(t))throw new TypeError("data must be an object");return m(t),e}function bi(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Ht(t,e){this._pairs=[],t&&ut(t,this,e)}const Ji=Ht.prototype;Ji.append=function(e,i){this._pairs.push([e,i])};Ji.toString=function(e){const i=e?function(s){return e.call(this,s,bi)}:bi;return this._pairs.map(function(n){return i(n[0])+"="+i(n[1])},"").join("&")};function Bn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Zi(t,e,i){if(!e)return t;const s=i&&i.encode||Bn;u.isFunction(i)&&(i={serialize:i});const n=i&&i.serialize;let r;if(n?r=n(e,i):r=u.isURLSearchParams(e)?e.toString():new Ht(e,i).toString(s),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Si{constructor(){this.handlers=[]}use(e,i,s){return this.handlers.push({fulfilled:e,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){u.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Qi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vn=typeof URLSearchParams<"u"?URLSearchParams:Ht,Un=typeof FormData<"u"?FormData:null,qn=typeof Blob<"u"?Blob:null,Hn={isBrowser:!0,classes:{URLSearchParams:Vn,FormData:Un,Blob:qn},protocols:["http","https","file","blob","url","data"]},Gt=typeof window<"u"&&typeof document<"u",Tt=typeof navigator=="object"&&navigator||void 0,Gn=Gt&&(!Tt||["ReactNative","NativeScript","NS"].indexOf(Tt.product)<0),Kn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xn=Gt&&window.location.href||"http://localhost",Yn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gt,hasStandardBrowserEnv:Gn,hasStandardBrowserWebWorkerEnv:Kn,navigator:Tt,origin:Xn},Symbol.toStringTag,{value:"Module"})),j={...Yn,...Hn};function Jn(t,e){return ut(t,new j.classes.URLSearchParams,{visitor:function(i,s,n,r){return j.isNode&&u.isBuffer(i)?(this.append(s,i.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function Zn(t){return u.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Qn(t){const e={},i=Object.keys(t);let s;const n=i.length;let r;for(s=0;s<n;s++)r=i[s],e[r]=t[r];return e}function es(t){function e(i,s,n,r){let o=i[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=i.length;return o=!o&&u.isArray(n)?n.length:o,l?(u.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!u.isObject(n[o]))&&(n[o]=[]),e(i,s,n[o],r)&&u.isArray(n[o])&&(n[o]=Qn(n[o])),!a)}if(u.isFormData(t)&&u.isFunction(t.entries)){const i={};return u.forEachEntry(t,(s,n)=>{e(Zn(s),n,i,0)}),i}return null}function er(t,e,i){if(u.isString(t))try{return(e||JSON.parse)(t),u.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(t)}const Ue={transitional:Qi,adapter:["xhr","http","fetch"],transformRequest:[function(e,i){const s=i.getContentType()||"",n=s.indexOf("application/json")>-1,r=u.isObject(e);if(r&&u.isHTMLForm(e)&&(e=new FormData(e)),u.isFormData(e))return n?JSON.stringify(es(e)):e;if(u.isArrayBuffer(e)||u.isBuffer(e)||u.isStream(e)||u.isFile(e)||u.isBlob(e)||u.isReadableStream(e))return e;if(u.isArrayBufferView(e))return e.buffer;if(u.isURLSearchParams(e))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Jn(e,this.formSerializer).toString();if((a=u.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ut(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||n?(i.setContentType("application/json",!1),er(e)):e}],transformResponse:[function(e){const i=this.transitional||Ue.transitional,s=i&&i.forcedJSONParsing,n=this.responseType==="json";if(u.isResponse(e)||u.isReadableStream(e))return e;if(e&&u.isString(e)&&(s&&!this.responseType||n)){const o=!(i&&i.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?z.from(a,z.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:j.classes.FormData,Blob:j.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};u.forEach(["delete","get","head","post","put","patch"],t=>{Ue.headers[t]={}});const tr=u.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ir=t=>{const e={};let i,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),i=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!i||e[i]&&tr[i])&&(i==="set-cookie"?e[i]?e[i].push(s):e[i]=[s]:e[i]=e[i]?e[i]+", "+s:s)}),e},vi=Symbol("internals");function De(t){return t&&String(t).trim().toLowerCase()}function tt(t){return t===!1||t==null?t:u.isArray(t)?t.map(tt):String(t)}function sr(t){const e=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(t);)e[s[1]]=s[2];return e}const nr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bt(t,e,i,s,n){if(u.isFunction(s))return s.call(this,e,i);if(n&&(e=i),!!u.isString(e)){if(u.isString(s))return e.indexOf(s)!==-1;if(u.isRegExp(s))return s.test(e)}}function rr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,i,s)=>i.toUpperCase()+s)}function or(t,e){const i=u.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+i,{value:function(n,r,o){return this[s].call(this,e,n,r,o)},configurable:!0})})}let U=class{constructor(e){e&&this.set(e)}set(e,i,s){const n=this;function r(a,l,c){const d=De(l);if(!d)throw new Error("header name must be a non-empty string");const h=u.findKey(n,d);(!h||n[h]===void 0||c===!0||c===void 0&&n[h]!==!1)&&(n[h||l]=tt(a))}const o=(a,l)=>u.forEach(a,(c,d)=>r(c,d,l));if(u.isPlainObject(e)||e instanceof this.constructor)o(e,i);else if(u.isString(e)&&(e=e.trim())&&!nr(e))o(ir(e),i);else if(u.isObject(e)&&u.isIterable(e)){let a={},l,c;for(const d of e){if(!u.isArray(d))throw TypeError("Object iterator must return a key-value pair");a[c=d[0]]=(l=a[c])?u.isArray(l)?[...l,d[1]]:[l,d[1]]:d[1]}o(a,i)}else e!=null&&r(i,e,s);return this}get(e,i){if(e=De(e),e){const s=u.findKey(this,e);if(s){const n=this[s];if(!i)return n;if(i===!0)return sr(n);if(u.isFunction(i))return i.call(this,n,s);if(u.isRegExp(i))return i.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,i){if(e=De(e),e){const s=u.findKey(this,e);return!!(s&&this[s]!==void 0&&(!i||bt(this,this[s],s,i)))}return!1}delete(e,i){const s=this;let n=!1;function r(o){if(o=De(o),o){const a=u.findKey(s,o);a&&(!i||bt(s,s[a],a,i))&&(delete s[a],n=!0)}}return u.isArray(e)?e.forEach(r):r(e),n}clear(e){const i=Object.keys(this);let s=i.length,n=!1;for(;s--;){const r=i[s];(!e||bt(this,this[r],r,e,!0))&&(delete this[r],n=!0)}return n}normalize(e){const i=this,s={};return u.forEach(this,(n,r)=>{const o=u.findKey(s,r);if(o){i[o]=tt(n),delete i[r];return}const a=e?rr(r):String(r).trim();a!==r&&delete i[r],i[a]=tt(n),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const i=Object.create(null);return u.forEach(this,(s,n)=>{s!=null&&s!==!1&&(i[n]=e&&u.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,i])=>e+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...i){const s=new this(e);return i.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[vi]=this[vi]={accessors:{}}).accessors,n=this.prototype;function r(o){const a=De(o);s[a]||(or(n,o),s[a]=!0)}return u.isArray(e)?e.forEach(r):r(e),this}};U.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);u.reduceDescriptors(U.prototype,({value:t},e)=>{let i=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[i]=s}}});u.freezeMethods(U);function St(t,e){const i=this||Ue,s=e||i,n=U.from(s.headers);let r=s.data;return u.forEach(t,function(a){r=a.call(i,r,n.normalize(),e?e.status:void 0)}),n.normalize(),r}function ts(t){return!!(t&&t.__CANCEL__)}function Le(t,e,i){z.call(this,t??"canceled",z.ERR_CANCELED,e,i),this.name="CanceledError"}u.inherits(Le,z,{__CANCEL__:!0});function is(t,e,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?t(i):e(new z("Request failed with status code "+i.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function ar(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function lr(t,e){t=t||10;const i=new Array(t),s=new Array(t);let n=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=s[r];o||(o=c),i[n]=l,s[n]=c;let h=r,w=0;for(;h!==n;)w+=i[h++],h=h%t;if(n=(n+1)%t,n===r&&(r=(r+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(w*1e3/m):void 0}}function cr(t,e){let i=0,s=1e3/e,n,r;const o=(c,d=Date.now())=>{i=d,n=null,r&&(clearTimeout(r),r=null),t(...c)};return[(...c)=>{const d=Date.now(),h=d-i;h>=s?o(c,d):(n=c,r||(r=setTimeout(()=>{r=null,o(n)},s-h)))},()=>n&&o(n)]}const st=(t,e,i=3)=>{let s=0;const n=lr(50,250);return cr(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-s,c=n(l),d=o<=a;s=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},i)},zi=(t,e)=>{const i=t!=null;return[s=>e[0]({lengthComputable:i,total:t,loaded:s}),e[1]]},xi=t=>(...e)=>u.asap(()=>t(...e)),dr=j.hasStandardBrowserEnv?((t,e)=>i=>(i=new URL(i,j.origin),t.protocol===i.protocol&&t.host===i.host&&(e||t.port===i.port)))(new URL(j.origin),j.navigator&&/(msie|trident)/i.test(j.navigator.userAgent)):()=>!0,ur=j.hasStandardBrowserEnv?{write(t,e,i,s,n,r){const o=[t+"="+encodeURIComponent(e)];u.isNumber(i)&&o.push("expires="+new Date(i).toGMTString()),u.isString(s)&&o.push("path="+s),u.isString(n)&&o.push("domain="+n),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function hr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function pr(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ss(t,e,i){let s=!hr(e);return t&&(s||i==!1)?pr(t,e):e}const ki=t=>t instanceof U?{...t}:t;function fe(t,e){e=e||{};const i={};function s(c,d,h,w){return u.isPlainObject(c)&&u.isPlainObject(d)?u.merge.call({caseless:w},c,d):u.isPlainObject(d)?u.merge({},d):u.isArray(d)?d.slice():d}function n(c,d,h,w){if(u.isUndefined(d)){if(!u.isUndefined(c))return s(void 0,c,h,w)}else return s(c,d,h,w)}function r(c,d){if(!u.isUndefined(d))return s(void 0,d)}function o(c,d){if(u.isUndefined(d)){if(!u.isUndefined(c))return s(void 0,c)}else return s(void 0,d)}function a(c,d,h){if(h in e)return s(c,d);if(h in t)return s(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,h)=>n(ki(c),ki(d),h,!0)};return u.forEach(Object.keys({...t,...e}),function(d){const h=l[d]||n,w=h(t[d],e[d],d);u.isUndefined(w)&&h!==a||(i[d]=w)}),i}const ns=t=>{const e=fe({},t);let{data:i,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:r,headers:o,auth:a}=e;if(e.headers=o=U.from(o),e.url=Zi(ss(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),u.isFormData(i)){if(j.hasStandardBrowserEnv||j.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(u.isFunction(i.getHeaders)){const l=i.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([d,h])=>{c.includes(d.toLowerCase())&&o.set(d,h)})}}if(j.hasStandardBrowserEnv&&(s&&u.isFunction(s)&&(s=s(e)),s||s!==!1&&dr(e.url))){const l=n&&r&&ur.read(r);l&&o.set(n,l)}return e},fr=typeof XMLHttpRequest<"u",mr=fr&&function(t){return new Promise(function(i,s){const n=ns(t);let r=n.data;const o=U.from(n.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=n,d,h,w,m,p;function g(){m&&m(),p&&p(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let f=new XMLHttpRequest;f.open(n.method.toUpperCase(),n.url,!0),f.timeout=n.timeout;function S(){if(!f)return;const b=U.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:b,config:t,request:f};is(function(F){i(F),g()},function(F){s(F),g()},R),f=null}"onloadend"in f?f.onloadend=S:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(S)},f.onabort=function(){f&&(s(new z("Request aborted",z.ECONNABORTED,t,f)),f=null)},f.onerror=function(I){const R=I&&I.message?I.message:"Network Error",N=new z(R,z.ERR_NETWORK,t,f);N.event=I||null,s(N),f=null},f.ontimeout=function(){let I=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const R=n.transitional||Qi;n.timeoutErrorMessage&&(I=n.timeoutErrorMessage),s(new z(I,R.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,t,f)),f=null},r===void 0&&o.setContentType(null),"setRequestHeader"in f&&u.forEach(o.toJSON(),function(I,R){f.setRequestHeader(R,I)}),u.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),a&&a!=="json"&&(f.responseType=n.responseType),c&&([w,p]=st(c,!0),f.addEventListener("progress",w)),l&&f.upload&&([h,m]=st(l),f.upload.addEventListener("progress",h),f.upload.addEventListener("loadend",m)),(n.cancelToken||n.signal)&&(d=b=>{f&&(s(!b||b.type?new Le(null,t,f):b),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const _=ar(n.url);if(_&&j.protocols.indexOf(_)===-1){s(new z("Unsupported protocol "+_+":",z.ERR_BAD_REQUEST,t));return}f.send(r||null)})},gr=(t,e)=>{const{length:i}=t=t?t.filter(Boolean):[];if(e||i){let s=new AbortController,n;const r=function(c){if(!n){n=!0,a();const d=c instanceof Error?c:this.reason;s.abort(d instanceof z?d:new Le(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,r(new z(`timeout ${e} of ms exceeded`,z.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),t=null)};t.forEach(c=>c.addEventListener("abort",r));const{signal:l}=s;return l.unsubscribe=()=>u.asap(a),l}},wr=function*(t,e){let i=t.byteLength;if(i<e){yield t;return}let s=0,n;for(;s<i;)n=s+e,yield t.slice(s,n),s=n},yr=async function*(t,e){for await(const i of br(t))yield*wr(i,e)},br=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:i,value:s}=await e.read();if(i)break;yield s}}finally{await e.cancel()}},Ei=(t,e,i,s)=>{const n=yr(t,e);let r=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await n.next();if(c){a(),l.close();return}let h=d.byteLength;if(i){let w=r+=h;i(w)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),n.return()}},{highWaterMark:2})},Ai=64*1024,{isFunction:Qe}=u,Sr=(({Request:t,Response:e})=>({Request:t,Response:e}))(u.global),{ReadableStream:_i,TextEncoder:Li}=u.global,Pi=(t,...e)=>{try{return!!t(...e)}catch{return!1}},vr=t=>{t=u.merge.call({skipUndefined:!0},Sr,t);const{fetch:e,Request:i,Response:s}=t,n=e?Qe(e):typeof fetch=="function",r=Qe(i),o=Qe(s);if(!n)return!1;const a=n&&Qe(_i),l=n&&(typeof Li=="function"?(p=>g=>p.encode(g))(new Li):async p=>new Uint8Array(await new i(p).arrayBuffer())),c=r&&a&&Pi(()=>{let p=!1;const g=new i(j.origin,{body:new _i,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),d=o&&a&&Pi(()=>u.isReadableStream(new s("").body)),h={stream:d&&(p=>p.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!h[p]&&(h[p]=(g,f)=>{let S=g&&g[p];if(S)return S.call(g);throw new z(`Response type '${p}' is not supported`,z.ERR_NOT_SUPPORT,f)})});const w=async p=>{if(p==null)return 0;if(u.isBlob(p))return p.size;if(u.isSpecCompliantForm(p))return(await new i(j.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(u.isArrayBufferView(p)||u.isArrayBuffer(p))return p.byteLength;if(u.isURLSearchParams(p)&&(p=p+""),u.isString(p))return(await l(p)).byteLength},m=async(p,g)=>{const f=u.toFiniteNumber(p.getContentLength());return f??w(g)};return async p=>{let{url:g,method:f,data:S,signal:_,cancelToken:b,timeout:I,onDownloadProgress:R,onUploadProgress:N,responseType:F,headers:ie,withCredentials:we="same-origin",fetchOptions:ui}=ns(p),hi=e||fetch;F=F?(F+"").toLowerCase():"text";let Je=gr([_,b&&b.toAbortSignal()],I),Me=null;const le=Je&&Je.unsubscribe&&(()=>{Je.unsubscribe()});let pi;try{if(N&&c&&f!=="get"&&f!=="head"&&(pi=await m(ie,S))!==0){let ne=new i(g,{method:"POST",body:S,duplex:"half"}),ye;if(u.isFormData(S)&&(ye=ne.headers.get("content-type"))&&ie.setContentType(ye),ne.body){const[yt,Ze]=zi(pi,st(xi(N)));S=Ei(ne.body,Ai,yt,Ze)}}u.isString(we)||(we=we?"include":"omit");const Z=r&&"credentials"in i.prototype,fi={...ui,signal:Je,method:f.toUpperCase(),headers:ie.normalize().toJSON(),body:S,duplex:"half",credentials:Z?we:void 0};Me=r&&new i(g,fi);let se=await(r?hi(Me,ui):hi(g,fi));const mi=d&&(F==="stream"||F==="response");if(d&&(R||mi&&le)){const ne={};["status","statusText","headers"].forEach(gi=>{ne[gi]=se[gi]});const ye=u.toFiniteNumber(se.headers.get("content-length")),[yt,Ze]=R&&zi(ye,st(xi(R),!0))||[];se=new s(Ei(se.body,Ai,yt,()=>{Ze&&Ze(),le&&le()}),ne)}F=F||"text";let Js=await h[u.findKey(h,F)||"text"](se,p);return!mi&&le&&le(),await new Promise((ne,ye)=>{is(ne,ye,{data:Js,headers:U.from(se.headers),status:se.status,statusText:se.statusText,config:p,request:Me})})}catch(Z){throw le&&le(),Z&&Z.name==="TypeError"&&/Load failed|fetch/i.test(Z.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,p,Me),{cause:Z.cause||Z}):z.from(Z,Z&&Z.code,p,Me)}}},zr=new Map,rs=t=>{let e=t?t.env:{};const{fetch:i,Request:s,Response:n}=e,r=[s,n,i];let o=r.length,a=o,l,c,d=zr;for(;a--;)l=r[a],c=d.get(l),c===void 0&&d.set(l,c=a?new Map:vr(e)),d=c;return c};rs();const Ct={http:$n,xhr:mr,fetch:{get:rs}};u.forEach(Ct,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ti=t=>`- ${t}`,xr=t=>u.isFunction(t)||t===null||t===!1,os={getAdapter:(t,e)=>{t=u.isArray(t)?t:[t];const{length:i}=t;let s,n;const r={};for(let o=0;o<i;o++){s=t[o];let a;if(n=s,!xr(s)&&(n=Ct[(a=String(s)).toLowerCase()],n===void 0))throw new z(`Unknown adapter '${a}'`);if(n&&(u.isFunction(n)||(n=n.get(e))))break;r[a||"#"+o]=n}if(!n){const o=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=i?o.length>1?`since :
`+o.map(Ti).join(`
`):" "+Ti(o[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Ct};function vt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Le(null,t)}function Ci(t){return vt(t),t.headers=U.from(t.headers),t.data=St.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),os.getAdapter(t.adapter||Ue.adapter,t)(t).then(function(s){return vt(t),s.data=St.call(t,t.transformResponse,s),s.headers=U.from(s.headers),s},function(s){return ts(s)||(vt(t),s&&s.response&&(s.response.data=St.call(t,t.transformResponse,s.response),s.response.headers=U.from(s.response.headers))),Promise.reject(s)})}const as="1.12.2",ht={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ht[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const Mi={};ht.transitional=function(e,i,s){function n(r,o){return"[Axios v"+as+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(e===!1)throw new z(n(o," has been removed"+(i?" in "+i:"")),z.ERR_DEPRECATED);return i&&!Mi[o]&&(Mi[o]=!0),e?e(r,o,a):!0}};ht.spelling=function(e){return(i,s)=>!0};function kr(t,e,i){if(typeof t!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const r=s[n],o=e[r];if(o){const a=t[r],l=a===void 0||o(a,r,t);if(l!==!0)throw new z("option "+r+" must be "+l,z.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new z("Unknown option "+r,z.ERR_BAD_OPTION)}}const it={assertOptions:kr,validators:ht},Q=it.validators;let he=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Si,response:new Si}}async request(e,i){try{return await this._request(e,i)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const r=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,i){typeof e=="string"?(i=i||{},i.url=e):i=e||{},i=fe(this.defaults,i);const{transitional:s,paramsSerializer:n,headers:r}=i;s!==void 0&&it.assertOptions(s,{silentJSONParsing:Q.transitional(Q.boolean),forcedJSONParsing:Q.transitional(Q.boolean),clarifyTimeoutError:Q.transitional(Q.boolean)},!1),n!=null&&(u.isFunction(n)?i.paramsSerializer={serialize:n}:it.assertOptions(n,{encode:Q.function,serialize:Q.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),it.assertOptions(i,{baseUrl:Q.spelling("baseURL"),withXsrfToken:Q.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let o=r&&u.merge(r.common,r[i.method]);r&&u.forEach(["delete","get","head","post","put","patch","common"],p=>{delete r[p]}),i.headers=U.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(i)===!1||(l=l&&g.synchronous,a.unshift(g.fulfilled,g.rejected))});const c=[];this.interceptors.response.forEach(function(g){c.push(g.fulfilled,g.rejected)});let d,h=0,w;if(!l){const p=[Ci.bind(this),void 0];for(p.unshift(...a),p.push(...c),w=p.length,d=Promise.resolve(i);h<w;)d=d.then(p[h++],p[h++]);return d}w=a.length;let m=i;for(;h<w;){const p=a[h++],g=a[h++];try{m=p(m)}catch(f){g.call(this,f);break}}try{d=Ci.call(this,m)}catch(p){return Promise.reject(p)}for(h=0,w=c.length;h<w;)d=d.then(c[h++],c[h++]);return d}getUri(e){e=fe(this.defaults,e);const i=ss(e.baseURL,e.url,e.allowAbsoluteUrls);return Zi(i,e.params,e.paramsSerializer)}};u.forEach(["delete","get","head","options"],function(e){he.prototype[e]=function(i,s){return this.request(fe(s||{},{method:e,url:i,data:(s||{}).data}))}});u.forEach(["post","put","patch"],function(e){function i(s){return function(r,o,a){return this.request(fe(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}he.prototype[e]=i(),he.prototype[e+"Form"]=i(!0)});let Er=class ls{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(r){i=r});const s=this;this.promise.then(n=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](n);s._listeners=null}),this.promise.then=n=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(n);return o.cancel=function(){s.unsubscribe(r)},o},e(function(r,o,a){s.reason||(s.reason=new Le(r,o,a),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const i=this._listeners.indexOf(e);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const e=new AbortController,i=s=>{e.abort(s)};return this.subscribe(i),e.signal.unsubscribe=()=>this.unsubscribe(i),e.signal}static source(){let e;return{token:new ls(function(n){e=n}),cancel:e}}};function Ar(t){return function(i){return t.apply(null,i)}}function _r(t){return u.isObject(t)&&t.isAxiosError===!0}const Mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Mt).forEach(([t,e])=>{Mt[e]=t});function cs(t){const e=new he(t),i=ji(he.prototype.request,e);return u.extend(i,he.prototype,e,{allOwnKeys:!0}),u.extend(i,e,null,{allOwnKeys:!0}),i.create=function(n){return cs(fe(t,n))},i}const W=cs(Ue);W.Axios=he;W.CanceledError=Le;W.CancelToken=Er;W.isCancel=ts;W.VERSION=as;W.toFormData=ut;W.AxiosError=z;W.Cancel=W.CanceledError;W.all=function(e){return Promise.all(e)};W.spread=Ar;W.isAxiosError=_r;W.mergeConfig=fe;W.AxiosHeaders=U;W.formToJSON=t=>es(u.isHTMLForm(t)?new FormData(t):t);W.getAdapter=os.getAdapter;W.HttpStatusCode=Mt;W.default=W;const{Axios:el,AxiosError:tl,CanceledError:il,isCancel:sl,CancelToken:nl,VERSION:rl,all:ol,Cancel:al,isAxiosError:ll,spread:cl,toFormData:dl,AxiosHeaders:ul,HttpStatusCode:hl,formToJSON:pl,getAdapter:fl,mergeConfig:ml}=W;window.axios=W;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";let Di=document.head.querySelector('meta[name="csrf-token"]');Di&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=Di.content);const Lr=()=>({show:!1,open(){this.show=!0,document.body.style.overflow="hidden"},close(){this.show=!1,document.body.style.overflow="auto"},init(){document.addEventListener("keydown",t=>{t.key==="Escape"&&this.show&&this.close()})}}),Pr=()=>({open:!1,toggle(){this.open=!this.open},close(){this.open=!1},init(){document.addEventListener("click",t=>{this.$el.contains(t.target)||(this.open=!1)}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.open&&(this.open=!1)})}}),Tr=()=>({loading:!1,error:null,position:null,async getCurrentLocation(){if(this.loading=!0,this.error=null,!navigator.geolocation){this.error="Geolocation is not supported by this browser.",this.loading=!1;return}try{const t=await new Promise((e,i)=>{navigator.geolocation.getCurrentPosition(e,i,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e5})});this.position={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy},this.$dispatch("location-detected",this.position)}catch(t){switch(t.code){case t.PERMISSION_DENIED:this.error="Location access denied by user.";break;case t.POSITION_UNAVAILABLE:this.error="Location information unavailable.";break;case t.TIMEOUT:this.error="Location request timed out.";break;default:this.error="An unknown error occurred.";break}}finally{this.loading=!1}},async reverseGeocode(t,e){var i,s,n,r,o;try{const a=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${e}&zoom=18&addressdetails=1`);if(!a.ok)throw new Error("Geocoding failed");const l=await a.json();return{address:l.display_name,city:((i=l.address)==null?void 0:i.city)||((s=l.address)==null?void 0:s.town)||((n=l.address)==null?void 0:n.village),postcode:(r=l.address)==null?void 0:r.postcode,country:(o=l.address)==null?void 0:o.country}}catch{return null}}}),Cr=()=>({notifications:[],show(t,e="info",i=5e3){const s=Date.now(),n={id:s,message:t,type:e,visible:!0};this.notifications.push(n),setTimeout(()=>{this.remove(s)},i)},remove(t){const e=this.notifications.findIndex(i=>i.id===t);e>-1&&(this.notifications[e].visible=!1,setTimeout(()=>{this.notifications.splice(e,1)},300))},success(t,e=5e3){this.show(t,"success",e)},error(t,e=7e3){this.show(t,"error",e)},warning(t,e=6e3){this.show(t,"warning",e)},info(t,e=5e3){this.show(t,"info",e)},init(){document.addEventListener("show-toast",t=>{this.show(t.detail.message,t.detail.type,t.detail.duration)}),window.addEventListener("livewire:load",()=>{Livewire.on("notify",t=>{this.show(t.message,t.type||"info",t.duration)})})},getTypeClasses(t){const e={success:"bg-green-500 text-white",error:"bg-red-500 text-white",warning:"bg-yellow-500 text-white",info:"bg-blue-500 text-white"};return e[t]||e.info},getIcon(t){const e={success:"✓",error:"✗",warning:"⚠",info:"ℹ"};return e[t]||e.info}}),Mr=()=>({showWizard:!1,showAIPanel:!0,currentStep:1,aiPanel:{visible:!0,loading:!1,suggestions:null,lastRefresh:null,animating:!1},responsive:{isMobile:!1,showMobileAI:!1},aiCache:new Map,iconNames:{spinner:"loading",location:"location"},homeType:"",hasGarden:!1,isSmoking:!1,hasOtherPets:!1,otherPets:[],flexibleSchedule:!1,emergencyAvailable:!1,init(){var t;window.WizardStateManager&&this.$wire&&window.WizardStateManager.init(this.$wire,this.$wire.currentStep||1),this.checkResponsive(),this.setupEventListeners(),this.initializeKeyboardShortcuts(),this.initPerformanceOptimizations();try{this.showAIPanel=((t=this.$wire)==null?void 0:t.showAIPanel)??!0}catch{this.showAIPanel=!0}this.syncStep7Variables(),this.syncStep6Variables(),this.initializeStepSpecificFeatures()},checkResponsive(){this.responsive.isMobile=window.innerWidth<1024,this.responsive.isMobile&&(this.aiPanel.visible=!1)},setupEventListeners(){window.addEventListener("resize",this.debounceResize.bind(this)),this.$wire.on("ai-suggestions-refreshed",t=>{this.handleAISuggestionsRefresh(t)}),this.$wire.on("step-changed",t=>{this.handleStepChange(t)}),this.$wire.on("ai-panel-toggled",t=>{this.aiPanel.visible=t.visible})},debounceResize:window.debounce(function(){this.checkResponsive()},250),initializeKeyboardShortcuts(){document.addEventListener("keydown",t=>{this.showWizard&&(t.key==="Escape"&&this.closeWizard(),t.altKey&&t.key==="a"&&(t.preventDefault(),this.toggleAIPanel()),t.altKey&&t.key==="r"&&(t.preventDefault(),this.refreshAISuggestions()),t.ctrlKey&&(t.key==="ArrowLeft"?(t.preventDefault(),this.previousStep()):t.key==="ArrowRight"&&(t.preventDefault(),this.nextStep())))})},nextStep(){this.$wire.nextStep().then(()=>{this.onStepChanged()})},previousStep(){this.$wire.previousStep().then(()=>{this.onStepChanged()})},goToStep(t){t>=1&&t<=11&&this.$wire.set("currentStep",t).then(()=>{this.onStepChanged()})},onStepChanged(){const t=this.currentStep;this.currentStep=this.$wire.currentStep,window.WizardStateManager&&document.dispatchEvent(new CustomEvent("wizard-step-changed",{detail:{step:this.currentStep,previousStep:t,direction:this.currentStep>t?"forward":"backward"}})),this.preloadAISuggestions(),this.animateStepTransition(),this.initializeStepSpecificFeatures()},animateStepTransition(){const t=document.querySelector(".wizard-main-content");t&&(t.style.opacity="0.7",t.style.transform="translateY(10px)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.style.opacity="1",t.style.transform="translateY(0)"})}))},closeWizard(){confirm("Czy na pewno chcesz opuścić formularz? Niezapisane zmiany zostaną utracone.")&&(this.$wire.deactivateWizard(),this.showWizard=!1)},toggleAIPanel(){this.showAIPanel=!this.showAIPanel,this.aiPanel.visible=this.showAIPanel,this.aiPanel.animating=!0,requestAnimationFrame(()=>{const t=document.querySelector(".ai-panel");if(t){const e=()=>{this.aiPanel.animating=!1,t.removeEventListener("transitionend",e)};t.addEventListener("transitionend",e),requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.aiPanel.animating&&(this.aiPanel.animating=!1)})})}else this.aiPanel.animating=!1})},toggleMobileAI(){this.responsive.showMobileAI=!this.responsive.showMobileAI},async refreshAISuggestions(){if(!this.aiPanel.loading){this.aiPanel.loading=!0;try{this.clearAICacheForStep(this.currentStep),await this.$wire.refreshAISuggestions(),this.aiPanel.lastRefresh=new Date,window.showToast("Sugestie AI zostały odświeżone","success",3e3)}catch{window.showToast("Nie udało się odświeżyć sugestii AI","error",5e3)}finally{this.aiPanel.loading=!1}}},async preloadAISuggestions(){var e;const t=`step_${this.currentStep}`;if(!this.aiCache.has(t))try{const i=await fetch(`/api/ai/suggestions/${this.currentStep}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content")},body:JSON.stringify({wizard_data:this.$wire.wizardData||{},context:{user_type:"pet_sitter",preload:!0}})});if(i.ok){const s=await i.json();this.aiCache.set(t,s.data)}}catch{}},clearAICacheForStep(t){const e=`step_${t}`;this.aiCache.delete(e)},handleAISuggestionsRefresh(t){this.aiPanel.suggestions=t.suggestions,this.aiPanel.lastRefresh=new Date;const e=`step_${t.step}`;this.aiCache.set(e,t.suggestions);const i=document.querySelector(".ai-suggestions-card");if(i){i.classList.add("animate-pulse");const s=()=>{i.classList.remove("animate-pulse"),i.removeEventListener("animationend",s)};i.addEventListener("animationend",s),requestAnimationFrame(()=>{requestAnimationFrame(()=>{i.classList.contains("animate-pulse")&&i.classList.remove("animate-pulse")})})}},handleStepChange(t){this.currentStep=t.step,this.preloadAISuggestions()},isStepCompleted(t){return t<this.currentStep},isStepCurrent(t){return t===this.currentStep},canGoToStep(t){return t<=this.currentStep},getLastRefreshTime(){if(!this.aiPanel.lastRefresh)return"";const t=Date.now()-this.aiPanel.lastRefresh,e=Math.floor(t/6e4);return e<1?"przed chwilą":e===1?"1 minutę temu":e<5?`${e} minuty temu`:`${e} minut temu`},async copySuggestion(t){try{await navigator.clipboard.writeText(t),window.showToast("Sugestia skopiowana do schowka","success",2e3)}catch{window.showToast("Nie udało się skopiować sugestii","error",3e3)}},async shareSuggestion(t){if(navigator.share)try{await navigator.share({title:"Pet Sitter - Sugestia AI",text:t})}catch(e){e.name}else this.copySuggestion(t)},rateSuggestion(t,e){var s;fetch("/api/ai/feedback",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content")},body:JSON.stringify({step:this.currentStep,suggestion_index:t,helpful:e,timestamp:new Date().toISOString()})}).catch(n=>{});const i=e?"Dziękujemy za pozytywną ocenę!":"Dzięki za feedback, będziemy się starać lepiej!";window.showToast(i,"info",3e3)},debouncedRefreshAI:null,throttledPreload:null,initPerformanceOptimizations(){this.debouncedRefreshAI=window.debounce(this.refreshAISuggestions.bind(this),1e3),this.throttledPreload=window.throttle(this.preloadAISuggestions.bind(this),2e3)},mapState:{map:null,vectorSource:null,marker:null,initialized:!1,loading:!1},addressState:{suggestions:[],loading:!1,selectedIndex:-1,query:""},initializeStepSpecificFeatures(){this.$nextTick?this.$nextTick(()=>{this.currentStep===5&&this.initializeStep5Features()}):requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.currentStep===5&&this.initializeStep5Features()})})},async initializeStep5Features(){const t=document.getElementById("address-input"),e=document.getElementById("map-container");if(document.getElementById("serviceRadius"),!(!t||!e))try{this.initializeAddressAutocomplete(),await this.initializeMap(),this.initializeRadiusSlider(),this.initializeGeolocation()}catch{this.hideMapLoading()}},initializeAddressAutocomplete(){const t=document.getElementById("address-input"),e=document.getElementById("suggestions-dropdown"),i=document.getElementById("clear-address-btn");!t||!e||(t.addEventListener("input",window.debounce(async s=>{const n=s.target.value.trim();this.addressState.query=n,n.length>=3?await this.searchAddresses(n):this.hideSuggestions(),i&&(i.style.display=n.length>0?"flex":"none")},300)),t.addEventListener("keydown",s=>{this.handleAddressKeydown(s)}),i&&i.addEventListener("click",()=>{this.clearAddress()}),document.addEventListener("click",s=>{s.target.closest("#address-autocomplete-container")||this.hideSuggestions()}))},async searchAddresses(t){if(!this.addressState.loading){this.addressState.loading=!0,this.showAddressLoading();try{const e=await fetch(`https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=5&countrycodes=pl&q=${encodeURIComponent(t)}`);if(!e.ok)throw new Error("Błąd API Nominatim");const i=await e.json();this.addressState.suggestions=i,this.showSuggestions(i)}catch{this.addressState.suggestions=[],this.hideSuggestions()}finally{this.addressState.loading=!1,this.hideAddressLoading()}}},showSuggestions(t){const e=document.getElementById("suggestions-dropdown");if(e){if(t.length===0){const i=document.createElement("div");i.className="p-3 text-sm text-gray-500",i.textContent="Brak wyników",e.innerHTML="",e.appendChild(i)}else e.innerHTML="",t.forEach((i,s)=>{const n=document.createElement("div");n.className="suggestion-item p-3 hover:bg-purple-50 cursor-pointer border-b border-gray-100 last:border-b-0",n.setAttribute("data-index",s);const r=document.createElement("div");r.className="font-medium text-gray-900",r.textContent=i.display_name,n.appendChild(r);const o=document.createElement("div");o.className="text-xs text-gray-500 mt-1",o.textContent=`Lat: ${parseFloat(i.lat).toFixed(4)}, Lon: ${parseFloat(i.lon).toFixed(4)}`,n.appendChild(o),n.addEventListener("click",()=>{this.selectSuggestion(s)}),e.appendChild(n)});e.style.display="block",this.addressState.selectedIndex=-1}},hideSuggestions(){const t=document.getElementById("suggestions-dropdown");t&&(t.style.display="none"),this.addressState.selectedIndex=-1},async selectSuggestion(t){const e=this.addressState.suggestions[t];if(!e)return;const i=document.getElementById("address-input");i&&(i.value=e.display_name);try{await this.$wire.set("address",e.display_name),await this.$wire.set("latitude",parseFloat(e.lat)),await this.$wire.set("longitude",parseFloat(e.lon))}catch{}this.updateMapLocation(parseFloat(e.lat),parseFloat(e.lon)),this.hideSuggestions()},handleAddressKeydown(t){const e=document.getElementById("suggestions-dropdown");if(!e||e.style.display==="none")return;const i=e.querySelectorAll(".suggestion-item");switch(t.key){case"ArrowDown":t.preventDefault(),this.addressState.selectedIndex=Math.min(this.addressState.selectedIndex+1,i.length-1),this.highlightSuggestion();break;case"ArrowUp":t.preventDefault(),this.addressState.selectedIndex=Math.max(this.addressState.selectedIndex-1,-1),this.highlightSuggestion();break;case"Enter":t.preventDefault(),this.addressState.selectedIndex>=0&&this.selectSuggestion(this.addressState.selectedIndex);break;case"Escape":this.hideSuggestions();break}},highlightSuggestion(){document.querySelectorAll(".suggestion-item").forEach((e,i)=>{i===this.addressState.selectedIndex?e.classList.add("bg-purple-50"):e.classList.remove("bg-purple-50")})},async clearAddress(){const t=document.getElementById("address-input");t&&(t.value="");try{await this.$wire.set("address",""),await this.$wire.set("latitude",0),await this.$wire.set("longitude",0)}catch{}this.hideSuggestions(),this.hideAddressLoading(),document.getElementById("clear-address-btn").style.display="none"},async initializeMap(){if(!(this.mapState.initialized||(window.ol||await this.loadOpenLayers(),!document.getElementById("map-container"))))try{const e=this.$wire.get("latitude")||52.2297,i=this.$wire.get("longitude")||21.0122;this.mapState.vectorSource=new window.ol.source.Vector;const s=new window.ol.layer.Vector({source:this.mapState.vectorSource,style:new window.ol.style.Style({image:new window.ol.style.Circle({radius:8,fill:new window.ol.style.Fill({color:"#8B5CF6"}),stroke:new window.ol.style.Stroke({color:"#ffffff",width:2})})})});this.mapState.map=new window.ol.Map({target:"map-container",layers:[new window.ol.layer.Tile({source:new window.ol.source.OSM}),s],view:new window.ol.View({center:window.ol.proj.fromLonLat([i,e]),zoom:12})}),this.addMapMarker(e,i),this.mapState.map.on("click",async n=>{const r=window.ol.proj.toLonLat(n.coordinate),[o,a]=r;await this.handleMapClick(a,o)}),this.mapState.initialized=!0,this.hideMapLoading()}catch{this.hideMapLoading()}},async loadOpenLayers(){return new Promise((t,e)=>{if(window.ol){t();return}const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/ol@9.2.4/dist/ol.js",i.onload=()=>{const s=document.createElement("link");s.rel="stylesheet",s.href="https://cdn.jsdelivr.net/npm/ol@9.2.4/ol.css",document.head.appendChild(s),t()},i.onerror=e,document.head.appendChild(i)})},addMapMarker(t,e){if(!this.mapState.vectorSource||!window.ol)return;this.mapState.vectorSource.clear();const i=new window.ol.Feature({geometry:new window.ol.geom.Point(window.ol.proj.fromLonLat([e,t]))});this.mapState.vectorSource.addFeature(i),this.mapState.marker=i,this.mapState.map.getView().setCenter(window.ol.proj.fromLonLat([e,t]))},updateMapLocation(t,e){this.mapState.initialized&&(this.addMapMarker(t,e),this.updateCoordinatesDisplay(t,e))},async handleMapClick(t,e){try{this.addMapMarker(t,e),await this.$wire.set("latitude",t),await this.$wire.set("longitude",e),await this.reverseGeocode(t,e),this.updateCoordinatesDisplay(t,e)}catch{}},async reverseGeocode(t,e){try{const i=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${t}&lon=${e}&zoom=18&addressdetails=1`);if(!i.ok)return;const s=await i.json();if(s.display_name){const n=document.getElementById("address-input");n&&(n.value=s.display_name),await this.$wire.set("address",s.display_name)}}catch{}},updateCoordinatesDisplay(t,e){const i=document.getElementById("coordinates-display"),s=document.getElementById("lat-display"),n=document.getElementById("lng-display");i&&s&&n&&(s.textContent=t.toFixed(6),n.textContent=e.toFixed(6),i.style.display="inline")},initializeRadiusSlider(){const t=document.getElementById("serviceRadius");t&&t.addEventListener("input",window.debounce(()=>{this.updateMapRadius()},300))},updateMapRadius(){if(!this.mapState.initialized||!this.mapState.map)return;const t=this.$wire.get("serviceRadius")||10,e=this.$wire.get("latitude")||52.2297,i=this.$wire.get("longitude")||21.0122,n=this.mapState.map.getLayers().getArray().find(l=>l.get("name")==="radius-circle");n&&this.mapState.map.removeLayer(n);const r=new window.ol.Feature({geometry:new window.ol.geom.Circle(window.ol.proj.fromLonLat([i,e]),t*1e3)}),o=new window.ol.source.Vector;o.addFeature(r);const a=new window.ol.layer.Vector({source:o,style:new window.ol.style.Style({stroke:new window.ol.style.Stroke({color:"#8B5CF6",width:2}),fill:new window.ol.style.Fill({color:"rgba(139, 92, 246, 0.1)"})})});a.set("name","radius-circle"),this.mapState.map.addLayer(a)},initializeGeolocation(){const t=document.getElementById("geolocation-btn");t&&t.addEventListener("click",()=>{this.getCurrentLocation()})},getCurrentLocation(){if(!navigator.geolocation){window.showToast("Geolokalizacja nie jest wspierana","error",3e3);return}const t=document.getElementById("geolocation-btn");t&&window.SafeSVGIcons&&(t.innerHTML="",window.SafeSVGIcons.createLoadingSpinner(t,{classes:"animate-spin text-current",size:{width:20,height:20}})),navigator.geolocation.getCurrentPosition(async e=>{const{latitude:i,longitude:s}=e.coords;this.updateMapLocation(i,s);try{await this.$wire.set("latitude",i),await this.$wire.set("longitude",s)}catch{}await this.reverseGeocode(i,s),window.showToast("Lokalizacja wykryta pomyślnie","success",3e3),t&&window.SafeSVGIcons&&(t.innerHTML="",window.SafeSVGIcons.createIcon("location",t,{classes:"text-current",size:{width:20,height:20}}))},e=>{let i="Nie udało się wykryć lokalizacji";switch(e.code){case e.PERMISSION_DENIED:i="Dostęp do lokalizacji został odrzucony";break;case e.POSITION_UNAVAILABLE:i="Lokalizacja niedostępna";break;case e.TIMEOUT:i="Timeout przy wykrywaniu lokalizacji";break}window.showToast(i,"error",5e3),t&&window.SafeSVGIcons&&(t.innerHTML="",window.SafeSVGIcons.createIcon("location",t,{classes:"text-current",size:{width:20,height:20}}))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},showAddressLoading(){const t=document.getElementById("address-loading");t&&(t.style.display="flex")},hideAddressLoading(){const t=document.getElementById("address-loading");t&&(t.style.display="none")},hideMapLoading(){const t=document.getElementById("map-loading-overlay");t&&(t.style.display="none")},syncStep7Variables(){var t,e,i,s,n;try{this.homeType=((t=this.$wire)==null?void 0:t.homeType)||"",this.hasGarden=((e=this.$wire)==null?void 0:e.hasGarden)||!1,this.isSmoking=((i=this.$wire)==null?void 0:i.isSmoking)||!1,this.hasOtherPets=((s=this.$wire)==null?void 0:s.hasOtherPets)||!1,this.otherPets=((n=this.$wire)==null?void 0:n.otherPets)||[]}catch{}},syncStep6Variables(){var t,e;try{this.flexibleSchedule=((t=this.$wire)==null?void 0:t.flexibleSchedule)||!1,this.emergencyAvailable=((e=this.$wire)==null?void 0:e.emergencyAvailable)||!1}catch{}}}),Dr=()=>({query:"",suggestions:[],selectedSuggestion:null,showSuggestions:!1,loading:!1,error:null,map:null,vectorSource:null,vectorLayer:null,marker:null,ol:null,mapLoaded:!1,latitude:0,longitude:0,searchTimeout:null,config:{debounceMs:300,minChars:3,maxSuggestions:5,mapZoom:15,markerDragEnabled:!0},async init(){setTimeout(()=>{this.initMap()},100),setTimeout(()=>{this.hideMapLoadingOverlay()},3e3),this.setupClickOutside(),this.query=this.$wire.get("address")||"",this.latitude=this.$wire.get("latitude")||0,this.longitude=this.$wire.get("longitude")||0,this.latitude&&this.longitude&&(this.updateCoordinatesDisplay(this.latitude,this.longitude),setTimeout(()=>{this.showLocationOnMap(this.latitude,this.longitude)},1e3))},async initMap(){try{await this.loadOpenLayers(),this.setupMap()}catch{this.error="Nie udało się załadować mapy",this.hideMapLoadingOverlay()}},async loadOpenLayers(){if(window.ol){this.ol=window.ol;return}if(!document.querySelector('link[href*="ol.css"]')){const t=document.createElement("link");t.rel="stylesheet",t.href="https://cdn.jsdelivr.net/npm/ol@8.2.0/ol.css",document.head.appendChild(t)}return new Promise((t,e)=>{if(document.querySelector('script[src*="ol@8.2.0"]')){const s=setInterval(()=>{window.ol&&(clearInterval(s),this.ol=window.ol,t())},100);setTimeout(()=>{clearInterval(s),e(new Error("OpenLayers load timeout"))},1e4);return}const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/ol@8.2.0/dist/ol.js",i.onload=()=>{this.ol=window.ol,t()},i.onerror=()=>e(new Error("Failed to load OpenLayers")),document.head.appendChild(i)})},setupMap(){const t=this.$refs.mapContainer;t&&this.ol&&(this.vectorSource=new this.ol.source.Vector,this.vectorLayer=new this.ol.layer.Vector({source:this.vectorSource,style:this.createMarkerStyle()}),this.map=new this.ol.Map({target:t,layers:[new this.ol.layer.Tile({source:new this.ol.source.OSM}),this.vectorLayer],view:new this.ol.View({center:this.ol.proj.fromLonLat([19,52]),zoom:6})}),this.mapLoaded=!0,this.hideMapLoadingOverlay(),this.map.on("click",e=>{this.config.markerDragEnabled&&this.handleMapClick(e)}))},createMarkerStyle(){return this.ol?new this.ol.style.Style({image:new this.ol.style.Circle({radius:8,fill:new this.ol.style.Fill({color:"#EF4444"}),stroke:new this.ol.style.Stroke({color:"#FFFFFF",width:3})})}):null},async handleMapClick(t){const e=this.ol.proj.toLonLat(t.coordinate),[i,s]=e;this.updateLocation(s,i);try{const n=await this.reverseGeocode(s,i);n&&(this.query=n,this.$wire.set("address",n))}catch{}},async searchAddresses(){if(this.query.length<this.config.minChars){this.suggestions=[],this.showSuggestions=!1;return}clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(async()=>{this.loading=!0;try{const t=await this.fetchAddressSuggestions(this.query);this.suggestions=t,this.showSuggestions=t.length>0}catch{this.error="Nie udało się wyszukać adresów"}finally{this.loading=!1}},this.config.debounceMs)},async fetchAddressSuggestions(t){const e=new URLSearchParams({q:t,format:"json",addressdetails:"1",limit:this.config.maxSuggestions.toString(),countrycodes:"pl","accept-language":"pl"}),i=await fetch(`https://nominatim.openstreetmap.org/search?${e}`);if(!i.ok)throw new Error("Nominatim API error");return(await i.json()).map(n=>({id:n.place_id,display_name:n.display_name,latitude:parseFloat(n.lat),longitude:parseFloat(n.lon),address:this.formatAddress(n.address),type:n.type,importance:n.importance}))},formatAddress(t){const e=[];return t.house_number&&t.road?e.push(`${t.road} ${t.house_number}`):t.road&&e.push(t.road),t.postcode&&e.push(t.postcode),(t.city||t.town||t.village)&&e.push(t.city||t.town||t.village),e.join(", ")},selectSuggestion(t){this.selectedSuggestion=t,this.query=t.display_name,this.showSuggestions=!1,this.updateLocation(t.latitude,t.longitude),this.showLocationOnMap(t.latitude,t.longitude),this.$wire.set("address",this.query)},updateLocation(t,e){this.latitude=t,this.longitude=e,this.$wire.set("latitude",t),this.$wire.set("longitude",e),this.updateCoordinatesDisplay(t,e)},updateCoordinatesDisplay(t,e){const i=document.getElementById("coordinates-display"),s=document.getElementById("lat-display"),n=document.getElementById("lng-display");i&&s&&n&&t&&e?(s.textContent=t.toFixed(6),n.textContent=e.toFixed(6),i.style.display="inline"):i&&(i.style.display="none")},showLocationOnMap(t,e){if(!this.map||!this.ol||!this.vectorSource){setTimeout(()=>{this.showLocationOnMap(t,e)},500);return}this.vectorSource.clear();const i=this.ol.proj.fromLonLat([e,t]);this.marker=new this.ol.Feature({geometry:new this.ol.geom.Point(i)}),this.vectorSource.addFeature(this.marker),this.map.getView().animate({center:i,zoom:this.config.mapZoom,duration:1e3})},async reverseGeocode(t,e){const i=new URLSearchParams({lat:t.toString(),lon:e.toString(),format:"json",zoom:"18",addressdetails:"1","accept-language":"pl"}),s=await fetch(`https://nominatim.openstreetmap.org/reverse?${i}`);if(!s.ok)throw new Error("Reverse geocoding failed");return(await s.json()).display_name},setupClickOutside(){document.addEventListener("click",t=>{this.$el.contains(t.target)||(this.showSuggestions=!1)})},async detectCurrentLocation(){if(!navigator.geolocation){this.error="Geolokalizacja nie jest obsługiwana przez tę przeglądarkę";return}this.loading=!0;try{const t=await new Promise((n,r)=>{navigator.geolocation.getCurrentPosition(n,r,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:e,longitude:i}=t.coords,s=await this.reverseGeocode(e,i);this.query=s,this.updateLocation(e,i),this.showLocationOnMap(e,i),this.$wire.set("address",s)}catch{this.error="Nie udało się pobrać lokalizacji"}finally{this.loading=!1}},clearAddress(){this.query="",this.suggestions=[],this.selectedSuggestion=null,this.showSuggestions=!1,this.latitude=0,this.longitude=0,this.vectorSource&&this.vectorSource.clear(),this.$wire.set("address",""),this.$wire.set("latitude",0),this.$wire.set("longitude",0)},handleInput(){this.$wire.set("address",this.query),this.searchAddresses()},handleKeydown(t){t.key==="Escape"&&(this.showSuggestions=!1)},hideMapLoadingOverlay(){var n;let t=!1;const e=document.getElementById("map-loading-overlay");if(e&&(e.style.display="none",e.style.visibility="hidden",e.style.opacity="0",e.style.zIndex="-1",e.classList.add("hidden"),t=!0),this.$el&&!t){const r=this.$el.querySelector("#map-loading-overlay");r&&(r.style.display="none",r.style.visibility="hidden",r.style.opacity="0",r.style.zIndex="-1",r.classList.add("hidden"),t=!0)}const i=(n=this.$refs)==null?void 0:n.mapContainer;if(i&&!t){const r=i.querySelector("#map-loading-overlay");r&&(r.style.display="none",r.style.visibility="hidden",r.style.opacity="0",r.style.zIndex="-1",r.classList.add("hidden"),t=!0)}const s=document.querySelectorAll("#map-loading-overlay");if(s.length>0&&s.forEach((r,o)=>{r.style.display="none",r.style.visibility="hidden",r.style.opacity="0",r.style.zIndex="-1",r.classList.add("hidden"),t=!0}),!t){const r=Array.from(document.querySelectorAll("div")).filter(o=>o.textContent&&o.textContent.includes("Ładowanie mapy"));r.length>0&&r.forEach((o,a)=>{o.style.display="none",o.style.visibility="hidden",o.style.opacity="0",o.style.zIndex="-1",o.classList.add("hidden"),t=!0})}}});document.addEventListener("alpine:init",()=>{Alpine.data("modal",Lr),Alpine.data("dropdown",Pr),Alpine.data("geolocation",Tr),Alpine.data("toast",Cr),Alpine.data("petSitterWizard",Mr),Alpine.data("addressAutocomplete",Dr),Alpine.data("wizardStep1",window.wizardStep1||(()=>({}))),Alpine.data("wizardStep2",window.wizardStep2||(()=>({}))),Alpine.data("wizardStep5",window.wizardStep5||(()=>({mapInitialized:!1,initializeMap(){}}))),Alpine.data("wizardStep6",window.wizardStep6||(()=>({}))),Alpine.data("wizardStep7",window.wizardStep7||(()=>({}))),Alpine.data("wizardStep8",window.wizardStep8||(()=>({}))),Alpine.data("wizardStep9",window.wizardStep9||(()=>({}))),Alpine.data("wizardStep10",window.wizardStep10||(()=>({}))),Alpine.store("mobileMenu",{open:!1,toggle(){this.open=!this.open},close(){this.open=!1}})});window.formatCurrency=(t,e="PLN")=>new Intl.NumberFormat("pl-PL",{style:"currency",currency:e}).format(t);window.formatPolishDate=(t,e={})=>{const i={year:"numeric",month:"long",day:"numeric"};return new Intl.DateTimeFormat("pl-PL",{...i,...e}).format(new Date(t))};window.debounce=(t,e,i=!1)=>{let s;return function(...r){const o=()=>{s=null,i||t(...r)},a=i&&!s;clearTimeout(s),s=setTimeout(o,e),a&&t(...r)}};window.throttle=(t,e)=>{let i,s;return function(...n){s?(clearTimeout(i),i=setTimeout(()=>{Date.now()-s>=e&&(t(...n),s=Date.now())},e-(Date.now()-s))):(t(...n),s=Date.now())}};class Ir{constructor(){this.logs=[],this.maxLogs=100,this.init()}init(){window.addEventListener("error",e=>{var i;this.logError({type:"javascript_error",message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:(i=e.error)==null?void 0:i.stack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent})}),window.addEventListener("unhandledrejection",e=>{var i,s;this.logError({type:"promise_rejection",message:((i=e.reason)==null?void 0:i.message)||e.reason,stack:(s=e.reason)==null?void 0:s.stack,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent})}),this.interceptConsole(),setInterval(()=>this.sendLogs(),3e4),window.addEventListener("beforeunload",()=>{this.sendLogs(!0)})}interceptConsole(){const e=console.error,i=console.warn,s=console.log;console.error=(...n)=>{this.logError({type:"console_error",message:n.join(" "),timestamp:new Date().toISOString(),url:window.location.href}),e.apply(console,n)},console.warn=(...n)=>{this.logError({type:"console_warn",message:n.join(" "),timestamp:new Date().toISOString(),url:window.location.href}),i.apply(console,n)},window.logAllConsole&&(console.log=(...n)=>{this.logError({type:"console_log",message:n.join(" "),timestamp:new Date().toISOString(),url:window.location.href}),s.apply(console,n)})}logError(e){this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),(e.type==="javascript_error"||e.type==="promise_rejection")&&this.sendLogs()}async sendLogs(e=!1){var n;if(this.logs.length===0)return;const i=[...this.logs];this.logs=[];const s={logs:i,session_id:this.getSessionId(),page_info:{url:window.location.href,title:document.title,viewport:{width:window.innerWidth,height:window.innerHeight}}};try{(e?"sendBeacon":"fetch")==="sendBeacon"&&navigator.sendBeacon?navigator.sendBeacon("/api/js-logs",JSON.stringify(s)):await fetch("/api/js-logs",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.content)||""},body:JSON.stringify(s)})}catch{this.logs.unshift(...i)}}getSessionId(){let e=sessionStorage.getItem("error_logger_session");return e||(e="sess_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("error_logger_session",e)),e}log(e,i="custom",s={}){this.logError({type:i,message:e,data:s,timestamp:new Date().toISOString(),url:window.location.href})}getCurrentLogs(){return[...this.logs]}clearLogs(){this.logs=[]}}window.errorLogger=new Ir;window.logError=(t,e)=>window.errorLogger.log(t,"manual_error",e);window.logInfo=(t,e)=>window.errorLogger.log(t,"manual_info",e);window.getErrorLogs=()=>window.errorLogger.getCurrentLogs();window.clearErrorLogs=()=>window.errorLogger.clearLogs();function ds(){return{map:null,vectorLayer:null,vectorSource:null,markerFeatures:[],highlightFeature:null,ol:null,moveTimeout:null,updateMarkersTimeout:null,markerCache:new Map,currentZoom:7,lastBounds:null,MAX_MARKERS_VISIBLE:200,async initMap(){try{if(await this.loadOpenLayers(),!document.getElementById("map-container"))return;if(!this.ol)throw new Error("OpenLayers nie załadował się poprawnie");this.setupMap(),this.setupEventListeners()}catch(t){this.showMapError(`Błąd inicjalizacji mapy: ${t.message}`)}},async loadOpenLayers(){const t=new Promise((e,i)=>{let s=document.querySelector('link[href*="ol.css"]');if(s){e();return}s=document.createElement("link"),s.rel="stylesheet",s.href="https://cdn.jsdelivr.net/npm/ol@8.2.0/ol.css",s.onload=()=>e(),s.onerror=()=>i(new Error("Failed to load OpenLayers CSS")),document.head.appendChild(s)});try{await t,await this.loadOpenLayersScript()}catch{await this.loadOpenLayersScript()}},async loadOpenLayersScript(){if(!(window.ol&&(this.ol=window.ol,this.ol&&this.ol.source&&this.ol.layer&&this.ol.Map&&this.ol.View&&this.ol.proj)))return new Promise((t,e)=>{if(document.querySelector('script[src*="ol@8.2.0"]')){const s=setInterval(()=>{window.ol&&window.ol.Map&&(clearInterval(s),this.ol=window.ol,t())},100);setTimeout(()=>{clearInterval(s),e(new Error("OpenLayers script load timeout"))},1e4);return}const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/ol@8.2.0/dist/ol.js",i.onload=()=>{window.ol&&window.ol.Map?(this.ol=window.ol,t()):e(new Error("OpenLayers script loaded but ol object is invalid"))},i.onerror=()=>{e(new Error("Failed to load OpenLayers script"))},document.head.appendChild(i)})},setupMap(){if(!this.ol||!this.ol.source||!this.ol.layer||!this.ol.Map||!this.ol.View||!this.ol.proj){this.showMapError("OpenLayers nie załadował się poprawnie. Sprawdź połączenie z internetem.");return}try{this.vectorSource=new this.ol.source.Vector,this.clusterSource=new this.ol.source.Cluster({distance:this.CLUSTER_DISTANCE,minDistance:15,source:this.vectorSource,geometryFunction:t=>(this.map?this.map.getView().getZoom():7)>=this.MIN_ZOOM_FOR_INDIVIDUAL?null:t.getGeometry()}),this.vectorLayer=new this.ol.layer.Vector({source:this.vectorSource,style:this.createMarkerStyle.bind(this)}),this.clusterLayer=new this.ol.layer.Vector({source:this.clusterSource,style:this.createClusterStyle.bind(this)}),this.map=new this.ol.Map({target:"map-container",layers:[new this.ol.layer.Tile({source:new this.ol.source.OSM}),this.clusterLayer,this.vectorLayer],view:new this.ol.View({center:this.ol.proj.fromLonLat([19,52]),zoom:7})}),this.map.getView().on("change:resolution",()=>{const t=Math.round(this.map.getView().getZoom());this.updateLayerVisibility(t)}),this.map.on("moveend",()=>{clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout(()=>{const t=this.map.getView().calculateExtent(),e=this.ol.proj.transformExtent(t,"EPSG:3857","EPSG:4326"),i=[e[1],e[0],e[3],e[2]];this.hasBoundsChangedSignificantly(i)&&(this.fetchMapData({bounds:i,format:"map",limit:200}),this.lastBounds=i),Livewire.dispatch("map-bounds-changed",[i])},1e3)}),this.map.once("postrender",()=>{const t=Math.round(this.map.getView().getZoom());this.updateLayerVisibility(t),setTimeout(()=>{const e=this.map.getView().calculateExtent(),i=this.ol.proj.transformExtent(e,"EPSG:3857","EPSG:4326"),s=[i[1],i[0],i[3],i[2]];this.fetchMapData({bounds:s,format:"map",limit:200}),Livewire.dispatch("map-bounds-changed",[s])},1e3)})}catch(t){this.showMapError("Błąd podczas tworzenia mapy: "+t.message)}},setupEventListeners(){if(window.Livewire)window.Livewire.hook("message.processed",(t,e)=>{});else{setTimeout(()=>{window.Livewire&&this.setupLivewireListeners()},2e3);return}this.setupLivewireListeners(),this.setupAlpineEventListeners()},setupLivewireListeners(){Livewire.on("map-center-updated",t=>{t&&t.latitude&&t.longitude&&this.animateToLocation(t.latitude,t.longitude)}),Livewire.on("location-updated",t=>{t&&t.latitude&&t.longitude&&this.animateToLocation(t.latitude,t.longitude)}),Livewire.on("map-data-updated",t=>{try{if(t&&this.vectorLayer){const e=Array.isArray(t)&&Array.isArray(t[0])?t[0]:t;clearTimeout(this.updateMarkersTimeout),this.updateMarkersTimeout=setTimeout(()=>{this.updateMarkers(e)},200)}}catch{}})},setupAlpineEventListeners(){document.addEventListener("highlight-map-marker",t=>{var i;const e=(i=t.detail)==null?void 0:i.id;this.highlightMarker(e)}),document.addEventListener("focus-map-marker",t=>{var i;const e=(i=t.detail)==null?void 0:i.id;this.focusMarker(e)})},highlightMarker(t){if(!(!this.vectorSource||!this.ol)&&(this.highlightFeature&&(this.vectorSource.removeFeature(this.highlightFeature),this.highlightFeature=null),t)){const e=this.markerFeatures.find(i=>i.get("data").id==t);if(e){const i=e.getGeometry(),s=e.get("data");this.highlightFeature=new this.ol.Feature({geometry:i.clone(),data:s});const n=this.createHighlightedMarkerStyle(this.highlightFeature);this.highlightFeature.setStyle(n),this.vectorSource.addFeature(this.highlightFeature)}}},focusMarker(t){if(!this.map||!this.ol||!t)return;const e=this.markerFeatures.find(i=>i.get("data").id==t);if(e){const s=e.getGeometry().getCoordinates();this.map.getView().animate({center:s,zoom:Math.max(this.map.getView().getZoom(),14),duration:500}),this.highlightMarker(t)}},createHighlightedMarkerStyle(t){const e=t.get("data"),i=e.color||e.category_color||"#3B82F6",s=e.featured||e.is_featured||!1;return e.urgent||e.is_urgent,new this.ol.style.Style({image:new this.ol.style.Circle({radius:s?12:10,fill:new this.ol.style.Fill({color:i}),stroke:new this.ol.style.Stroke({color:"#FFFFFF",width:4})}),zIndex:1e3})},updateMarkers(t){if(!(!this.vectorSource||!this.ol||!Array.isArray(t)))try{this.vectorSource.clear(),this.markerFeatures=[],this.highlightFeature=null,t.forEach((e,i)=>{let s,n;if(e.lng!==void 0&&e.lat!==void 0)s=parseFloat(e.lng),n=parseFloat(e.lat);else if(e.coordinates&&e.coordinates.longitude&&e.coordinates.latitude)s=parseFloat(e.coordinates.longitude),n=parseFloat(e.coordinates.latitude);else return;if(isNaN(s)||isNaN(n)||s<-180||s>180||n<-90||n>90)return;const r=new this.ol.Feature({geometry:new this.ol.geom.Point(this.ol.proj.fromLonLat([s,n])),data:e});this.markerFeatures.push(r),this.vectorSource.addFeature(r)})}catch{}},createMarkerStyle(t){const e=t.get("data"),i=e.color||e.category_color||"#3B82F6",s=e.featured||e.is_featured||!1,n=e.urgent||e.is_urgent||!1;return new this.ol.style.Style({image:new this.ol.style.Circle({radius:s?8:6,fill:new this.ol.style.Fill({color:i}),stroke:new this.ol.style.Stroke({color:n?"#EF4444":"#FFFFFF",width:n?3:2})})})},updateLayerVisibility(t){const e=t<10;this.clusterLayer&&this.clusterLayer.setVisible(e),this.vectorLayer&&this.vectorLayer.setVisible(!e)},throttledUpdateMarkers:null,createClusterStyle(t){const e=t.get("features"),i=e.length;if(i===1)return this.createMarkerStyle(e[0]);let s=Math.min(Math.max(10+i*2,15),35),n="#3B82F6";return i>20?n="#EF4444":i>10?n="#F59E0B":i>5&&(n="#10B981"),new this.ol.style.Style({image:new this.ol.style.Circle({radius:s,fill:new this.ol.style.Fill({color:n}),stroke:new this.ol.style.Stroke({color:"#FFFFFF",width:2})}),text:new this.ol.style.Text({text:i.toString(),fill:new this.ol.style.Fill({color:"#FFFFFF"}),font:"bold 12px sans-serif"})})},animateToLocation(t,e,i=12){if(!this.map||!this.ol){setTimeout(()=>{this.map&&this.ol&&this.animateToLocation(t,e,i)},2e3);return}const s=this.ol.proj.fromLonLat([e,t]);this.map.getView().animate({center:s,zoom:i,duration:1e3},()=>{setTimeout(()=>{this.fetchMapData({latitude:t,longitude:e,format:"map",limit:200})},500)})},hasBoundsChangedSignificantly(t){if(!this.lastBounds)return!0;const e=.1,[i,s,n,r]=t,[o,a,l,c]=this.lastBounds,d=Math.abs(n-i),h=Math.abs(r-s),w=d*e,m=h*e;return Math.abs(n-l)>w||Math.abs(i-o)>w||Math.abs(r-c)>m||Math.abs(s-a)>m},async fetchMapData(t={}){try{const e={format:"map",limit:200,content_type:"pet_sitter"},i=new URLSearchParams({...e,...t}),s=await fetch(`/api/search?${i.toString()}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const n=await s.json();n.success&&n.data&&n.data.markers&&this.updateMarkers(n.data.markers)}catch{const i=this.map.getView().calculateExtent(),s=this.ol.proj.transformExtent(i,"EPSG:3857","EPSG:4326"),n=[s[1],s[0],s[3],s[2]];Livewire.dispatch("map-bounds-changed",[n])}},showMapError(t){const e=document.getElementById("map-container");if(e){const i=document.createElement("div");i.className="flex items-center justify-center h-full bg-gray-100";const s=document.createElement("div");s.className="text-center p-8";const n=document.createElement("div");n.className="text-red-500 mb-4";const r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("class","w-16 h-16 mx-auto"),r.setAttribute("fill","none"),r.setAttribute("stroke","currentColor"),r.setAttribute("viewBox","0 0 24 24");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("stroke-linecap","round"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-width","2"),o.setAttribute("d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"),r.appendChild(o),n.appendChild(r);const a=document.createElement("h3");a.className="text-lg font-medium text-gray-900 mb-2",a.textContent="Błąd ładowania mapy";const l=document.createElement("p");l.className="text-gray-600 mb-4",l.textContent=t;const c=document.createElement("button");c.className="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",c.textContent="Odśwież stronę",c.onclick=()=>window.location.reload(),s.appendChild(n),s.appendChild(a),s.appendChild(l),s.appendChild(c),i.appendChild(s),e.innerHTML="",e.appendChild(i)}}}}class We{constructor(){this.isMobile=this.detectMobile(),this.touchStartY=0,this.touchStartX=0,this.isScrolling=!1,this.init()}init(){this.isMobile&&(this.setupTouchEvents(),this.setupResizeHandler(),this.setupViewportHandler(),this.optimizeForMobile())}detectMobile(){return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768||"ontouchstart"in window}setupTouchEvents(){document.addEventListener("touchstart",this.handleTouchStart.bind(this),{passive:!0}),document.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),document.addEventListener("touchend",this.handleTouchEnd.bind(this),{passive:!0}),this.addTouchFeedback()}handleTouchStart(e){this.touchStartY=e.touches[0].clientY,this.touchStartX=e.touches[0].clientX,this.isScrolling=!1;const i=e.target.closest('button, a, [role="button"]');i&&i.classList.add("touch-active")}handleTouchMove(e){if(!this.touchStartY||!this.touchStartX)return;const i=e.touches[0].clientY,s=e.touches[0].clientX,n=this.touchStartY-i,r=this.touchStartX-s;Math.abs(n)>Math.abs(r)&&Math.abs(n)>10&&(this.isScrolling=!0),this.isScrolling&&document.querySelectorAll(".touch-active").forEach(o=>{o.classList.remove("touch-active")})}handleTouchEnd(e){this.touchStartY=0,this.touchStartX=0,this.isScrolling=!1,setTimeout(()=>{document.querySelectorAll(".touch-active").forEach(i=>{i.classList.remove("touch-active")})},150)}addTouchFeedback(){const e=document.createElement("style");e.textContent=`
            .touch-active {
                transform: scale(0.95);
                opacity: 0.8;
                transition: transform 0.1s ease, opacity 0.1s ease;
            }

            button, [role="button"], a {
                -webkit-tap-highlight-color: transparent;
                touch-action: manipulation;
            }

            .touch-friendly {
                user-select: none;
                -webkit-user-select: none;
            }
        `,document.head.appendChild(e)}setupResizeHandler(){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{this.handleResize()},250)}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{this.handleOrientationChange()},500)})}handleResize(){this.isMobile=this.detectMobile(),this.refreshMapIfVisible(),this.updateViewportUnits(),window.dispatchEvent(new CustomEvent("mobile-resize",{detail:{width:window.innerWidth,height:window.innerHeight,isMobile:this.isMobile}}))}handleOrientationChange(){var e;/iPhone|iPad|iPod/.test(navigator.userAgent)&&(document.body.style.height=window.innerHeight+"px",setTimeout(()=>{document.body.style.height=""},500)),this.refreshMapIfVisible(),window.dispatchEvent(new CustomEvent("mobile-orientation-change",{detail:{orientation:((e=screen.orientation)==null?void 0:e.angle)||window.orientation}}))}setupViewportHandler(){this.updateViewportUnits(),this.handleIOSViewport()}updateViewportUnits(){const e=window.innerHeight*.01,i=window.innerWidth*.01;document.documentElement.style.setProperty("--vh",`${e}px`),document.documentElement.style.setProperty("--vw",`${i}px`),CSS.supports("padding: env(safe-area-inset-top)")&&document.documentElement.classList.add("has-safe-area")}handleIOSViewport(){if(!/iPhone|iPad|iPod/.test(navigator.userAgent))return;document.querySelectorAll("input, select, textarea").forEach(i=>{i.addEventListener("focus",()=>{i.style.fontSize!=="16px"&&(i.style.fontSize="16px")})}),window.addEventListener("focusin",()=>{document.body.classList.add("keyboard-open")}),window.addEventListener("focusout",()=>{setTimeout(()=>{document.body.classList.remove("keyboard-open"),this.updateViewportUnits()},300)})}optimizeForMobile(){this.isMobile&&(document.body.classList.add("is-mobile"),this.optimizeImages(),this.setupLazyLoading(),this.improveFormInteractions(),this.preventPullToRefresh())}optimizeImages(){document.querySelectorAll("img[data-mobile-src]").forEach(i=>{window.innerWidth<=768&&(i.src=i.dataset.mobileSrc)})}setupLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver(i=>{i.forEach(s=>{if(s.isIntersecting){const n=s.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n))}})});document.querySelectorAll("img[data-src]").forEach(i=>{e.observe(i)})}}improveFormInteractions(){document.querySelectorAll('input[type="text"], textarea').forEach(n=>{n.hasAttribute("autocapitalize")||n.setAttribute("autocapitalize","sentences")}),document.querySelectorAll('input[type="number"]').forEach(n=>{n.setAttribute("inputmode","numeric")}),document.querySelectorAll('input[type="email"]').forEach(n=>{n.setAttribute("inputmode","email")})}preventPullToRefresh(){document.addEventListener("touchstart",e=>{if(e.touches.length!==1)return;e.touches[0];const i=e.target;window.scrollY===0&&!i.closest(".scrollable")&&e.preventDefault()},{passive:!1}),document.addEventListener("touchmove",e=>{e.touches.length===1&&window.scrollY===0&&e.touches[0].clientY>this.touchStartY&&e.preventDefault()},{passive:!1})}refreshMapIfVisible(){const e=document.getElementById("search-map");e&&e.offsetParent!==null&&setTimeout(()=>{window.dispatchEvent(new CustomEvent("map-resize"))},100)}static init(){return window.mobileTouchHandler||(window.mobileTouchHandler=new We),window.mobileTouchHandler}static isMobileDevice(){var e;return((e=window.mobileTouchHandler)==null?void 0:e.isMobile)||!1}static addTouchClass(e,i="touch-active"){var s;(s=window.mobileTouchHandler)!=null&&s.isMobile&&e.classList.add(i)}static removeTouchClass(e,i="touch-active"){e.classList.remove(i)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{We.init()}):We.init();window.MobileTouchHandler=We;class Ee{constructor(){this.storageKey="pethelp-dark-mode",this.systemPreference=window.matchMedia("(prefers-color-scheme: dark)"),this.init()}init(){this.initializeDarkMode(),this.systemPreference.addEventListener("change",this.handleSystemPreferenceChange.bind(this)),this.setupEventListeners(),this.setupDarkModeStyles(),this.initializeAlpineData()}initializeDarkMode(){const e=this.getSavedMode();e==="dark"||e==="auto"&&this.systemPreference.matches?this.enableDarkMode():this.disableDarkMode()}getSavedMode(){try{return localStorage.getItem(this.storageKey)||"auto"}catch{return"auto"}}setSavedMode(e){try{localStorage.setItem(this.storageKey,e)}catch{}}enableDarkMode(){document.documentElement.classList.add("dark"),document.body.classList.add("dark-mode"),this.updateThemeColor("#1f2937"),this.dispatchDarkModeEvent(!0)}disableDarkMode(){document.documentElement.classList.remove("dark"),document.body.classList.remove("dark-mode"),this.updateThemeColor("#3b82f6"),this.dispatchDarkModeEvent(!1)}updateThemeColor(e){const i=document.querySelector('meta[name="theme-color"]');i&&i.setAttribute("content",e)}dispatchDarkModeEvent(e){window.dispatchEvent(new CustomEvent("dark-mode-changed",{detail:{isDark:e,mode:this.getCurrentMode(),systemPreference:this.systemPreference.matches}}))}getCurrentMode(){return this.getSavedMode()}isDarkMode(){return document.documentElement.classList.contains("dark")}toggle(){this.isDarkMode()?this.setMode("light"):this.setMode("dark")}setMode(e){switch(this.setSavedMode(e),e){case"dark":this.enableDarkMode();break;case"light":this.disableDarkMode();break;case"auto":this.systemPreference.matches?this.enableDarkMode():this.disableDarkMode();break}}handleSystemPreferenceChange(e){this.getSavedMode()==="auto"&&(e.matches?this.enableDarkMode():this.disableDarkMode())}setupEventListeners(){document.addEventListener("toggle-dark-mode",()=>{this.toggle()}),document.addEventListener("set-dark-mode",e=>{this.setMode(e.detail.mode)}),document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"&&(e.preventDefault(),this.toggle())})}setupDarkModeStyles(){const e=document.createElement("style");e.textContent=`
            :root {
                --transition-duration: 0.3s;
            }

            * {
                transition: background-color var(--transition-duration) ease,
                           border-color var(--transition-duration) ease,
                           color var(--transition-duration) ease,
                           box-shadow var(--transition-duration) ease;
            }

            /* Disable transitions during initial load */
            .preload * {
                transition: none !important;
            }

            /* Dark mode specific adjustments */
            .dark-mode {
                color-scheme: dark;
            }

            /* Map dark mode adjustments */
            .dark .leaflet-control-container {
                filter: invert(1) hue-rotate(180deg);
            }

            .dark .leaflet-popup-content-wrapper {
                background: #374151;
                color: #f9fafb;
            }

            .dark .leaflet-popup-tip {
                background: #374151;
            }

            /* Custom scrollbar for dark mode */
            .dark ::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }

            .dark ::-webkit-scrollbar-track {
                background: #374151;
            }

            .dark ::-webkit-scrollbar-thumb {
                background: #6b7280;
                border-radius: 4px;
            }

            .dark ::-webkit-scrollbar-thumb:hover {
                background: #9ca3af;
            }

            /* Selection colors in dark mode */
            .dark ::selection {
                background: #3b82f6;
                color: #ffffff;
            }

            /* Focus indicators in dark mode */
            .dark *:focus {
                outline-color: #60a5fa;
            }

            /* Image adjustments in dark mode */
            .dark img:not(.no-dark-filter) {
                filter: brightness(0.9);
            }
        `,document.head.appendChild(e),document.body.classList.add("preload"),setTimeout(()=>{document.body.classList.remove("preload")},100)}initializeAlpineData(){window.darkMode={isDark:()=>this.isDarkMode(),mode:()=>this.getCurrentMode(),toggle:()=>this.toggle(),setMode:e=>this.setMode(e),systemPrefers:()=>this.systemPreference.matches},document.addEventListener("alpine:init",()=>{window.Alpine&&Alpine.data("darkModeToggle",()=>({isDark:!1,currentMode:"auto",systemPreference:!1,showOptions:!1,init(){var e,i,s;this.updateState({isDark:((e=window.darkMode)==null?void 0:e.isDark())||!1,mode:((i=window.darkMode)==null?void 0:i.mode())||"auto",systemPreference:((s=window.darkMode)==null?void 0:s.systemPrefers())||!1})},updateState(e){this.isDark=e.isDark,this.currentMode=e.mode,this.systemPreference=e.systemPreference},toggle(){window.darkMode&&window.darkMode.toggle(),this.showOptions=!1},setMode(e){window.darkMode&&window.darkMode.setMode(e),this.showOptions=!1},getModeLabel(e){switch(e){case"light":return"Jasny";case"dark":return"Ciemny";case"auto":return"Auto";default:return"Auto"}}}))})}static init(){return window.darkModeManager||(window.darkModeManager=new Ee),window.darkModeManager}static toggle(){window.darkModeManager&&window.darkModeManager.toggle()}static setMode(e){window.darkModeManager&&window.darkModeManager.setMode(e)}static isDark(){var e;return((e=window.darkModeManager)==null?void 0:e.isDarkMode())||!1}static getMode(){var e;return((e=window.darkModeManager)==null?void 0:e.getCurrentMode())||"auto"}}Ee.init();document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Ee.init()}):Ee.init();window.DarkModeManager=Ee;class us{constructor(){this.trapFocus=this.trapFocus.bind(this),this.handleKeyboardNavigation=this.handleKeyboardNavigation.bind(this),this.announceToScreenReader=this.announceToScreenReader.bind(this),this.init()}init(){this.setupFocusManagement(),this.setupKeyboardNavigation(),this.setupAriaLiveRegions(),this.setupSkipNavigation(),this.setupModalAccessibility(),this.setupFormAccessibility(),this.setupSearchResultsAccessibility(),this.setupMapAccessibility(),this.setupToastNotifications()}setupFocusManagement(){document.addEventListener("focusin",e=>{e.target.closest(".modal-accessible")&&(this.lastFocusedElement=document.activeElement)}),document.addEventListener("click",e=>{e.target.classList.contains("modal-close")&&this.lastFocusedElement&&(this.lastFocusedElement.focus(),this.lastFocusedElement=null)})}trapFocus(e){const i=e.querySelectorAll('a[href], button, textarea, input[type="text"], input[type="radio"], input[type="checkbox"], select');if(i.length===0)return;const s=i[0],n=i[i.length-1];e.addEventListener("keydown",r=>{r.key==="Tab"&&(r.shiftKey?document.activeElement===s&&(n.focus(),r.preventDefault()):document.activeElement===n&&(s.focus(),r.preventDefault()))}),setTimeout(()=>s.focus(),100)}setupKeyboardNavigation(){document.addEventListener("keydown",this.handleKeyboardNavigation);let e=0;document.addEventListener("keydown",i=>{i.key==="Tab"&&(e++,e===3&&this.showKeyboardHelper())})}handleKeyboardNavigation(e){e.key==="Escape"&&this.handleEscapeKey(),e.key==="Enter"&&e.target.getAttribute("role")==="button"&&e.target.click(),["ArrowUp","ArrowDown"].includes(e.key)&&this.handleArrowNavigation(e),e.altKey&&e.key==="h"&&(e.preventDefault(),this.showKeyboardHelper())}handleEscapeKey(){const e=document.querySelector('.modal-accessible[aria-hidden="false"]');if(e){this.closeModal(e);return}const i=document.querySelector('[aria-expanded="true"]');i&&(i.setAttribute("aria-expanded","false"),i.focus())}handleArrowNavigation(e){const i=e.target.closest('[role="menu"], [role="menubar"]');if(!i)return;const s=Array.from(i.querySelectorAll('[role="menuitem"]')),n=s.indexOf(e.target);if(n===-1)return;let r;e.key==="ArrowDown"?r=n===s.length-1?0:n+1:r=n===0?s.length-1:n-1,s[r].focus(),e.preventDefault()}showKeyboardHelper(){const e=document.querySelector(".keyboard-nav-helper")||this.createKeyboardHelper();e.classList.add("show"),e.focus(),setTimeout(()=>{e.classList.remove("show")},5e3)}createKeyboardHelper(){const e=document.createElement("div");return e.className="keyboard-nav-helper",e.setAttribute("tabindex","-1"),e.innerHTML=`
            <h3>Skróty klawiszowe</h3>
            <ul style="text-align: left; margin: 10px 0;">
                <li><strong>Tab</strong> - Przejdź do następnego elementu</li>
                <li><strong>Shift + Tab</strong> - Przejdź do poprzedniego elementu</li>
                <li><strong>Enter/Spacja</strong> - Aktywuj element</li>
                <li><strong>Escape</strong> - Zamknij modal lub dropdown</li>
                <li><strong>Alt + H</strong> - Pokaż tę pomoc</li>
                <li><strong>Strzałki</strong> - Nawigacja w menu</li>
            </ul>
            <button onclick="this.parentElement.classList.remove('show')" style="margin-top: 10px; padding: 5px 10px;">Zamknij</button>
        `,document.body.appendChild(e),e}setupAriaLiveRegions(){if(!document.querySelector("#aria-live-polite")){const e=document.createElement("div");e.id="aria-live-polite",e.setAttribute("aria-live","polite"),e.className="sr-only",document.body.appendChild(e)}if(!document.querySelector("#aria-live-assertive")){const e=document.createElement("div");e.id="aria-live-assertive",e.setAttribute("aria-live","assertive"),e.className="sr-only",document.body.appendChild(e)}}announceToScreenReader(e,i="polite"){const s=document.querySelector(`#aria-live-${i}`);s&&(s.textContent="",setTimeout(()=>{s.textContent=e},100))}setupSkipNavigation(){if(!document.querySelector(".skip-navigation")){const i=document.createElement("a");i.className="skip-navigation",i.href="#main-content",i.textContent="Przejdź do głównej treści",document.body.insertBefore(i,document.body.firstChild)}const e=document.querySelector("main");e&&!e.id&&(e.id="main-content",e.setAttribute("tabindex","-1"))}setupModalAccessibility(){document.addEventListener("click",e=>{if(e.target.hasAttribute("data-modal-trigger")){const i=e.target.getAttribute("data-modal-trigger"),s=document.querySelector(`#${i}`);s&&this.openModal(s)}})}openModal(e){e.setAttribute("aria-hidden","false"),e.style.display="flex",this.trapFocus(e),document.body.style.overflow="hidden",this.announceToScreenReader("Modal otwarty","assertive")}closeModal(e){e.setAttribute("aria-hidden","true"),e.style.display="none",document.body.style.overflow="",this.lastFocusedElement&&(this.lastFocusedElement.focus(),this.lastFocusedElement=null),this.announceToScreenReader("Modal zamknięty","assertive")}setupFormAccessibility(){document.querySelectorAll("input, select, textarea").forEach(e=>{var s;e.id||(e.id=`field-${Math.random().toString(36).substr(2,9)}`);const i=(s=e.closest(".form-field-accessible"))==null?void 0:s.querySelector("label");i&&!i.getAttribute("for")&&i.setAttribute("for",e.id),e.hasAttribute("required")&&e.setAttribute("aria-required","true"),e.addEventListener("invalid",n=>{this.handleFormError(n.target)}),e.addEventListener("input",n=>{this.clearFormError(n.target)})})}handleFormError(e){var r,o;const i=e.closest(".form-field-accessible");if(!i)return;e.setAttribute("aria-invalid","true");let s=i.querySelector(".error-message");s||(s=document.createElement("div"),s.className="error-message",s.id=`error-${e.id}`,i.appendChild(s));const n=e.validationMessage||"To pole jest wymagane";s.textContent=n,e.setAttribute("aria-describedby",s.id),this.announceToScreenReader(`Błąd w polu ${((o=(r=e.labels)==null?void 0:r[0])==null?void 0:o.textContent)||e.name}: ${n}`,"assertive")}clearFormError(e){e.removeAttribute("aria-invalid");const i=e.closest(".form-field-accessible"),s=i==null?void 0:i.querySelector(".error-message");s&&(s.remove(),e.removeAttribute("aria-describedby"))}setupSearchResultsAccessibility(){document.querySelectorAll('form[role="search"], .search-form').forEach(i=>{i.addEventListener("submit",()=>{setTimeout(()=>{this.updateSearchResultsAnnouncement()},1e3)})}),document.addEventListener("livewire:updated",()=>{this.updateSearchResultsAnnouncement()})}updateSearchResultsAnnouncement(){const e=document.querySelector(".search-results-accessible, [wire\\:poll], .search-results");if(!e)return;const s=e.querySelectorAll(".search-result-item, .result-item, [data-result-item]").length,n=s===0?"Nie znaleziono wyników":`Znaleziono ${s} ${s===1?"wynik":s<5?"wyniki":"wyników"}`;e.setAttribute("data-results-count",n),this.announceToScreenReader(n,"polite")}setupMapAccessibility(){document.querySelectorAll("#map, .map-container, [data-map]").forEach(i=>{i.classList.add("map-accessible"),i.setAttribute("role","application"),i.setAttribute("aria-label","Interaktywna mapa z lokalizacjami"),i.setAttribute("tabindex","0");const s=document.createElement("div");s.className="sr-only",s.textContent="Użyj klawiszy strzałek do poruszania się po mapie, spacji do interakcji z markerami",i.appendChild(s)})}setupToastNotifications(){this.toastContainer=document.createElement("div"),this.toastContainer.id="toast-container",this.toastContainer.setAttribute("aria-live","polite"),this.toastContainer.style.cssText="position: fixed; top: 20px; right: 20px; z-index: 9999;",document.body.appendChild(this.toastContainer)}showToast(e,i="info",s=5e3){const n=document.createElement("div");return n.className=`toast-accessible toast-${i}`,n.setAttribute("role","alert"),n.innerHTML=`
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <span>${e}</span>
                <button onclick="this.parentElement.parentElement.remove()" style="margin-left: 10px; background: none; border: none; font-size: 18px; cursor: pointer;" aria-label="Zamknij powiadomienie">&times;</button>
            </div>
        `,this.toastContainer.appendChild(n),setTimeout(()=>{n.parentElement&&n.remove()},s),n}setLoadingState(e,i,s="Ładowanie..."){i?(e.setAttribute("aria-busy","true"),e.setAttribute("aria-label",s),e.classList.add("loading-accessible")):(e.removeAttribute("aria-busy"),e.removeAttribute("aria-label"),e.classList.remove("loading-accessible"))}isElementAccessible(e){const i=window.getComputedStyle(e);return i.display!=="none"&&i.visibility!=="hidden"&&i.opacity!=="0"&&!e.hasAttribute("aria-hidden")}getAccessibleName(e){if(e.hasAttribute("aria-label"))return e.getAttribute("aria-label");if(e.hasAttribute("aria-labelledby")){const i=e.getAttribute("aria-labelledby"),s=document.getElementById(i);if(s)return s.textContent.trim()}return e.labels&&e.labels.length>0?e.labels[0].textContent.trim():e.textContent.trim()}}document.addEventListener("DOMContentLoaded",()=>{window.accessibilityHelper=new us});window.AccessibilityHelper=us;document.addEventListener("alpine:init",()=>{Alpine.data("petSitterWizard",()=>({showWizard:!1,currentStep:1,isTransitioning:!1,currentDirection:"forward",loadingStates:{validation:!1,saving:!1,stepChange:!1,autoSaving:!1},autoSaveTimer:null,lastAutoSave:null,animationConfig:{stepTransition:{duration:400,easing:"cubic-bezier(0.4, 0, 0.2, 1)"},feedback:{duration:300,delay:150},microInteractions:{duration:200,scale:1.02}},init(){this.showWizard=this.$wire.isActive||!1,this.currentStep=this.$wire.currentStep||1,this.setupEventListeners(),this.initializeTransitions(),this.$wire.on("wizard-activated",()=>{this.showWizard=!0,document.body.style.overflow="hidden"}),this.$wire.on("wizard-deactivated",()=>{this.showWizard=!1,document.body.style.overflow="auto"})},handleStepChange(t){if(!t||typeof t.step>"u")return;this.currentStep=t.step;const e=this.$el.querySelector("main");e&&e.scrollTo({top:0,behavior:"smooth"})},destroy(){document.body.style.overflow="auto"},setupEventListeners(){this.$wire.on("step-transition-start",t=>{this.startStepTransition(t.direction)}),this.$wire.on("step-changed",t=>{this.completeStepTransition(t)}),this.$wire.on("validation-failed",t=>{Array.isArray(t)&&t.length>0&&(t=t[0]),t&&(t.errors||t.validationErrors)?this.showValidationErrors(t.errors||t.validationErrors):t&&typeof t=="object"&&this.showValidationErrors(t)}),this.$wire.on("hide-success-feedback-after",t=>{const e=t.delay||1e3,i=performance.now(),s=n=>{n-i>=e?this.$wire.hideSuccessFeedback():requestAnimationFrame(s)};requestAnimationFrame(s)}),this.$wire.on("field-updated",t=>{this.animateFieldUpdate(t)}),this.$wire.on("option-selected",t=>{this.animateOptionSelection(t)}),this.$wire.on("option-preview",t=>{this.showOptionPreview(t)}),this.$wire.on("highlight-element",t=>{this.highlightElement(t)}),this.$wire.on("show-tooltip",t=>{this.showTooltip(t)}),this.$wire.on("trigger-auto-save",t=>{this.triggerAutoSave(t)}),this.$wire.on("auto-save-success",t=>{this.showAutoSaveSuccess(t)}),this.$wire.on("auto-save-error",t=>{this.showAutoSaveError(t)})},initializeTransitions(){if(!document.querySelector("#wizard-animations-styles")){const t=document.createElement("style");t.id="wizard-animations-styles",t.textContent=`
                    .wizard-step-enter {
                        opacity: 0;
                        transform: translateX(20px);
                    }

                    .wizard-step-enter-active {
                        transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
                    }

                    .wizard-step-enter-to {
                        opacity: 1;
                        transform: translateX(0);
                    }

                    .wizard-step-leave {
                        opacity: 1;
                        transform: translateX(0);
                    }

                    .wizard-step-leave-active {
                        transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
                    }

                    .wizard-step-leave-to {
                        opacity: 0;
                        transform: translateX(-20px);
                    }

                    .option-selected {
                        animation: optionSelect 300ms cubic-bezier(0.4, 0, 0.2, 1);
                    }

                    .field-valid {
                        animation: fieldSuccess 400ms ease-out;
                    }

                    .validation-error {
                        animation: shake 400ms ease-in-out;
                    }

                    .loading-pulse {
                        animation: pulse 1.5s ease-in-out infinite;
                    }

                    @keyframes optionSelect {
                        0% { transform: scale(1); }
                        50% { transform: scale(1.02); }
                        100% { transform: scale(1); }
                    }

                    @keyframes fieldSuccess {
                        0% { border-color: #e5e7eb; }
                        50% { border-color: #10b981; box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2); }
                        100% { border-color: #10b981; }
                    }

                    @keyframes shake {
                        0%, 100% { transform: translateX(0); }
                        25% { transform: translateX(-4px); }
                        75% { transform: translateX(4px); }
                    }

                    @keyframes pulse {
                        0%, 100% { opacity: 1; }
                        50% { opacity: 0.5; }
                    }

                    .micro-bounce {
                        animation: microBounce 200ms ease-out;
                    }

                    @keyframes microBounce {
                        0% { transform: scale(1); }
                        50% { transform: scale(1.05); }
                        100% { transform: scale(1); }
                    }

                    .auto-save-indicator {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: #f3f4f6;
                        border: 1px solid #e5e7eb;
                        border-radius: 8px;
                        padding: 8px 12px;
                        font-size: 12px;
                        color: #6b7280;
                        z-index: 1000;
                        opacity: 0;
                        transform: translateX(100px);
                        transition: all 300ms ease-out;
                        pointer-events: none;
                    }

                    .auto-save-indicator.visible {
                        opacity: 1;
                        transform: translateX(0);
                    }

                    .auto-save-indicator.saving {
                        background: #fef3c7;
                        border-color: #f59e0b;
                        color: #92400e;
                    }

                    .auto-save-indicator.success {
                        background: #d1fae5;
                        border-color: #10b981;
                        color: #065f46;
                    }

                    .auto-save-indicator.error {
                        background: #fee2e2;
                        border-color: #f87171;
                        color: #991b1b;
                    }

                    .auto-save-spinner {
                        display: inline-block;
                        width: 12px;
                        height: 12px;
                        border: 2px solid transparent;
                        border-top-color: currentColor;
                        border-radius: 50%;
                        animation: spin 1s linear infinite;
                        margin-right: 6px;
                    }

                    @keyframes spin {
                        to { transform: rotate(360deg); }
                    }
                `,document.head.appendChild(t)}},startStepTransition(t){this.isTransitioning=!0,this.currentDirection=t,this.loadingStates.stepChange=!0;const e=document.querySelector(".wizard-step.active");e&&(e.classList.add("wizard-step-leave"),e.classList.add("wizard-step-leave-active"))},completeStepTransition(t){requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.querySelectorAll(".wizard-step").forEach(s=>{s.classList.remove("wizard-step-leave","wizard-step-leave-active","wizard-step-leave-to")});const i=document.querySelector(`[data-step="${t.step}"]`);i&&(i.classList.add("wizard-step-enter"),requestAnimationFrame(()=>{i.classList.add("wizard-step-enter-active"),i.classList.remove("wizard-step-enter"),i.classList.add("wizard-step-enter-to")})),this.isTransitioning=!1,this.loadingStates.stepChange=!1})})},showValidationErrors(t){!t||typeof t!="object"||Object.keys(t).forEach(e=>{const i=document.querySelector(`[name="${e}"]`);i&&(i.classList.add("validation-error"),i.addEventListener("animationend",()=>{i.classList.remove("validation-error")},{once:!0}))})},animateFieldUpdate(t){if(Array.isArray(t)&&t.length>0&&(t=t[0]),!t||typeof t!="object"||!t.field&&!t.name)return;const e=t.field||t.name,i=document.querySelector(`[name="${e}"]`);i&&(t.isValid||t.valid)&&(i.classList.add("field-valid"),i.addEventListener("animationend",()=>{i.classList.remove("field-valid")},{once:!0}))},animateOptionSelection(t){const e=document.querySelector(`[data-option="${t.field}-${t.value}"]`);e&&(e.classList.add("option-selected"),e.addEventListener("animationend",()=>{e.classList.remove("option-selected")},{once:!0}))},showOptionPreview(t){const e=document.querySelector(`[data-option="${t.field}-${t.value}"]`);e&&(e.style.transform="scale(1.02)",e.style.transition="transform 150ms ease-out",e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"},{once:!0}))},highlightElement(t){const e=document.getElementById(t.elementId);if(e){e.classList.add("loading-pulse");const i=()=>{e.classList.remove("loading-pulse"),e.removeEventListener("animationend",i)};e.addEventListener("animationend",i);const s=t.duration||1500,n=performance.now(),r=o=>{o-n>=s?e.classList.contains("loading-pulse")&&e.classList.remove("loading-pulse"):requestAnimationFrame(r)};requestAnimationFrame(r)}},showTooltip(t){},setLoadingState(t,e){this.loadingStates[t]=e},isLoading(t){return this.loadingStates[t]},animateButtonClick(t){t.classList.add("micro-bounce"),t.addEventListener("animationend",()=>{t.classList.remove("micro-bounce")},{once:!0})},animateProgress(t){const e=document.querySelector(".progress-bar");e&&(e.style.transition="width 400ms ease-out",e.style.width=`${t}%`)},triggerAutoSave(t){if(!t)return;this.autoSaveTimer&&cancelAnimationFrame(this.autoSaveTimer),t.showIndicator&&this.showAutoSaveIndicator("waiting");const e=t.delay||1500,i=performance.now(),s=n=>{n-i>=e?this.performAutoSave():this.autoSaveTimer=requestAnimationFrame(s)};this.autoSaveTimer=requestAnimationFrame(s)},performAutoSave(){this.loadingStates.autoSaving=!0,this.showAutoSaveIndicator("saving"),this.$wire.performAutoSave()},showAutoSaveIndicator(t){let e=document.getElementById("auto-save-indicator");e||(e=document.createElement("div"),e.id="auto-save-indicator",e.className="auto-save-indicator",document.body.appendChild(e)),e.className="auto-save-indicator";let i="";switch(t){case"waiting":i="Przygotowywanie auto-zapisu...";break;case"saving":i='<span class="auto-save-spinner"></span>Zapisywanie...',e.classList.add("saving");break;case"success":i="✓ Zapisano automatycznie",e.classList.add("success");break;case"error":i="⚠ Błąd auto-zapisu",e.classList.add("error");break}if(e.innerHTML=i,e.classList.add("visible"),t==="success"||t==="error"){const s=t==="success"?2e3:4e3,n=performance.now(),r=o=>{o-n>=s?this.hideAutoSaveIndicator():requestAnimationFrame(r)};requestAnimationFrame(r)}},hideAutoSaveIndicator(){const t=document.getElementById("auto-save-indicator");t&&t.classList.remove("visible")},showAutoSaveSuccess(t){this.loadingStates.autoSaving=!1,this.lastAutoSave=t.timestamp,this.showAutoSaveIndicator("success")},showAutoSaveError(t){this.loadingStates.autoSaving=!1,this.showAutoSaveIndicator("error")}}))});window.WizardAnimations={staggerAnimation(t,e=50){t.forEach((i,s)=>{const n=s*e,r=performance.now(),o=a=>{a-r>=n?(i.style.opacity="1",i.style.transform="translateY(0)"):requestAnimationFrame(o)};requestAnimationFrame(o)})},bounceElement(t){t.style.animation="microBounce 200ms ease-out",t.addEventListener("animationend",()=>{t.style.animation=""},{once:!0})},fadeIn(t,e=300){t.style.opacity="0",t.style.transition=`opacity ${e}ms ease-in-out`,requestAnimationFrame(()=>{t.style.opacity="1"})}};class xe{constructor(){this.state={meta:{currentStep:1,maxSteps:12,isActive:!1,progressPercentage:0,completionPercentage:0,completedSteps:[],isValid:!1,canProceed:!1},personalData:{name:"",email:"",city:"",motivation:"",motivationLength:0,hasStartedTyping:!1},experience:{petExperience:[],experienceDescription:"",yearsOfExperience:0,animalTypes:[],animalSizes:[],hasExperienceWithDogs:!1,hasExperienceWithCats:!1,hasExperienceWithSmallAnimals:!1},services:{serviceTypes:[],specialServices:[],canWalkDogs:!1,canOvernightSit:!1,canDaySit:!1,canPetGrooming:!1},location:{address:"",serviceRadius:10,coordinates:{lat:null,lng:null}},availability:{weeklyAvailability:{},flexibleSchedule:!1,emergencyAvailable:!1,morningAvailable:!1,afternoonAvailable:!1,eveningAvailable:!1,weekendAvailable:!1},home:{homeType:"",hasGarden:!1,isSmoking:!1,hasOtherPets:!1,otherPets:[],isSafeEnvironment:!0,hasSecureFencing:!1},verification:{hasProfilePhoto:!1,homePhotosCount:0,hasIdentityDocument:!1,hasCriminalRecord:!1,referencesCount:0,isVerified:!1},pricing:{pricingStrategy:"competitive",servicePricing:{dogWalking:0,overnightSitting:0,daySitting:0,petGrooming:0}},terms:{agreedToTerms:!1,marketingConsent:!1,privacyPolicyAccepted:!1,completedAt:null}},this.watchers=[],this.livewire=null,this.debugging=window.location.hostname==="pethelp.test",this.changeHistory=[],this.maxHistorySize=100,this.init()}init(){this.debugging,window.WizardState=this,this.setupLivewireIntegration(),this.setupDevHelpers()}update(e,i){const s=this.get(e);s!==i&&(this.set(e,i),this.recordChange(e,s,i),this.syncToLivewire(e,i),this.notify(e,i,s),this.debugging)}get(e){return e.split(".").reduce((i,s)=>i==null?void 0:i[s],this.state)}set(e,i){const s=e.split("."),n=s.pop(),r=s.reduce((o,a)=>(o[a]||(o[a]={}),o[a]),this.state);r[n]=i,this.updateMetaState()}updateMetaState(){const e=this.state.meta.maxSteps,i=this.state.meta.currentStep;this.state.meta.progressPercentage=Math.round(i/e*100);const s=this.validateCurrentStep();this.state.meta.canProceed=s.isValid,this.state.meta.isValid=s.isValid}validateCurrentStep(){switch(this.state.meta.currentStep){case 1:return{isValid:this.state.personalData.motivation.length>=50,errors:this.state.personalData.motivation.length<50?["Motywacja musi mieć co najmniej 50 znaków"]:[]};case 2:return{isValid:this.state.experience.petExperience.length>0&&this.state.experience.animalTypes.length>0,errors:[]};case 3:return{isValid:this.state.experience.yearsOfExperience>0,errors:[]};case 4:return{isValid:this.state.services.serviceTypes.length>0,errors:[]};case 6:return{isValid:Object.keys(this.state.availability.weeklyAvailability).length>0,errors:[]};case 7:return{isValid:this.state.home.homeType.length>0,errors:[]};default:return{isValid:!0,errors:[]}}}syncToLivewire(e,i){if(!this.livewire){const s=document.querySelector("[wire\\:id]");s&&window.Livewire&&(this.livewire=window.Livewire.find(s.getAttribute("wire:id")))}if(this.livewire&&this.livewire.set)try{const s=this.mapPathToLivewire(e);s&&(this.livewire.set(s,i,!1),this.debugging)}catch{}}mapPathToLivewire(e){return{"personalData.motivation":"motivation","personalData.name":"name","personalData.email":"email","personalData.city":"city","experience.petExperience":"petExperience","experience.animalTypes":"animalTypes","experience.animalSizes":"animalSizes","services.serviceTypes":"serviceTypes","location.address":"address","location.serviceRadius":"serviceRadius","availability.flexibleSchedule":"flexibleSchedule","availability.emergencyAvailable":"emergencyAvailable","home.homeType":"homeType","home.hasGarden":"hasGarden","home.isSmoking":"isSmoking","home.hasOtherPets":"hasOtherPets","meta.currentStep":"currentStep"}[e]||null}watch(e){typeof e=="function"&&this.watchers.push(e)}notify(e,i,s){this.watchers.forEach(n=>{try{n(e,i,s)}catch{}})}recordChange(e,i,s){this.changeHistory.push({timestamp:new Date().toISOString(),path:e,oldValue:i,newValue:s,stack:new Error().stack}),this.changeHistory.length>this.maxHistorySize&&this.changeHistory.shift()}setupLivewireIntegration(){typeof window<"u"&&(document.addEventListener("livewire:initialized",()=>{this.debugging}),document.addEventListener("livewire:navigated",()=>{this.livewire=null}))}setupDevHelpers(){this.debugging&&typeof window<"u"&&(window.dumpWizardState=()=>this.state,window.wizardHistory=()=>this.changeHistory,window.validateWizardStep=e=>{const i=this.state.meta.currentStep;this.state.meta.currentStep=e||i;const s=this.validateCurrentStep();return this.state.meta.currentStep=i,s},window.resetWizardState=()=>{this.state=new xe().state})}exportState(){return JSON.stringify(this.state,null,2)}importState(e){try{const i=JSON.parse(e);return this.state=i,this.updateMetaState(),this.notify("*",this.state,{}),!0}catch{return!1}}reset(){const e=new xe().state;this.state=e,this.changeHistory=[],this.notify("*",this.state,{}),this.debugging}}typeof window<"u"&&(window.WizardStateManager=xe,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.WizardState=new xe}):window.WizardState=new xe);function hs(){return{map:null,mapInitialized:!1,userMarker:null,radiusCircle:null,searchTimeout:null,populationTimeout:null,_localServiceRadius:10,_localRadiusLabel:"10 km",_estimatedPopulation:null,_businessMetrics:null,estimatedPopulation:null,businessMetrics:null,populationText:"Obliczanie...",businessText:"",radiusLabel:"10 km",_localAddress:"",init(){window.WizardState&&this.initializeStateIfNeeded()},initializeStateIfNeeded(){var n,r;const t=((n=this.$wire)==null?void 0:n.address)||"",e=((r=this.$wire)==null?void 0:r.serviceRadius)||10;!this.currentAddress&&t&&window.WizardState.update("location.address",t),!this.serviceRadius&&e&&window.WizardState.update("location.serviceRadius",e),Array.isArray(this.currentSuggestions)||window.WizardState.update("location.addressSuggestions",[]),this.selectedIndex===void 0&&window.WizardState.update("location.selectedSuggestionIndex",-1);const i=window.WizardState.get("location.serviceRadius")||e;this._localServiceRadius=i,this._localRadiusLabel=i+" km",this.estimatedPopulation=null,this.businessMetrics=null,this.populationText="Obliczanie...",this.businessText="",this.radiusLabel=i+" km";const s=window.WizardState.get("location.address");this._localAddress=s||t||"",this.updateDerivedState()},get currentAddress(){return this._localAddress||""},get serviceRadius(){var e;const t=((e=window.WizardState)==null?void 0:e.get("location.serviceRadius"))||10;return this._localServiceRadius!==t&&(this._localServiceRadius=t),this._localServiceRadius},updatePopulationTexts(){if(this.populationText=this.getFormattedPopulationText(),this.businessText=this.getFormattedBusinessText(),this.estimatedPopulation=this._estimatedPopulation,this.businessMetrics=this._businessMetrics,window.WizardState){if(window.WizardState.update("location.populationText",this.populationText),window.WizardState.update("location.businessText",this.businessText),window.WizardState.update("location.estimatedPopulation",this._estimatedPopulation),window.WizardState.update("location.businessMetrics",this._businessMetrics),this._businessMetrics){const e={households:this._businessMetrics.households?this._businessMetrics.households.toLocaleString("pl-PL"):"-",petOwningHouseholds:this._businessMetrics.petOwningHouseholds?this._businessMetrics.petOwningHouseholds.toLocaleString("pl-PL"):"-",potentialClients:this._businessMetrics.potentialClients?this._businessMetrics.potentialClients.toLocaleString("pl-PL"):"-"};window.WizardState.update("location.businessMetricsFormatted",e)}this._businessMetrics&&this._businessMetrics.notes&&window.WizardState.update("location.estimationNotes",this._businessMetrics.notes),this.$nextTick(()=>{this.updateSidebarStats()})}},updateSidebarStats(){var i,s,n;window.dispatchEvent(new CustomEvent("wizard-data-updated",{detail:{step:5,type:"population-estimation",data:{populationText:(i=window.WizardState)==null?void 0:i.get("location.populationText"),businessMetrics:(s=window.WizardState)==null?void 0:s.get("location.businessMetrics"),businessMetricsFormatted:(n=window.WizardState)==null?void 0:n.get("location.businessMetricsFormatted")}}}))},getFormattedPopulationText(){return this._estimatedPopulation?this._estimatedPopulation>=1e6?`${(this._estimatedPopulation/1e6).toFixed(1)}M osób`:this._estimatedPopulation>=1e3?`${(this._estimatedPopulation/1e3).toFixed(1)}k osób`:`${this._estimatedPopulation} osób`:"Obliczanie..."},getFormattedBusinessText(){if(!this._businessMetrics)return"";const t=this._businessMetrics;return`${t.potentialClients} potencjalnych klientów | ${t.areaType}`},get currentSuggestions(){var t;return((t=window.WizardState)==null?void 0:t.get("location.addressSuggestions"))||[]},get selectedIndex(){var t;return((t=window.WizardState)==null?void 0:t.get("location.selectedSuggestionIndex"))||-1},get suggestionsVisible(){return this.currentSuggestions.length>0},updateRadius(t){window.WizardState.update("location.serviceRadius",t),this._localServiceRadius=t,this._localRadiusLabel=t+" km",this.radiusLabel=t+" km",this.updateDerivedState(),window.dispatchEvent(new CustomEvent("estimation-calculating")),this.syncWithLivewire("serviceRadius",t),this.$wire&&this.$wire.call("calculatePotentialClients"),this.updateMapRadius()},async searchAddress(t){var e;if(t.length<3){window.WizardState.update("location.addressSuggestions",[]),window.WizardState.update("location.selectedSuggestionIndex",-1);return}try{const i=new AbortController,s=setTimeout(()=>i.abort(),15e3),n=await fetch("/api/location/search",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((e=document.querySelector('meta[name="csrf-token"]'))==null?void 0:e.getAttribute("content"))||""},body:JSON.stringify({query:t+", Poland",limit:5}),signal:i.signal});if(clearTimeout(s),!n.ok){if(n.status===429){window.WizardState.update("location.addressSuggestions",[]),window.WizardState.update("location.selectedSuggestionIndex",-1);return}throw new Error(`HTTP ${n.status}: ${n.statusText}`)}const r=await n.json();if(!r.success)throw new Error(r.message||"API request failed");const a=(r.data||[]).map(l=>({display_name:this.formatPolishAddress(l.display_name,l),original_display_name:l.display_name,lat:parseFloat(l.lat),lon:parseFloat(l.lon),fullData:l}));window.WizardState.update("location.addressSuggestions",a),window.WizardState.update("location.selectedSuggestionIndex",-1)}catch(i){i.name==="AbortError"||i.message.includes("CONNECTION_TIMED_OUT"),window.WizardState.update("location.addressSuggestions",[]),window.WizardState.update("location.selectedSuggestionIndex",-1)}},selectAddress(t){const e=t.display_name;window.WizardState.update("location.address",e),window.WizardState.update("location.latitude",t.lat),window.WizardState.update("location.longitude",t.lon),window.WizardState.update("location.addressSuggestions",[]),window.WizardState.update("location.selectedSuggestionIndex",-1),this._localAddress=e,this.updateDerivedState(),this.syncWithLivewire("address",e)},updateAddress(t){window.WizardState.update("location.address",t),this._localAddress=t,this.updateDerivedState(),this.syncWithLivewire("address",t),this.debounceSearch(t)},debounceSearch(t){this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchAddress(t)},300)},debouncePopulationEstimate(t){},manualRefreshEstimation(){},handleKeydown(t){const e=this.currentSuggestions;if(e.length!==0)switch(t.key){case"ArrowDown":t.preventDefault();const i=this.selectedIndex<e.length-1?this.selectedIndex+1:0;window.WizardState.update("location.selectedSuggestionIndex",i);break;case"ArrowUp":t.preventDefault();const s=this.selectedIndex>0?this.selectedIndex-1:e.length-1;window.WizardState.update("location.selectedSuggestionIndex",s);break;case"Enter":t.preventDefault(),this.selectedIndex>=0&&e[this.selectedIndex]&&this.selectAddress(e[this.selectedIndex]);break;case"Escape":t.preventDefault(),window.WizardState.update("location.addressSuggestions",[]),window.WizardState.update("location.selectedSuggestionIndex",-1);break}},hideSuggestions(){setTimeout(()=>{window.WizardState.update("location.addressSuggestions",[]),window.WizardState.update("location.selectedSuggestionIndex",-1)},200)},updateDerivedState(){if(!window.WizardState)return;const t=this.currentAddress,e=this.serviceRadius,i=t.length>10&&e>0;window.WizardState.get("meta.currentStep")===5&&(window.WizardState.state.meta.canProceed=i,window.WizardState.state.meta.isValid=i)},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},isStepValid(){return this.currentAddress.length>10&&this.serviceRadius>0},getSuggestionClasses(t){return{"bg-emerald-50 border-emerald-200":t===this.selectedIndex,"bg-white border-gray-200":t!==this.selectedIndex,"hover:bg-gray-50":t!==this.selectedIndex}},getAddressInputClasses(){return{"border-emerald-500 bg-emerald-50":this.isStepValid(),"border-gray-300":!this.isStepValid()}},getStreetPrefix(t){if(!t)return"ul.";const e=t.toLowerCase();return e.includes("aleja")||e.includes("aleje")||e.includes("aleji")||e.includes("al.")||e.match(/^al\s/)||e.match(/\sal\s/)||e.includes("avenue")||e.includes("boulevard")?"al.":e.includes("plac")||e.includes("place")||e.includes("pl.")||e.match(/^pl\s/)?"pl.":e.includes("rondo")||e.includes("rond")?"rondo":e.includes("osiedle")||e.includes("os.")?"os.":"ul."},formatPolishAddress(t,e=null){if(!t)return"";if(e&&typeof e=="object"&&(e.road||e.postcode||e.town||e.city||e.village)){const s=[];if(e.road){let a=e.road;if(e.house_number){const l=this.cleanHouseNumber(e.house_number);l&&(a+=` ${l}`)}s.push(a)}let n=e.town||e.city||e.village;const r=e.suburb||e.neighbourhood||e.city_district;if(r&&this.isWarsawDistrict(r)&&(n="Warszawa"),n||(e.state&&e.state.toLowerCase().includes("mazowieckie")?n="Warszawa":e.suburb&&this.looksLikeCityName(e.suburb)?n=e.suburb:e.neighbourhood&&this.looksLikeCityName(e.neighbourhood)&&(n=e.neighbourhood)),e.postcode&&n){const a=`${e.postcode} ${n}`;s.push(a)}else n?s.push(n):e.postcode&&s.push(e.postcode);const o=[];if(e.municipality){let a=e.municipality.replace(/^gmina\s+/i,"").replace(/^Gmina\s+/i,"").trim();a&&n&&a.toLowerCase()!==n.toLowerCase()&&o.push(`gmina ${a}`)}if(e.county){let a=e.county.replace(/^powiat\s+/i,"").replace(/^Powiat\s+/i,"").trim();a&&n&&a.toLowerCase()!==n.toLowerCase()&&o.push(`powiat ${a}`)}if(o.length>0){const a=o.join(" / ");s.push(a)}if(s.length>0)return s.join(`
`)}return this.formatDisplayName(t)},formatDisplayName(t){if(!t)return"";const e=t.split(",").map(m=>m.trim());e.length>0&&(e[e.length-1].toLowerCase()==="poland"||e[e.length-1].toLowerCase()==="polska")&&e.pop();let i="",s="",n="",r="",o="";const a=/^\d{2}-\d{3}$/,l=/^\d+[a-zA-Z]?$/,c=/województwo\s+(.+)/i;for(const m of e)if(a.test(m))n=m;else if(c.test(m)){const p=m.match(c);p&&(o=p[1].trim())}else if(l.test(m)&&!s)s=m;else{if(m.toLowerCase().includes("gmina")||m.toLowerCase().includes("powiat")||m.toLowerCase().includes("osiedle"))continue;!i&&!a.test(m)&&!c.test(m)?m.length>1&&!l.test(m)&&(i=m):!r&&m.length>1&&!a.test(m)&&!c.test(m)&&!l.test(m)&&m!==i&&(r=m)}r&&this.isWarsawDistrict(r)&&(r="Warszawa");const d=[];let h="";for(const m of e)if(m.toLowerCase().includes("powiat")){h=m.replace("powiat ","").trim();break}if(i&&s){const m=this.getStreetPrefix(i);d.push(`${m} ${i} ${s}`)}else if(i){const m=this.getStreetPrefix(i);d.push(`${m} ${i}`)}return n&&r?d.push(`${n} ${r}`):r?d.push(r):n&&d.push(n),h&&d.push(`powiat ${h.toLowerCase()}`),o&&d.push(`woj. ${o.toLowerCase()}`),d.length===0?e.slice(0,3).filter(g=>g.length>0&&!g.toLowerCase().includes("gmina")&&!g.toLowerCase().includes("powiat")&&!g.toLowerCase().includes("osiedle")).join(`
`):d.join(`
`)},formatSuggestion(t){const e=this.formatPolishAddress(t.display_name);return e.length>60?e.substring(0,57)+"...":e},getLocationSummary(){return{address:this.currentAddress,serviceRadius:this.serviceRadius,radiusLabel:this.radiusLabel,hasCoordinates:!!(window.WizardState.get("location.latitude")&&window.WizardState.get("location.longitude")),isComplete:this.isStepValid()}},async initializeMap(){var e,i,s;if(!this.mapInitialized)try{await this.loadLeafletLibrary();const n=window.WizardState.get("location.latitude")||window.WizardState.get("location.coordinates.lat"),r=window.WizardState.get("location.longitude")||window.WizardState.get("location.coordinates.lng"),o=(e=this.$wire)==null?void 0:e.latitude,a=(i=this.$wire)==null?void 0:i.longitude,l=n||o,c=r||a;l&&c&&(!n||!r)&&(window.WizardState.update("location.latitude",l),window.WizardState.update("location.longitude",c));const d=(s=this.$wire)==null?void 0:s.address,h=window.WizardState.get("location.address");d&&!h&&window.WizardState.update("location.address",d);const w=l||52.2297,m=c||21.0122,p=!!(l&&c),g=this.calculateOptimalZoom(this.serviceRadius);this.map=L.map("wizard-step5-map",{doubleClickZoom:!1,touchZoom:!0,scrollWheelZoom:!0,dragging:!0}).setView([w,m],g),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors"}).addTo(this.map);const f=L.divIcon({className:"custom-div-icon",html:'<div style="background-color: #10b981; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.3);"></div>',iconSize:[20,20],iconAnchor:[10,10],popupAnchor:[0,-10]}),S=p?"<strong>Twoja lokalizacja</strong><br>"+this.currentAddress:"<strong>Domyślna lokalizacja</strong><br>Wprowadź adres aby zobaczyć mapę";this.userMarker=L.marker([w,m],{icon:f,draggable:!0}).addTo(this.map).bindPopup(S),this.userMarker.on("dragstart",_=>{_.target.closePopup()}),this.userMarker.on("drag",_=>{const b=_.target.getLatLng();this.radiusCircle&&this.map.removeLayer(this.radiusCircle),this.radiusCircle=L.circle([b.lat,b.lng],{radius:this.serviceRadius*1e3,fillColor:"#10b981",color:"#10b981",weight:2,opacity:.6,fillOpacity:.1}).addTo(this.map)}),this.userMarker.on("dragend",_=>{const b=_.target.getLatLng();window.WizardState.update("location.latitude",b.lat),window.WizardState.update("location.longitude",b.lng),this.addRadiusCircle(b.lat,b.lng),this.reverseGeocode(b.lat,b.lng),window.dispatchEvent(new CustomEvent("estimation-calculating")),this.syncWithLivewire("latitude",b.lat),this.syncWithLivewire("longitude",b.lng),this.$wire&&this.$wire.call("calculatePotentialClients")}),this.map.on("click",_=>{const b=_.latlng;this.userMarker.setLatLng(b),window.WizardState.update("location.latitude",b.lat),window.WizardState.update("location.longitude",b.lng),this.addRadiusCircle(b.lat,b.lng),this.reverseGeocode(b.lat,b.lng),window.dispatchEvent(new CustomEvent("estimation-calculating")),this.syncWithLivewire("latitude",b.lat),this.syncWithLivewire("longitude",b.lng),this.$wire&&this.$wire.call("calculatePotentialClients")}),this.addRadiusCircle(w,m),this.mapInitialized=!0}catch{}},calculateOptimalZoom(t){const e=document.getElementById("wizard-step5-map"),i=e?e.offsetWidth:600,s=.5,n=40075017,r=t*1e3*2/s,o=Math.log2(n*i/(r*256));return Math.max(6,Math.min(16,Math.round(o)))},addRadiusCircle(t,e){this.map&&(this.radiusCircle&&this.map.removeLayer(this.radiusCircle),this.radiusCircle=L.circle([t,e],{radius:this.serviceRadius*1e3,fillColor:"#10b981",color:"#10b981",weight:2,opacity:.6,fillOpacity:.1}).addTo(this.map))},updateRadiusCircle(){if(!this.map||!this.mapInitialized)return;const t=window.WizardState.get("location.latitude")||window.WizardState.get("location.coordinates.lat")||52.2297,e=window.WizardState.get("location.longitude")||window.WizardState.get("location.coordinates.lng")||21.0122;this.addRadiusCircle(t,e)},async loadLeafletLibrary(){return new Promise(t=>{if(window.L){t();return}if(!document.querySelector('link[href*="leaflet"]')){const i=document.createElement("link");i.rel="stylesheet",i.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(i)}const e=document.createElement("script");e.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",e.onload=()=>{t()},e.onerror=()=>{t()},document.head.appendChild(e)})},updateMapRadius(){if(this.updateRadiusCircle(),this.map&&this.mapInitialized){const t=this.calculateOptimalZoom(this.serviceRadius);this.map.setZoom(t)}},updateMapLocation(){if(!this.map||!this.mapInitialized){this.mapInitialized=!1,this.initializeMap();return}const t=window.WizardState.get("location.latitude")||window.WizardState.get("location.coordinates.lat"),e=window.WizardState.get("location.longitude")||window.WizardState.get("location.coordinates.lng");t&&e&&(this.map.panTo([t,e]),this.updateRadiusCircle())},async reverseGeocode(t,e){var i;try{await new Promise(l=>setTimeout(l,1e3));const s=new AbortController,n=setTimeout(()=>s.abort(),15e3),r=await fetch("/api/location/reverse",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({lat:t,lon:e}),signal:s.signal});if(clearTimeout(n),!r.ok){if(r.status===429)return;throw r.status===404?new Error("Endpoint /api/location/reverse nie istnieje (404)"):new Error(`HTTP ${r.status}: ${r.statusText}`)}const o=await r.json();if(!o.success)throw new Error(o.message||"Reverse geocoding API request failed");const a=o.data;if(a&&a.display_name){const l=a.display_name,c=this.formatPolishAddress(l,a);window.WizardState.update("location.lastReverseGeocodeData",a),window.WizardState.update("location.address",c),this._localAddress=c;const d={formatted_address:c,road:a.road||"",house_number:a.house_number||"",postcode:a.postcode||"",city:a.city||"",town:a.town||"",village:a.village||"",municipality:a.municipality||"",county:a.county||"",state:a.state||"",gus_city_name:a.gus_city_name||a.town||a.city||"",district:a.district||""};if(window.Livewire&&this.$wire)try{this.$wire.call("updateAddressStructured",d)}catch{this.syncWithLivewire("address",c)}this.userMarker&&this.userMarker.setPopupContent("<strong>Twoja lokalizacja</strong><br>"+c),this.$nextTick(()=>{this.$dispatch("address-updated",{address:c,addressData:d})})}}catch(s){s.name==="AbortError"||s.message.includes("CONNECTION_TIMED_OUT")}},async estimatePopulation(t,e,i){var s;try{let n="Warszawa";const r=(s=window.WizardState)==null?void 0:s.get("location.lastReverseGeocodeData");if(r){const d=r.city||r.town||r.suburb||r.city_district;d&&(this.isWarsawDistrict(d)?n="Warszawa":n=d)}if(!n||n==="Warszawa"){const d=this.currentAddress;if(d){const w=d.split(`
`).map(m=>m.trim()).find(m=>m.match(/^\d{2}-\d{3}\s+/));if(w){const m=w.match(/^\d{2}-\d{3}\s+(.+)$/);if(m){let p=m[1].trim();this.isWarsawDistrict(p)?n="Warszawa":n=p}}else{const p=d.split(/[,\n]/).map(f=>f.trim()).filter(f=>f.length>2&&!f.match(/^ul\./)&&!f.match(/^\d/)&&!f.match(/^\d{2}-\d{3}$/)&&!f.toLowerCase().includes("poland")&&!f.toLowerCase().includes("polska")&&!f.toLowerCase().includes("gmina")&&!f.toLowerCase().includes("powiat")&&!f.toLowerCase().includes("województwo")&&!f.toLowerCase().includes("osiedle"));let g=p.find(f=>f.toLowerCase().match(/ów$|ice$|owo$|awa$|burg$|grad$|usk$/)||f.toLowerCase().includes("nowy ")||f.toLowerCase().includes("stary "));!g&&p.length>0&&(g=p.reduce((f,S)=>S.length>f.length?S:f)),g&&(this.isWarsawDistrict(g)?n="Warszawa":n=g)}}window.WizardState.update("location.cityName",n)}n=this.improveAndValidateCityName(n);const o=await fetch("/api/location/estimate-population",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({city:n,radius:i,address:this.currentAddress,latitude:t,longitude:e})});if(!o.ok){const d=await o.json().catch(()=>({}));throw new Error(`HTTP ${o.status}: ${d.message||o.statusText}`)}const a=await o.json();if(!a.success)throw new Error(a.message||"API request failed");const l=a.data,c={population:l.estimated_population,areaKm2:l.area_km2||Math.PI*10*10,densityPerKm2:l.density_per_km2||Math.round(l.estimated_population/(Math.PI*10*10)),areaType:l.area_type||"obszar miejski",households:l.households||Math.round(l.estimated_population/2.3),petOwningHouseholds:l.pet_owners||Math.round(l.estimated_population/2.3*.38),potentialClients:l.potential_clients||Math.round(l.estimated_population/2.3*.38*.15),confidence:l.confidence||"średnia",aiGenerated:l.aiGenerated||!0,source:l.source||"ai_estimation",notes:l.notes||"Brak dodatkowych informacji"};return this._estimatedPopulation=l.estimated_population||l.population,this._businessMetrics=c,this.updatePopulationTexts(),c}catch{return this.estimatePopulationFallback(i)}},estimatePopulationFallback(t){const e=Math.PI*Math.pow(t,2),i=1200,s=Math.round(e*i),n=2.3,r=.38,o=Math.round(s/n),a=Math.round(o*r),l=Math.round(a*.15),c={population:s,areaKm2:Math.round(e*10)/10,densityPerKm2:i,areaType:"przedmieścia",households:o,petOwningHouseholds:a,potentialClients:l,confidence:"niska",aiGenerated:!1,source:"fallback_estimation",notes:"Estymacja fallback oparta na statystykach GUS"};return this._estimatedPopulation=s,this._businessMetrics=c,this.updatePopulationTexts(),c},destroy(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.populationTimeout&&clearTimeout(this.populationTimeout),this.map&&(this.map.remove(),this.map=null,this.mapInitialized=!1)},improveAndValidateCityName(t){if(!t||t==="Warszawa")return"Warszawa";let e=t.trim();if(e=e.replace(/^(gmina|powiat|województwo|woj\.)\s+/gi,""),e=e.replace(/\s*\([^)]*\)\s*$/,""),e=e.replace(/\s+(municipality|county|district)$/gi,""),e=e.replace(/\s+/g," ").trim(),this.isValidPolishCityName(e))return e;const i=this.extractCityFromComplexName(t);return i&&this.isValidPolishCityName(i)?i:"Warszawa"},isValidPolishCityName(t){if(!t||t.length<2||t.length>50||/[0-9@#$%^&*()_+=\[\]{}|\\:";'<>?,./]/.test(t))return!1;const e=[/^\d{2}-\d{3}$/,/^(ul\.|al\.|pl\.|os\.)/i,/^(north|south|east|west)/i,/^(poland|polska)$/i,/^[0-9\-\s]+$/];for(const s of e)if(s.test(t))return!1;const i=[/-?ów$|-?owa$|-?owo$/i,/-?ice$|-?icy$/i,/-?awa$|-?ew$|-?yn$|-?in$/i,/^(nowy|nowa|stary|stara)\s/i,/[aąeęiłnśóuwyząę]/i];for(const s of i)if(s.test(t))return!0;return t.split(" ").length<=3},extractCityFromComplexName(t){const e=t.split(/[,\-\(\)\/]/).map(s=>s.trim()).filter(s=>s.length>2);for(const s of e){const n=s.replace(/^(ul\.|al\.|pl\.|os\.)\s*/i,"").trim();if(n&&this.isValidPolishCityName(n))return n}const i=t.split(/\s+/).filter(s=>s.length>3).filter(s=>!/^(ul|al|pl|os|nr|dom|mieszkanie)$/i.test(s));for(const s of i)if(this.isValidPolishCityName(s))return s;return null},looksLikeCityName(t){if(!t||t.length<3)return!1;const e=[/^\d/,/[0-9]{3,}/,/^(ul\.|al\.|pl\.|os\.)/i];for(const i of e)if(i.test(t))return!1;return!0},isWarsawDistrict(t){if(!t)return!1;const e=t.toLowerCase().replace(/\s+/g," ").replace(/-/g," ").trim(),i=["bemowo","białołęka","bialoleka","bielany","mokotów","mokotow","ochota","praga południe","praga poludnie","praga północ","praga polnoc","rembertów","rembertow","śródmieście","srodmiescie","targówek","targowek","ursus","ursynów","ursynow","wawer","wesoła","wesola","wilanów","wilanow","włochy","wlochy","wola","żoliborz","zoliborz"],s=["powiśle","powisle","powiśle solec","powisle solec","saska kępa","saska kepa","kabaty","grochów","grochow","marymont","żerań","zeran","tarchomin","muranów","muranow","stara ochota","rakowiec","koło","kolo","sadyba","służewiec","sluzewiec","gocław","goclaw","kamionek","sielce","filtry","czerniaków","czerniakow","natolin","stegny","czyste","mirów","mirow","wierzbno","jelonki","salomea","skorosze","okęcie","okecie","bródno","brodno","zacisze","pelcowizna","prądnik","pradnik"];if(i.includes(e)||s.includes(e)||["praga-południe","praga-poludnie","praga-północ","praga-polnoc","powiśle-solec","powisle-solec"].includes(e.replace(/\s+/g,"-")))return!0;for(const r of[...i,...s])if(e.includes(r)&&r.length>3)return!0;return!1},guessCityFromPostcode(t){if(!t)return"Warszawa";const e={"00":"Warszawa","01":"Warszawa","02":"Warszawa","03":"Warszawa","04":"Warszawa","05":"Warszawa",80:"Gdańsk",81:"Gdynia",30:"Kraków",31:"Kraków",50:"Wrocław",60:"Poznań",90:"Łódź",40:"Katowice"},i=t.substring(0,2);return e[i]||"Warszawa"},cleanHouseNumber(t){if(!t)return null;const e=t.toString().trim();return/^[0-9]+[a-zA-Z]?(\s*[\/\-]\s*[0-9]+[a-zA-Z]?)?$/.test(e)?e:null}}}typeof M<"u"&&M.exports&&(M.exports=hs);typeof window<"u"&&(window.wizardStep3=hs,window.wizardStep3.manualRefreshEstimation=function(){const t=document.querySelector('[x-data*="wizardStep3"]');if(t&&t._x_dataStack){const e=t._x_dataStack[0];e&&typeof e.manualRefreshEstimation=="function"&&e.manualRefreshEstimation()}});function ps(){return{_reactiveUpdate:0,showHintsPanel:!1,init(){if(window.WizardState)try{this.initializeStateIfNeeded(),this.$nextTick(()=>{})}catch{}},forceReactiveUpdate(){this._reactiveUpdate++},initializeStateIfNeeded(){var s,n;const t=window.WizardState.get("availability.weeklyAvailability");if(!t||Object.keys(t).length===0){const r={monday:{enabled:!1,start:"09:00",end:"17:00"},tuesday:{enabled:!1,start:"09:00",end:"17:00"},wednesday:{enabled:!1,start:"09:00",end:"17:00"},thursday:{enabled:!1,start:"09:00",end:"17:00"},friday:{enabled:!1,start:"09:00",end:"17:00"},saturday:{enabled:!1,start:"10:00",end:"16:00"},sunday:{enabled:!1,start:"10:00",end:"16:00"}};window.WizardState.update("availability.weeklyAvailability",r)}const e=(s=window.WizardState)==null?void 0:s.get("availability.flexibleSchedule"),i=(n=window.WizardState)==null?void 0:n.get("availability.emergencyAvailable");e==null&&window.WizardState.update("availability.flexibleSchedule",!1),i==null&&window.WizardState.update("availability.emergencyAvailable",!1)},get weeklyAvailability(){try{return window.WizardState?window.WizardState.get("availability.weeklyAvailability")||{}:{}}catch{return{}}},get flexibleSchedule(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("availability.flexibleSchedule"))||!1},get emergencyAvailable(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("availability.emergencyAvailable"))||!1},get enabledDaysCount(){return this._reactiveUpdate,Object.values(this.weeklyAvailability).filter(t=>t.enabled).length},get hasGarden(){var t;return((t=window.WizardState)==null?void 0:t.get("home.hasGarden"))||!1},get isSmoking(){var t;return((t=window.WizardState)==null?void 0:t.get("home.isSmoking"))||!1},get homeType(){var t;return((t=window.WizardState)==null?void 0:t.get("home.homeType"))||""},isDayEnabled(t){var e;try{this._reactiveUpdate;const i=this.weeklyAvailability;return!i||typeof i!="object"?!1:((e=i[t])==null?void 0:e.enabled)||!1}catch{return!1}},toggleDay(t){const e={...this.weeklyAvailability};e[t]?e[t]={...e[t],enabled:!e[t].enabled}:e[t]={enabled:!0,start:t==="saturday"||t==="sunday"?"10:00":"09:00",end:t==="saturday"||t==="sunday"?"16:00":"17:00"},window.WizardState.update("availability.weeklyAvailability",e),this.syncWithLivewire("weeklyAvailability",e),this.forceReactiveUpdate()},getDayTime(t,e){var i;return((i=this.weeklyAvailability[t])==null?void 0:i[e])||(e==="start"?"09:00":"17:00")},updateTime(t,e,i){const s={...this.weeklyAvailability};s[t]||(s[t]={enabled:!0,start:"09:00",end:"17:00"});const n={...s[t],[e]:i};if(n.start>=n.end){if(e==="start"){const r=new Date(`2000-01-01T${i}`);r.setHours(r.getHours()+1),n.end=r.toTimeString().slice(0,5)}else if(e==="end"){const r=new Date(`2000-01-01T${i}`);r.setHours(r.getHours()-1),n.start=r.toTimeString().slice(0,5)}}s[t]=n,window.WizardState.update("availability.weeklyAvailability",s),this.syncWithLivewire("weeklyAvailability",s)},toggleFlexible(){const t=!this.flexibleSchedule;window.WizardState.update("availability.flexibleSchedule",t),this.syncWithLivewire("flexibleSchedule",t),this.forceReactiveUpdate()},toggleEmergency(){const t=!this.emergencyAvailable;window.WizardState.update("availability.emergencyAvailable",t),this.syncWithLivewire("emergencyAvailable",t),this.forceReactiveUpdate()},toggleHintsPanel(){this.showHintsPanel=!this.showHintsPanel},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},getDayClasses(t){return{"border-emerald-500 bg-emerald-50":this.isDayEnabled(t),"border-gray-200":!this.isDayEnabled(t)}},getFlexibleClasses(){return this._reactiveUpdate,{"border-emerald-500 bg-emerald-50":this.flexibleSchedule,"border-gray-200":!this.flexibleSchedule}},getEmergencyClasses(){return this._reactiveUpdate,{"border-red-500 bg-red-50":this.emergencyAvailable,"border-gray-200":!this.emergencyAvailable}},isStepValid(){return this.enabledDaysCount>0},updateStepValidation(){if(window.WizardState.get("meta.currentStep")===6){const e=this.isStepValid();window.WizardState.state.meta.canProceed=e,window.WizardState.state.meta.isValid=e}},applyScheduleTemplate(t){const i={full_time:{schedule:{monday:{enabled:!0,start:"09:00",end:"17:00"},tuesday:{enabled:!0,start:"09:00",end:"17:00"},wednesday:{enabled:!0,start:"09:00",end:"17:00"},thursday:{enabled:!0,start:"09:00",end:"17:00"},friday:{enabled:!0,start:"09:00",end:"17:00"},saturday:{enabled:!1,start:"10:00",end:"16:00"},sunday:{enabled:!1,start:"10:00",end:"16:00"}},flexible:!1},part_time:{schedule:{monday:{enabled:!0,start:"10:00",end:"14:00"},tuesday:{enabled:!1,start:"10:00",end:"14:00"},wednesday:{enabled:!0,start:"10:00",end:"14:00"},thursday:{enabled:!1,start:"10:00",end:"14:00"},friday:{enabled:!0,start:"10:00",end:"14:00"},saturday:{enabled:!1,start:"10:00",end:"16:00"},sunday:{enabled:!1,start:"10:00",end:"16:00"}},flexible:!1},weekends:{schedule:{monday:{enabled:!1,start:"09:00",end:"17:00"},tuesday:{enabled:!1,start:"09:00",end:"17:00"},wednesday:{enabled:!1,start:"09:00",end:"17:00"},thursday:{enabled:!1,start:"09:00",end:"17:00"},friday:{enabled:!1,start:"09:00",end:"17:00"},saturday:{enabled:!0,start:"10:00",end:"16:00"},sunday:{enabled:!0,start:"10:00",end:"16:00"}},flexible:!1},morning:{schedule:{monday:{enabled:!0,start:"07:00",end:"12:00"},tuesday:{enabled:!0,start:"07:00",end:"12:00"},wednesday:{enabled:!0,start:"07:00",end:"12:00"},thursday:{enabled:!0,start:"07:00",end:"12:00"},friday:{enabled:!0,start:"07:00",end:"12:00"},saturday:{enabled:!0,start:"08:00",end:"12:00"},sunday:{enabled:!0,start:"08:00",end:"12:00"}},flexible:!1},evening:{schedule:{monday:{enabled:!0,start:"15:00",end:"20:00"},tuesday:{enabled:!0,start:"15:00",end:"20:00"},wednesday:{enabled:!0,start:"15:00",end:"20:00"},thursday:{enabled:!0,start:"15:00",end:"20:00"},friday:{enabled:!0,start:"15:00",end:"20:00"},saturday:{enabled:!0,start:"16:00",end:"20:00"},sunday:{enabled:!0,start:"16:00",end:"20:00"}},flexible:!1},night:{schedule:{monday:{enabled:!0,start:"20:00",end:"08:00"},tuesday:{enabled:!0,start:"20:00",end:"08:00"},wednesday:{enabled:!0,start:"20:00",end:"08:00"},thursday:{enabled:!0,start:"20:00",end:"08:00"},friday:{enabled:!0,start:"20:00",end:"08:00"},saturday:{enabled:!0,start:"20:00",end:"08:00"},sunday:{enabled:!0,start:"20:00",end:"08:00"}},flexible:!1,emergency:!0}}[t];i&&(window.WizardState.update("availability.weeklyAvailability",i.schedule),window.WizardState.update("availability.flexibleSchedule",i.flexible),i.emergency!==void 0&&window.WizardState.update("availability.emergencyAvailable",i.emergency),this.syncWithLivewire("weeklyAvailability",i.schedule),this.syncWithLivewire("flexibleSchedule",i.flexible),i.emergency!==void 0&&this.syncWithLivewire("emergencyAvailable",i.emergency),this.forceReactiveUpdate())},setWeekdaysOnly(){const t={monday:{enabled:!0,start:"09:00",end:"17:00"},tuesday:{enabled:!0,start:"09:00",end:"17:00"},wednesday:{enabled:!0,start:"09:00",end:"17:00"},thursday:{enabled:!0,start:"09:00",end:"17:00"},friday:{enabled:!0,start:"09:00",end:"17:00"},saturday:{enabled:!1,start:"10:00",end:"16:00"},sunday:{enabled:!1,start:"10:00",end:"16:00"}};window.WizardState.update("availability.weeklyAvailability",t),window.WizardState.update("availability.flexibleSchedule",!1),this.syncWithLivewire("weeklyAvailability",t),this.forceReactiveUpdate()},setFullWeek(){const t={monday:{enabled:!0,start:"09:00",end:"17:00"},tuesday:{enabled:!0,start:"09:00",end:"17:00"},wednesday:{enabled:!0,start:"09:00",end:"17:00"},thursday:{enabled:!0,start:"09:00",end:"17:00"},friday:{enabled:!0,start:"09:00",end:"17:00"},saturday:{enabled:!0,start:"09:00",end:"17:00"},sunday:{enabled:!0,start:"09:00",end:"17:00"}};window.WizardState.update("availability.weeklyAvailability",t),window.WizardState.update("availability.flexibleSchedule",!1),this.syncWithLivewire("weeklyAvailability",t),this.forceReactiveUpdate()},setWeekendsOnly(){const t={monday:{enabled:!1,start:"09:00",end:"17:00"},tuesday:{enabled:!1,start:"09:00",end:"17:00"},wednesday:{enabled:!1,start:"09:00",end:"17:00"},thursday:{enabled:!1,start:"09:00",end:"17:00"},friday:{enabled:!1,start:"09:00",end:"17:00"},saturday:{enabled:!0,start:"10:00",end:"16:00"},sunday:{enabled:!0,start:"10:00",end:"16:00"}};window.WizardState.update("availability.weeklyAvailability",t),window.WizardState.update("availability.flexibleSchedule",!1),this.syncWithLivewire("weeklyAvailability",t),this.forceReactiveUpdate()},setFlexibleSchedule(){const t={monday:{enabled:!0,start:"08:00",end:"20:00"},tuesday:{enabled:!0,start:"08:00",end:"20:00"},wednesday:{enabled:!0,start:"08:00",end:"20:00"},thursday:{enabled:!0,start:"08:00",end:"20:00"},friday:{enabled:!0,start:"08:00",end:"20:00"},saturday:{enabled:!0,start:"08:00",end:"20:00"},sunday:{enabled:!0,start:"08:00",end:"20:00"}};window.WizardState.update("availability.weeklyAvailability",t),window.WizardState.update("availability.flexibleSchedule",!0),this.syncWithLivewire("weeklyAvailability",t),this.syncWithLivewire("flexibleSchedule",!0),this.forceReactiveUpdate()},getEnabledDays(){return Object.entries(this.weeklyAvailability).filter(([t,e])=>e.enabled).map(([t,e])=>({day:t,...e}))},getAvailabilitySummary(){const t=this.getEnabledDays();return{totalDays:t.length,flexibleSchedule:this.flexibleSchedule,emergencyAvailable:this.emergencyAvailable,weekendAvailable:t.some(e=>e.day==="saturday"||e.day==="sunday")}}}}typeof M<"u"&&M.exports&&(M.exports=ps);if(typeof window<"u"){let t=function(){try{const e=document.querySelectorAll('[x-data*="wizardStep4"]');for(const i of e)if(i.offsetParent!==null&&i._x_dataStack&&i._x_dataStack.length>0){for(const n of i._x_dataStack)if(n&&typeof n.setWeekdaysOnly=="function")return n}return null}catch{return null}};var wl=t;window.wizardStep4=ps,window.setWeekdaysOnly=function(){const e=t();e&&e.setWeekdaysOnly()},window.setFullWeek=function(){const e=t();e&&e.setFullWeek()},window.setWeekendsOnly=function(){const e=t();e&&e.setWeekendsOnly()},window.setFlexibleSchedule=function(){const e=t();e&&e.setFlexibleSchedule()}}function fs(){return{_reactiveUpdate:0,get _hasOtherPets(){var t;return((t=window.WizardState)==null?void 0:t.get("home.hasOtherPets"))||!1},set _hasOtherPets(t){var e;(e=window.WizardState)==null||e.update("home.hasOtherPets",t)},get _homeType(){var t;return((t=window.WizardState)==null?void 0:t.get("home.homeType"))||""},set _homeType(t){var e;(e=window.WizardState)==null||e.update("home.homeType",t)},get _otherPets(){var t;return((t=window.WizardState)==null?void 0:t.get("home.otherPets"))||[]},set _otherPets(t){var e;(e=window.WizardState)==null||e.update("home.otherPets",t)},init(){window.WizardState&&(this.initializeStateIfNeeded(),this.syncLocalVariables())},forceReactiveUpdate(){this._reactiveUpdate++},syncLocalVariables(){},initializeStateIfNeeded(){this.homeType||window.WizardState.update("home.homeType",""),this.hasGarden===void 0&&window.WizardState.update("home.hasGarden",!1),this.isSmoking===void 0&&window.WizardState.update("home.isSmoking",!1),this.hasOtherPets===void 0&&window.WizardState.update("home.hasOtherPets",!1),Array.isArray(this.otherPets)||window.WizardState.update("home.otherPets",[])},get homeType(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("home.homeType"))||""},get hasGarden(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("home.hasGarden"))||!1},get isSmoking(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("home.isSmoking"))||!1},get hasOtherPets(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("home.hasOtherPets"))||!1},get otherPets(){var t;return this._reactiveUpdate,((t=window.WizardState)==null?void 0:t.get("home.otherPets"))||[]},get flexibleSchedule(){var t;return((t=window.WizardState)==null?void 0:t.get("availability.flexibleSchedule"))||!1},get emergencyAvailable(){var t;return((t=window.WizardState)==null?void 0:t.get("availability.emergencyAvailable"))||!1},selectHomeType(t){window.WizardState.update("home.homeType",t),this.syncWithLivewire("homeType",t),this.forceReactiveUpdate()},toggleGarden(){const e=!this.hasGarden;window.WizardState.update("home.hasGarden",e),this.syncWithLivewire("hasGarden",e),this.forceReactiveUpdate()},toggleSmoking(){const e=!this.isSmoking;window.WizardState.update("home.isSmoking",e),this.syncWithLivewire("isSmoking",e),this.forceReactiveUpdate()},toggleOtherPets(){const t=!this.hasOtherPets;window.WizardState.update("home.hasOtherPets",t),this.syncWithLivewire("hasOtherPets",t),t||(window.WizardState.update("home.otherPets",[]),this.syncWithLivewire("otherPets",[])),this.forceReactiveUpdate()},togglePet(t){const e=[...this.otherPets],i=e.indexOf(t);i>-1?e.splice(i,1):e.push(t),window.WizardState.update("home.otherPets",e),this.syncWithLivewire("otherPets",e),this.forceReactiveUpdate()},isPetSelected(t){return this._reactiveUpdate,this.otherPets.includes(t)},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},isStepValid(){return this.homeType!==""},updateStepValidation(){if(window.WizardState.get("meta.currentStep")===7){const e=this.isStepValid();window.WizardState.state.meta.canProceed=e,window.WizardState.state.meta.isValid=e}},getHomeSummary(){return{homeType:this.homeType,hasGarden:this.hasGarden,isSmoking:this.isSmoking,hasOtherPets:this.hasOtherPets,otherPetsCount:this.otherPets.length,otherPetTypes:this.otherPets,smokeFree:!this.isSmoking,petFriendly:this.hasOtherPets}},getHomeTypeLabel(){return{apartment:"Mieszkanie",house:"Dom jednorodzinny",studio:"Kawalerka/Studio",townhouse:"Dom szeregowy"}[this.homeType]||this.homeType},getHomeFeatures(){const t=[];return this.hasGarden&&t.push("Ogród/balkon"),this.isSmoking||t.push("Środowisko bez dymu"),this.hasOtherPets&&t.push(`Inne zwierzęta (${this.otherPets.length})`),t}}}typeof M<"u"&&M.exports&&(M.exports=fs);typeof window<"u"&&(window.wizardStep5=fs);function ms(){return{init(){window.WizardState&&(this.initializeStateIfNeeded(),this.setupLivewireSync())},initializeStateIfNeeded(){var i;const t=((i=this.$wire)==null?void 0:i.motivation)||"";!window.WizardState.get("personalData.motivation")&&t&&window.WizardState.update("personalData.motivation",t),this.updateDerivedState()},setupLivewireSync(){document.addEventListener("ai-suggestion-applied",t=>{if(t.detail.field==="motivation"){this.syncFromLivewire();const e=document.getElementById("motivation");e&&e.value!==this.motivation&&(e.value=this.motivation,e.dispatchEvent(new Event("input",{bubbles:!0})))}})},get motivation(){var t;return((t=window.WizardState)==null?void 0:t.get("personalData.motivation"))||""},get characterCount(){return this.motivation.length},get isValid(){return this.characterCount>=50},get hasStartedTyping(){return this.characterCount>0},get progressPercentage(){return Math.min(this.characterCount/50*100,100)},updateMotivation(t){var e;(e=window.WizardState)==null||e.update("personalData.motivation",t),this.updateDerivedState(),this.updateLivewire("motivation",t),this.$nextTick(()=>{const i=document.getElementById("motivation");i&&(i.value=t,i.dispatchEvent(new Event("input",{bubbles:!0})),i.focus())})},updateDerivedState(){if(!window.WizardState)return;const e=this.motivation.length,i=e>=50,s=e>0;window.WizardState.update("personalData.motivationLength",e),window.WizardState.update("personalData.hasStartedTyping",s),window.WizardState.get("meta.currentStep")===1&&(window.WizardState.state.meta.canProceed=i,window.WizardState.state.meta.isValid=i)},updateLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},syncFromLivewire(){if(window.Livewire&&this.$wire)try{const t=this.$wire.motivation||"",e=this.motivation;t!==e&&(window.WizardState.update("personalData.motivation",t),this.updateDerivedState(),this.$nextTick(()=>{const i=document.getElementById("motivation");i&&(i.value=t,i.dispatchEvent(new Event("input",{bubbles:!0})))}))}catch{}},getTextareaClasses(){return{"border-emerald-500 bg-emerald-50":this.isValid&&this.hasStartedTyping,"border-red-300 bg-red-50":this.hasStartedTyping&&!this.isValid&&this.characterCount>0,"border-gray-300":!this.hasStartedTyping}},getProgressClasses(){return{"text-emerald-600":this.isValid,"text-red-500":this.hasStartedTyping&&!this.isValid&&this.characterCount>0,"text-gray-400":!this.hasStartedTyping||this.characterCount===0}},getProgressBarStyle(){return`width: ${this.progressPercentage}%`},getProgressBarClasses(){return{"bg-gradient-to-r from-emerald-400 to-emerald-600":this.characterCount>=50,"bg-gradient-to-r from-blue-400 to-blue-600":this.characterCount<50&&this.characterCount>0,"bg-gray-300":this.characterCount===0}},getValidationClasses(){return{"text-emerald-600":this.isValid,"text-gray-500":!this.isValid}},getCheckIconClasses(){return{"text-emerald-500":this.isValid,"text-gray-400":!this.isValid}},getValidationMessage(){return this.isValid?"Minimalne wymagania spełnione ✓":"Minimalne 50 znaków wymagane"}}}typeof M<"u"&&M.exports&&(M.exports=ms);typeof window<"u"&&(window.wizardStep6=ms);function gs(){return{_petExperience:[],_yearsOfExperience:"",_experienceDescription:"",_characterCount:0,init(){window.WizardState&&(this.initializeStateIfNeeded(),this.setupLivewireSync())},initializeStateIfNeeded(){var s,n,r;const t=((s=this.$wire)==null?void 0:s.petExperience)||[],e=((n=this.$wire)==null?void 0:n.yearsOfExperience)||"",i=((r=this.$wire)==null?void 0:r.experienceDescription)||"";if(!Array.isArray(this.petExperience)&&Array.isArray(t)&&window.WizardState.update("experience.petExperience",t),!this.yearsOfExperience&&e){const o=parseInt(e,10)||0;window.WizardState.update("experience.yearsOfExperience",o)}!this.experienceDescription&&i&&window.WizardState.update("experience.experienceDescription",i),Array.isArray(this.petExperience)||window.WizardState.update("experience.petExperience",[]),this.updateDerivedState()},setupLivewireSync(){document.addEventListener("ai-suggestion-applied",t=>{t.detail.field==="experienceDescription"&&this.syncFromLivewire()})},get petExperience(){var e;const t=((e=window.WizardState)==null?void 0:e.get("experience.petExperience"))||[];return this._petExperience=t,t},get yearsOfExperience(){var e;const t=((e=window.WizardState)==null?void 0:e.get("experience.yearsOfExperience"))||"";return this._yearsOfExperience=t,t},get experienceDescription(){var e;const t=((e=window.WizardState)==null?void 0:e.get("experience.experienceDescription"))||"";return this._experienceDescription=t,t},get characterCount(){return this.experienceDescription.length},get isDescriptionValid(){return this.characterCount>=100},get progressPercentage(){return Math.min(this.characterCount/100*100,100)},get hasStartedTyping(){return this.characterCount>0},get descriptionProgress(){return Math.min(this.characterCount/100*100,100)},togglePetExperience(t){const e=[...this.petExperience],i=e.indexOf(t);i>-1?e.splice(i,1):e.push(t),window.WizardState.update("experience.petExperience",e),this._petExperience=[...e],this.syncWithLivewire("petExperience",e)},forceUIUpdate(t){this.$nextTick(()=>{const e=document.querySelector(`label[data-experience="${t}"]`);e&&(this.isPetExperienceSelected(t)?e.classList.add("selected"):e.classList.remove("selected"))})},isPetExperienceSelected(t){return this.petExperience.includes(t)},updateYearsOfExperience(t){const e=parseInt(t,10)||0;window.WizardState.update("experience.yearsOfExperience",e),this.syncWithLivewire("yearsOfExperience",e)},updateExperienceDescription(t){window.WizardState.update("experience.experienceDescription",t),this.updateDerivedState(),this.syncWithLivewire("experienceDescription",t)},updateDerivedState(){if(!window.WizardState)return;const e=this.experienceDescription.length,i=e>=100&&this.petExperience.length>0,s=e>0;window.WizardState.update("experience.characterCount",e),window.WizardState.update("experience.hasStartedTyping",s),window.WizardState.get("meta.currentStep")===2&&(window.WizardState.state.meta.canProceed=i,window.WizardState.state.meta.isValid=i)},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},syncFromLivewire(){if(window.Livewire&&this.$wire)try{const t=this.$wire.experienceDescription||"",e=this.experienceDescription;t!==e&&(window.WizardState.update("experience.experienceDescription",t),this.updateDerivedState(),this.$nextTick(()=>{const i=document.getElementById("experienceDescription");i&&(i.value=t,i.dispatchEvent(new Event("input",{bubbles:!0})))}))}catch{}},isStepValid(){return this.petExperience.length>0&&this.isDescriptionValid},getTextareaClasses(){return{"border-emerald-500 bg-emerald-50":this.isDescriptionValid&&this.hasStartedTyping,"border-red-300 bg-red-50":this.hasStartedTyping&&!this.isDescriptionValid&&this.characterCount>0,"border-gray-300":!this.hasStartedTyping}},getProgressClasses(){return{"text-emerald-600":this.isDescriptionValid,"text-red-500":this.hasStartedTyping&&!this.isDescriptionValid&&this.characterCount>0,"text-gray-400":!this.hasStartedTyping||this.characterCount===0}},getProgressBarStyle(){return`width: ${this.descriptionProgress}%`},getValidationMessage(){return this.petExperience.length===0?"Wybierz przynajmniej jeden typ doświadczenia":this.isDescriptionValid?"Wymagania spełnione ✓":`Opisz swoje doświadczenie (${this.characterCount}/100)`},getExperienceSummary(){return{experienceTypes:this.petExperience,experienceTypesCount:this.petExperience.length,yearsOfExperience:this.yearsOfExperience,descriptionLength:this.characterCount,isDescriptionValid:this.isDescriptionValid,isComplete:this.isStepValid()}},getExperienceTypeLabels(){const t={own_pets:"Własne zwierzęta",family_pets:"Zwierzęta rodziny/przyjaciół",volunteering:"Wolontariat w schronisku",professional:"Praca zawodowa",training:"Kursy/szkolenia",veterinary:"Doświadczenie weterynaryjne"};return this.petExperience.map(e=>t[e]||e)}}}typeof M<"u"&&M.exports&&(M.exports=gs);typeof window<"u"&&(window.wizardStep7=gs);function ws(){return{_reactiveUpdate:0,_eventListenerRegistered:!1,profilePhoto:null,homePhotos:[],hasProfilePhoto:!1,hasHomePhotos:!1,homePhotosCount:0,canAddMoreHomePhotos:!0,maxHomePhotos:5,uploadingHomePhotos:!1,uploadProgress:"",init(){window.WizardState&&(this.initializeStateIfNeeded(),this._eventListenerRegistered||(this._eventListenerRegistered=!0,this.$wire.on("photo-uploaded",e=>{const i=Array.isArray(e)&&e.length>0?e[0]:e;if(i&&i.type==="profile"&&i.data)window.WizardState.update("photos.profilePhoto",i.data),this.profilePhoto=i.data,this.hasProfilePhoto=!0;else if(i&&i.type==="home"&&i.data){const s=[...this.homePhotos];s.push(i.data),window.WizardState.update("photos.homePhotos",s),this.homePhotos=s,this.homePhotosCount=s.length,this.hasHomePhotos=!0,this.canAddMoreHomePhotos=s.length<this.maxHomePhotos}})),this.syncCache())},syncCache(){var t,e;this.profilePhoto=((t=window.WizardState)==null?void 0:t.get("photos.profilePhoto"))||null,this.homePhotos=((e=window.WizardState)==null?void 0:e.get("photos.homePhotos"))||[],this.hasProfilePhoto=!!this.profilePhoto,this.hasHomePhotos=this.homePhotos.length>0,this.homePhotosCount=this.homePhotos.length,this.canAddMoreHomePhotos=this.homePhotosCount<this.maxHomePhotos},initializeStateIfNeeded(){var i,s;const t=((i=this.$wire)==null?void 0:i.profilePhoto)||null,e=((s=this.$wire)==null?void 0:s.homePhotos)||[];t?window.WizardState.update("photos.profilePhoto",t):this.profilePhoto||window.WizardState.update("photos.profilePhoto",null),Array.isArray(e)&&e.length>0?window.WizardState.update("photos.homePhotos",e):Array.isArray(this.homePhotos)||window.WizardState.update("photos.homePhotos",[]),this.updateDerivedState()},async removeProfilePhoto(){await this.$wire.removeProfilePhoto(),window.WizardState.update("photos.profilePhoto",null),this.profilePhoto=null,this.hasProfilePhoto=!1,this.updateDerivedState()},async removeHomePhoto(t){await this.$wire.removeHomePhoto(t);const e=[...this.homePhotos];t>=0&&t<e.length&&(e.splice(t,1),window.WizardState.update("photos.homePhotos",e),this.homePhotos=e,this.homePhotosCount=e.length,this.hasHomePhotos=e.length>0,this.canAddMoreHomePhotos=e.length<this.maxHomePhotos,this.updateDerivedState())},updateDerivedState(){if(!window.WizardState)return;this.hasProfilePhoto||this.hasHomePhotos;const t=this.hasProfilePhoto;window.WizardState.get("meta.currentStep")===8&&(window.WizardState.state.meta.canProceed=t,window.WizardState.state.meta.isValid=t)},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},async handleHomePhotosUpload(t){const e=Array.from(t.target.files);if(e.length===0)return;const i=this.maxHomePhotos-this.homePhotosCount;if(i<=0){alert("Osiągnięto maksymalną liczbę zdjęć domu (5).");return}const s=e.slice(0,i);s.length<e.length&&alert(`Można dodać jeszcze ${i} zdjęć. Wybrano pierwsze ${s.length} plików.`),this.uploadingHomePhotos=!0;let n=0;try{for(const r of s)this.uploadProgress=`${n+1}/${s.length}`,await this.$wire.upload("tempHomePhoto",r,()=>{}),await new Promise(o=>setTimeout(o,500)),n++;t.target.value=""}catch{alert(`Błąd podczas przesyłania zdjęć. Przesłano ${n} z ${s.length} plików.`)}finally{this.uploadingHomePhotos=!1,this.uploadProgress=""}},isStepValid(){return this.hasProfilePhoto},getUploadAreaClasses(t=!1){return{"border-emerald-500 bg-emerald-50":t,"border-gray-300 border-dashed hover:border-gray-400":!t}},formatFileSize(t){if(t===0)return"0 Bytes";const e=1024,i=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+i[s]},getPhotosSummary(){return{hasProfilePhoto:this.hasProfilePhoto,homePhotosCount:this.homePhotosCount,canAddMoreHomePhotos:this.canAddMoreHomePhotos,maxHomePhotos:this.maxHomePhotos,isComplete:this.isStepValid()}}}}typeof M<"u"&&M.exports&&(M.exports=ws);typeof window<"u"&&(window.wizardStep8=ws);function ys(){return{_reactiveUpdate:0,_eventListenerRegistered:!1,identityDocument:null,hasCriminalRecordDeclaration:!1,references:[],hasIdentityDocument:!1,hasReferences:!1,referencesCount:0,canAddMoreReferences:!0,maxReferences:3,init(){window.WizardState&&(this.initializeStateIfNeeded(),this._eventListenerRegistered||(this._eventListenerRegistered=!0,this.$wire.on("document-uploaded",e=>{const i=Array.isArray(e)&&e.length>0?e[0]:e;i&&i.type==="identity"&&i.data&&(window.WizardState.update("verification.identityDocument",i.data),this.identityDocument=i.data,this.hasIdentityDocument=!0)})),this.syncCache(),this.$watch("$wire.hasCriminalRecordDeclaration",e=>{this.hasCriminalRecordDeclaration=e,window.WizardState.update("verification.hasCriminalRecordDeclaration",e),this.updateDerivedState()}))},syncCache(){var t,e,i;this.identityDocument=((t=window.WizardState)==null?void 0:t.get("verification.identityDocument"))||null,this.hasCriminalRecordDeclaration=((e=window.WizardState)==null?void 0:e.get("verification.hasCriminalRecordDeclaration"))||!1,this.references=((i=window.WizardState)==null?void 0:i.get("verification.references"))||[],this.hasIdentityDocument=!!this.identityDocument,this.hasReferences=this.references.length>0,this.referencesCount=this.references.length,this.canAddMoreReferences=this.referencesCount<this.maxReferences},initializeStateIfNeeded(){var s,n,r;const t=((s=this.$wire)==null?void 0:s.identityDocument)||null,e=((n=this.$wire)==null?void 0:n.hasCriminalRecordDeclaration)||!1,i=((r=this.$wire)==null?void 0:r.references)||[];t?window.WizardState.update("verification.identityDocument",t):this.identityDocument||window.WizardState.update("verification.identityDocument",null),window.WizardState.update("verification.hasCriminalRecordDeclaration",e),Array.isArray(i)&&i.length>0?window.WizardState.update("verification.references",i):Array.isArray(this.references)||window.WizardState.update("verification.references",[]),this.updateDerivedState()},async removeIdentityDocument(){await this.$wire.removeIdentityDocument(),window.WizardState.update("verification.identityDocument",null),this.identityDocument=null,this.hasIdentityDocument=!1,this.updateDerivedState()},addReference(){if(this.referencesCount>=this.maxReferences){alert(`Możesz dodać maksymalnie ${this.maxReferences} referencje.`);return}const t=[...this.references];t.push({name:"",phone:"",relation:""}),window.WizardState.update("verification.references",t),this.references=t,this.referencesCount=t.length,this.hasReferences=!0,this.canAddMoreReferences=t.length<this.maxReferences,this.updateDerivedState(),this.syncWithLivewire("references",t)},removeReference(t){const e=[...this.references];t>=0&&t<e.length&&(e.splice(t,1),window.WizardState.update("verification.references",e),this.references=e,this.referencesCount=e.length,this.hasReferences=e.length>0,this.canAddMoreReferences=e.length<this.maxReferences,this.updateDerivedState(),this.syncWithLivewire("references",e))},updateReference(t,e,i){const s=[...this.references];t>=0&&t<s.length&&(s[t][e]=i,window.WizardState.update("verification.references",s),this.references=s,this.syncWithLivewire("references",s))},updateDerivedState(){if(!window.WizardState)return;const e=this.hasIdentityDocument;window.WizardState.get("meta.currentStep")===9&&(window.WizardState.state.meta.canProceed=e,window.WizardState.state.meta.isValid=e)},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},formatFileSize(t){if(t===0)return"0 Bytes";const e=1024,i=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+i[s]},isStepValid(){return this.hasIdentityDocument},getStatusCardClasses(t){return{"border-green-500 bg-green-50":t,"border-gray-200":!t}},getVerificationSummary(){return{hasIdentityDocument:this.hasIdentityDocument,hasCriminalRecordDeclaration:this.hasCriminalRecordDeclaration,referencesCount:this.referencesCount,hasReferences:this.hasReferences,isComplete:this.isStepValid()}}}}typeof M<"u"&&M.exports&&(M.exports=ys);typeof window<"u"&&(window.wizardStep9=ys);function bs(){return{_reactiveUpdate:0,_eventListenerRegistered:!1,pricingStrategy:"",servicePricing:{},showNotification:!1,notificationTitle:"",notificationMessage:"",notificationType:"success",init(){window.WizardState&&(this.initializeStateIfNeeded(),this.syncCache(),this.$wire.on("service-added",t=>{const e=Array.isArray(t)&&t.length>0?t[0]:t;e.success?(this.showToast("✅ Usługa dodana!","Usługa została pomyślnie dodana do Twojej oferty.","success"),this.syncCache()):this.showToast("ℹ️ Informacja",e.message||"Ta usługa jest już dodana.","info")}),this.$wire.on("service-types-updated",t=>{const e=Array.isArray(t)&&t.length>0?t[0]:t;e.serviceTypes&&(window.WizardState.update("services.serviceTypes",e.serviceTypes),this.syncCache(),this.$nextTick(()=>{this._reactiveUpdate++}))}))},syncCache(){var t,e;this.pricingStrategy=((t=window.WizardState)==null?void 0:t.get("pricing.pricingStrategy"))||"",this.servicePricing=((e=window.WizardState)==null?void 0:e.get("pricing.servicePricing"))||{}},initializeStateIfNeeded(){var s,n,r;const t=((s=this.$wire)==null?void 0:s.pricingStrategy)||"",e=((n=this.$wire)==null?void 0:n.servicePricing)||{},i=((r=this.$wire)==null?void 0:r.serviceTypes)||[];i&&i.length>0&&window.WizardState.update("services.serviceTypes",i),t?window.WizardState.update("pricing.pricingStrategy",t):this.pricingStrategy||window.WizardState.update("pricing.pricingStrategy","competitive"),e&&Object.keys(e).length>0?window.WizardState.update("pricing.servicePricing",e):(!this.servicePricing||Object.keys(this.servicePricing).length===0)&&window.WizardState.update("pricing.servicePricing",{}),this.updateDerivedState()},get priceMultiplier(){switch(this.pricingStrategy){case"budget":return .8;case"premium":return 1.3;default:return 1}},get pricingStrategies(){return{budget:{icon:"💡",title:"Budżetowa",desc:"Niższe ceny, więcej klientów"},competitive:{icon:"⚖️",title:"Konkurencyjna",desc:"Ceny na poziomie rynkowym"},premium:{icon:"💎",title:"Premium",desc:"Wyższe ceny, premium service"}}},get serviceDefinitions(){return{dog_walking:{title:"Spacer z psem (1h)",suggested:30,unit:"PLN/h",icon:"🐕"},pet_sitting:{title:"Opieka w domu właściciela",suggested:25,unit:"PLN/h",icon:"🏠"},pet_boarding:{title:"Opieka u opiekuna",suggested:80,unit:"PLN/noc",icon:"🏡"},overnight_care:{title:"Opieka nocna",suggested:120,unit:"PLN/noc",icon:"🌙"},pet_transport:{title:"Transport zwierząt",suggested:2,unit:"PLN/km",icon:"🚗"},vet_visits:{title:"Wizyta u weterynarza",suggested:50,unit:"PLN",icon:"⚕️"},grooming:{title:"Pielęgnacja",suggested:40,unit:"PLN",icon:"✂️"},feeding:{title:"Karmienie",suggested:20,unit:"PLN",icon:"🍽️"}}},get hasPricing(){return this.pricingStrategy&&Object.keys(this.servicePricing).length>0},get estimatedMonthlyEarnings(){var n;this._reactiveUpdate;const t=((n=window.WizardState)==null?void 0:n.get("services.serviceTypes"))||[];let e={},i=0;const s={dog_walking:{hours:24,label:"Spacery"},pet_sitting:{hours:8,label:"Opieka w domu"},pet_boarding:{nights:4,label:"Opieka u opiekuna"},overnight_care:{nights:3,label:"Opieka nocna"},pet_transport:{trips:8,kmPerTrip:10,label:"Transport"},vet_visits:{visits:2,label:"Wizyty u wet."},grooming:{visits:3,label:"Pielęgnacja"},feeding:{visits:8,label:"Karmienie"}};return t.forEach(r=>{const o=parseFloat(this.servicePricing[r])||0,a=s[r];if(o>0&&a){let l=0;a.hours?l=o*a.hours:a.nights?l=o*a.nights:a.trips&&a.kmPerTrip?l=o*a.trips*a.kmPerTrip:a.visits&&(l=o*a.visits),l>0&&(e[r]={amount:l,label:a.label,details:a},i+=l)}}),{earnings:e,total:i,hasEarnings:i>0}},updatePricingStrategy(t){const e=this.pricingStrategy,i=this.priceMultiplier;window.WizardState.update("pricing.pricingStrategy",t),this.pricingStrategy=t;const s=this.priceMultiplier;if(e&&i!==s){const n={};Object.entries(this.servicePricing).forEach(([r,o])=>{var l;const a=((l=this.serviceDefinitions[r])==null?void 0:l.suggested)||o/i;n[r]=Math.round(a*s)}),window.WizardState.update("pricing.servicePricing",n),this.servicePricing=n,this.$wire&&this.$wire.updateServicePricing(n)}this.updateDerivedState(),this.$wire&&this.$wire.updatePricingStrategy(t),this._reactiveUpdate++},updateServicePrice(t,e){const i={...this.servicePricing};e&&e>0?i[t]=parseFloat(e):delete i[t],window.WizardState.update("pricing.servicePricing",i),this.servicePricing=i,this.updateDerivedState(),this.$wire&&this.$wire.updateServicePricing(i),this._reactiveUpdate++},setRecommendedPrices(){const t={};Object.entries(this.serviceDefinitions).forEach(([e,i])=>{t[e]=Math.round(i.suggested*this.priceMultiplier)}),window.WizardState.update("pricing.servicePricing",t),this.servicePricing=t,this.updateDerivedState(),this.$wire&&this.$wire.updateServicePricing(t)},resetPricing(){window.WizardState.update("pricing.servicePricing",{}),this.servicePricing={},this.updateDerivedState(),this.$wire&&this.$wire.updateServicePricing({})},updateDerivedState(){if(!window.WizardState)return;const t=!!this.pricingStrategy,e=Object.keys(this.servicePricing).length>0,i=t&&e;window.WizardState.get("meta.currentStep")===10&&(window.WizardState.state.meta.canProceed=i,window.WizardState.state.meta.isValid=i)},syncWithLivewire(t,e){if(window.Livewire&&this.$wire)try{this.$wire.set(t,e,!1)}catch{}},isServiceSelected(t){var i;return this._reactiveUpdate,(((i=window.WizardState)==null?void 0:i.get("services.serviceTypes"))||[]).includes(t)},toggleServiceSelection(t){var s;const e=((s=window.WizardState)==null?void 0:s.get("services.serviceTypes"))||[];if(e.includes(t)){const n=e.filter(o=>o!==t);window.WizardState.update("services.serviceTypes",n);const r={...this.servicePricing};delete r[t],window.WizardState.update("pricing.servicePricing",r),this.servicePricing=r,this.$wire&&(this.$wire.set("serviceTypes",n,!1),this.$wire.updateServicePricing(r))}else{const n=[...e,t];window.WizardState.update("services.serviceTypes",n);const r=this.getSuggestedPrice(t),o={...this.servicePricing,[t]:r};window.WizardState.update("pricing.servicePricing",o),this.servicePricing=o,this.$wire&&(this.$wire.set("serviceTypes",n,!1),this.$wire.updateServicePricing(o))}this.syncCache(),this.updateDerivedState(),this._reactiveUpdate++},getActiveServicesCount(){var e;return this._reactiveUpdate,(((e=window.WizardState)==null?void 0:e.get("services.serviceTypes"))||[]).length},async quickAddService(t){var e;try{const i=((e=window.WizardState)==null?void 0:e.get("services.serviceTypes"))||[];if(i.includes(t))return;const s=[...i,t];window.WizardState.update("services.serviceTypes",s);const n=this.getSuggestedPrice(t),r={...this.servicePricing,[t]:n};window.WizardState.update("pricing.servicePricing",r),this.servicePricing=r,this.$wire.quickAddService(t),this.$wire&&(this.$wire.set("serviceTypes",s,!1),this.$wire.updateServicePricing(r)),this.syncCache(),this.updateDerivedState(),this._reactiveUpdate++}catch{}},isStepValid(){return this.pricingStrategy&&Object.keys(this.servicePricing).length>0},getStrategyCardClasses(t){return{"border-purple-500 bg-purple-50":this.pricingStrategy===t,"border-gray-200 hover:bg-gray-50":this.pricingStrategy!==t}},getSuggestedPrice(t){const e=this.serviceDefinitions[t];return e?Math.round(e.suggested*this.priceMultiplier):0},getServicePrice(t){return this.servicePricing[t]||this.getSuggestedPrice(t)},formatPriceWithUnit(t,e){return!t||t<=0?`- ${e}`:`${t} ${e}`},isStrategySelected(t){return this.pricingStrategy===t},getStrategyInfo(t){return this.pricingStrategies[t]||{}},getCompetitiveAnalysis(){return{dog_walking:{min:25,max:45,avg:35},pet_sitting:{min:20,max:35,avg:28},overnight_care:{min:100,max:150,avg:120},pet_transport:{min:1.5,max:3,avg:2}}},getPricingSummary(){return{strategy:this.pricingStrategy,strategyInfo:this.getStrategyInfo(this.pricingStrategy),servicesCount:Object.keys(this.servicePricing).length,totalServices:Object.keys(this.serviceDefinitions).length,averagePrice:this.calculateAveragePrice(),estimatedEarnings:this.estimatedMonthlyEarnings,isComplete:this.isStepValid()}},calculateAveragePrice(){const e=["dog_walking","pet_sitting"].map(i=>parseFloat(this.servicePricing[i])||0).filter(i=>i>0);return e.length===0?0:Math.round(e.reduce((i,s)=>i+s,0)/e.length)},isPricingComplete(){return["dog_walking","pet_sitting"].every(e=>this.servicePricing[e]&&parseFloat(this.servicePricing[e])>0)},getPricingStatusMessage(){if(!this.pricingStrategy)return"Wybierz strategię cenową";const t=Object.keys(this.servicePricing).length;return t===0?"Dodaj ceny za swoje usługi":this.isPricingComplete()?"Cennik jest kompletny":`Dodano ${t} cen`},showToast(t,e,i="success"){window.Alpine&&window.Alpine.store&&window.Alpine.store("toast")?window.Alpine.store("toast").show(t,e,i):this.$wire&&this.$wire.dispatch("notify",{title:t,message:e,type:i})},getSuggestedServices(){var n;this._reactiveUpdate;const t=((n=window.WizardState)==null?void 0:n.get("services.serviceTypes"))||[],e={dog_walking:{hours:24,label:"Spacery z psem"},pet_sitting:{hours:8,label:"Opieka w domu właściciela"},pet_boarding:{nights:4,label:"Opieka u opiekuna"},overnight_care:{nights:3,label:"Opieka nocna"},pet_transport:{trips:8,kmPerTrip:10,label:"Transport zwierząt"},vet_visits:{visits:2,label:"Wizyty u weterynarza"},grooming:{visits:3,label:"Pielęgnacja"},feeding:{visits:8,label:"Karmienie"}},i={dog_walking:30,pet_sitting:25,pet_boarding:80,overnight_care:120,pet_transport:2,vet_visits:50,grooming:40,feeding:20},s=[];return Object.entries(e).forEach(([r,o])=>{if(!t.includes(r)){const a=i[r],l=Math.round(a*this.priceMultiplier);let c=0;o.hours?c=l*o.hours:o.nights?c=l*o.nights:o.trips&&o.kmPerTrip?c=l*o.trips*o.kmPerTrip:o.visits&&(c=l*o.visits),c>0&&s.push({serviceKey:r,label:o.label,details:o,potentialEarning:c,suggestedPrice:l})}}),s.sort((r,o)=>o.potentialEarning-r.potentialEarning),s.slice(0,3)}}}typeof M<"u"&&M.exports&&(M.exports=bs);typeof window<"u"&&(window.wizardStep10=bs);class Or{constructor(){this.isEnabled=this.checkIfEnabled(),this.isEnabled&&this.init()}checkIfEnabled(){return window.location.search.includes("debug=true")}init(){this.setupConsoleCommands(),this.createDebugPanel(),this.setupErrorTracking(),this.setupPerformanceMonitoring(),this.logInitialization()}setupConsoleCommands(){window.WizardDebug={showState:()=>{if(window.WizardState)return window.WizardState.state},showHistory:()=>{var e;if((e=window.WizardState)!=null&&e.changeHistory)return window.WizardState.changeHistory},resetState:()=>{var e;confirm("⚠️ Czy na pewno chcesz zresetować stan wizard'a?")&&((e=window.WizardState)==null||e.reset())},fillTestData:()=>{if(!window.WizardState)return;const e={"personalData.name":"Jan Testowy","personalData.email":"jan.testowy@pethelp.test","personalData.city":"Warszawa","personalData.motivation":"Cześć! Nazywam się Jan Testowy i od dziecka kocham zwierzęta. Zależy mi na zapewnieniu najlepszej opieki dla pupili. Mam wieloletnie doświadczenie w opiece nad psami i kotami różnych ras. Potrafię rozpoznać potrzeby zwierząt i dostosować opiekę do ich charakteru.","experience.petExperience":"high","experience.experienceDescription":"Opiekowałem się psami i kotami przez ostatnie 5 lat.","experience.yearsOfExperience":5,"experience.animalTypes":["dogs","cats"],"experience.animalSizes":["small","medium","large"],"services.serviceTypes":["walking","overnight","daycare"],"services.specialServices":["grooming","training"],"location.address":"Warszawa, Mokotów","location.serviceRadius":15,"availability.flexibleSchedule":!0,"availability.emergencyAvailable":!0,"availability.morningAvailable":!0,"availability.weekendAvailable":!0,"home.homeType":"house","home.hasGarden":!0,"home.isSmoking":!1,"home.hasOtherPets":!0,"home.isSafeEnvironment":!0,"verification.hasProfilePhoto":!0,"verification.homePhotosCount":3,"verification.hasIdentityDocument":!0,"verification.hasCriminalRecord":!1,"verification.referencesCount":2,"pricing.pricingStrategy":"competitive","pricing.servicePricing.dogWalking":25,"pricing.servicePricing.overnightSitting":80,"pricing.servicePricing.daySitting":50};let i=0;Object.entries(e).forEach(([s,n])=>{try{window.WizardState.update(s,n),i++}catch{}}),this.showState()},goToStep:e=>{var i;!e||e<1||e>12||(i=window.WizardState)==null||i.update("meta.currentStep",e)},validateStep:e=>{var n,r;if(!window.WizardState)return;const i=e||window.WizardState.get("meta.currentStep"),s=(n=window.validateWizardStep)==null?void 0:n.call(window,i);if(s){const o=s.isValid?"✅ VALID":"❌ INVALID";((r=s.errors)==null?void 0:r.length)>0}return s},validateAllSteps:()=>{var i;const e=[];for(let s=1;s<=12;s++){const n=this.validateStep(s);e.push({step:s,valid:(n==null?void 0:n.isValid)||!1,errors:((i=n==null?void 0:n.errors)==null?void 0:i.length)||0})}return e},simulateFullFlow:async()=>{this.fillTestData();for(let e=1;e<=12;e++){this.goToStep(e),await new Promise(s=>setTimeout(s,500));const i=this.validateStep(e)}},showRecentErrors:()=>{const e=this.getRecentErrors();return e.length===0||e.forEach((i,s)=>{i.stack}),e},showPerformanceMetrics:()=>this.getPerformanceMetrics(),help:()=>{}},Object.keys(window.WizardDebug).forEach(e=>{typeof window.WizardDebug[e]=="function"&&(window.WizardDebug[e]=window.WizardDebug[e].bind(this))})}createDebugPanel(){if(document.getElementById("wizard-debug-panel"))return;const e=document.createElement("div");e.id="wizard-debug-panel",e.innerHTML=`
            <div class="fixed bottom-4 right-4 bg-gray-900 text-white p-4 rounded-lg shadow-2xl z-50 max-w-xs" style="font-size: 12px;">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-bold text-sm">🧙‍♂️ Debug Tools</h3>
                    <button onclick="this.parentElement.parentElement.style.display='none'" class="text-gray-400 hover:text-white">✕</button>
                </div>

                <div class="space-y-2">
                    <button onclick="WizardDebug.showState()" class="w-full px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs">Show State</button>
                    <button onclick="WizardDebug.fillTestData()" class="w-full px-2 py-1 bg-green-600 hover:bg-green-700 rounded text-xs">Fill Test Data</button>
                    <button onclick="WizardDebug.validateAllSteps()" class="w-full px-2 py-1 bg-purple-600 hover:bg-purple-700 rounded text-xs">Validate All</button>
                    <button onclick="WizardDebug.showRecentErrors()" class="w-full px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-xs">Show Errors</button>
                    <button onclick="WizardDebug.resetState()" class="w-full px-2 py-1 bg-yellow-600 hover:bg-yellow-700 rounded text-xs">Reset State</button>
                </div>

                <div class="mt-3 pt-3 border-t border-gray-700">
                    <div class="text-xs text-gray-400">
                        Current Step: <span id="debug-current-step">-</span><br>
                        State Updates: <span id="debug-update-count">0</span><br>
                        JS Errors: <span id="debug-error-count">0</span>
                    </div>
                </div>

                <div class="mt-2 text-xs text-gray-500">
                    Press F12 → Console → type "WizardDebug.help()"
                </div>
            </div>
        `,document.body.appendChild(e),this.updateDebugPanel(),setInterval(()=>this.updateDebugPanel(),1e3)}updateDebugPanel(){var n,r;const e=document.getElementById("debug-current-step"),i=document.getElementById("debug-update-count"),s=document.getElementById("debug-error-count");e&&window.WizardState&&(e.textContent=window.WizardState.get("meta.currentStep")||"-"),i&&window.WizardState&&(i.textContent=((n=window.WizardState.changeHistory)==null?void 0:n.length)||0),s&&(s.textContent=((r=this.errorLog)==null?void 0:r.length)||0)}setupErrorTracking(){this.errorLog=[],window.addEventListener("error",e=>{var i;this.logError({type:"javascript_error",message:e.message,filename:e.filename,line:e.lineno,column:e.colno,stack:(i=e.error)==null?void 0:i.stack,timestamp:Date.now(),url:window.location.href})}),window.addEventListener("unhandledrejection",e=>{var i,s;this.logError({type:"promise_rejection",message:((i=e.reason)==null?void 0:i.message)||e.reason,stack:(s=e.reason)==null?void 0:s.stack,timestamp:Date.now(),url:window.location.href})}),document.addEventListener("alpine:init",()=>{Alpine.bind("x-error",()=>({"@alpine:error":e=>{this.logError({type:"alpine_error",message:e.detail.message,expression:e.detail.expression,timestamp:Date.now(),url:window.location.href})}}))})}logError(e){this.errorLog.push(e),this.errorLog.length>100&&this.errorLog.shift()}getRecentErrors(){const e=Date.now()-3e5;return this.errorLog.filter(i=>i.timestamp>e)}setupPerformanceMonitoring(){this.performanceMetrics={stateUpdates:[],stepLoadTimes:{},renderTimes:[]},window.WizardState&&window.WizardState.watch((e,i,s)=>{const n={path:e,timestamp:Date.now(),processingTime:performance.now()};this.performanceMetrics.stateUpdates.push(n),this.performanceMetrics.stateUpdates.length>50&&this.performanceMetrics.stateUpdates.shift()})}getPerformanceMetrics(){const e=this.performanceMetrics.stateUpdates,i=e.length>0?e.reduce((s,n)=>s+n.processingTime,0)/e.length:0;return{totalStateUpdates:e.length,averageUpdateTime:Math.round(i*100)/100,slowestUpdate:e.length>0?Math.max(...e.map(s=>s.processingTime)):0,recentErrors:this.getRecentErrors().length,memoryUsage:performance.memory?{used:Math.round(performance.memory.usedJSHeapSize/1024/1024),total:Math.round(performance.memory.totalJSHeapSize/1024/1024)}:"N/A"}}logInitialization(){}}typeof window<"u"&&document.addEventListener("DOMContentLoaded",()=>{new Or});const Dt={},Ss=[];function x(t,e){if(Array.isArray(t)){for(const i of t)x(i,e);return}if(typeof t=="object"){for(const i in t)x(i,t[i]);return}vs(Object.getOwnPropertyNames(e)),Dt[t]=Object.assign(Dt[t]||{},e)}function q(t){return Dt[t]||{}}function Wr(){return[...new Set(Ss)]}function vs(t){Ss.push(...t)}function Kt(t,e){let i;const s=t.length,n=[];for(i=0;i<s;i++)n.push(e(t[i]));return n}function Rr(t,e){let i;const s=t.length,n=[];for(i=0;i<s;i++)e(t[i])&&n.push(t[i]);return n}function zt(t){return t%360*Math.PI/180}function Fr(t){return t.replace(/([A-Z])/g,function(e,i){return"-"+i.toLowerCase()})}function zs(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Pe(t,e,i,s){return(e==null||i==null)&&(s=s||t.bbox(),e==null?e=s.width/s.height*i:i==null&&(i=s.height/s.width*e)),{width:e,height:i}}function It(t,e){const i=t.origin;let s=t.ox!=null?t.ox:t.originX!=null?t.originX:"center",n=t.oy!=null?t.oy:t.originY!=null?t.originY:"center";i!=null&&([s,n]=Array.isArray(i)?i:typeof i=="object"?[i.x,i.y]:[i,i]);const r=typeof s=="string",o=typeof n=="string";if(r||o){const{height:a,width:l,x:c,y:d}=e.bbox();r&&(s=s.includes("left")?c:s.includes("right")?c+l:c+l/2),o&&(n=n.includes("top")?d:n.includes("bottom")?d+a:d+a/2)}return[s,n]}const $r=new Set(["desc","metadata","title"]),Ot=t=>$r.has(t.nodeName),xs=(t,e,i={})=>{const s={...e};for(const n in s)s[n].valueOf()===i[n]&&delete s[n];Object.keys(s).length?t.node.setAttribute("data-svgjs",JSON.stringify(s)):(t.node.removeAttribute("data-svgjs"),t.node.removeAttribute("svgjs:data"))},Xt="http://www.w3.org/2000/svg",jr="http://www.w3.org/1999/xhtml",xt="http://www.w3.org/2000/xmlns/",qe="http://www.w3.org/1999/xlink",E={window:typeof window>"u"?null:window,document:typeof document>"u"?null:document};function Nr(){return E.window}class Yt{}const pe={},Jt="___SYMBOL___ROOT___";function Re(t,e=Xt){return E.document.createElementNS(e,t)}function B(t,e=!1){if(t instanceof Yt)return t;if(typeof t=="object")return kt(t);if(t==null)return new pe[Jt];if(typeof t=="string"&&t.trim().charAt(0)!=="<")return kt(E.document.querySelector(t));const i=e?E.document.createElement("div"):Re("svg");return i.innerHTML=t.trim(),t=kt(i.firstElementChild),i.removeChild(i.firstElementChild),t}function D(t,e){return e&&(e instanceof E.window.Node||e.ownerDocument&&e instanceof e.ownerDocument.defaultView.Node)?e:Re(t)}function X(t){if(!t)return null;if(t.instance instanceof Yt)return t.instance;if(t.nodeName==="#document-fragment")return new pe.Fragment(t);let e=zs(t.nodeName||"Dom");return e==="LinearGradient"||e==="RadialGradient"?e="Gradient":pe[e]||(e="Dom"),new pe[e](t)}let kt=X;function A(t,e=t.name,i=!1){return pe[e]=t,i&&(pe[Jt]=t),vs(Object.getOwnPropertyNames(t.prototype)),t}function Br(t){return pe[t]}let Vr=1e3;function ks(t){return"Svgjs"+zs(t)+Vr++}function Es(t){for(let e=t.children.length-1;e>=0;e--)Es(t.children[e]);return t.id&&(t.id=ks(t.nodeName)),t}function k(t,e){let i,s;for(t=Array.isArray(t)?t:[t],s=t.length-1;s>=0;s--)for(i in e)t[s].prototype[i]=e[i]}function C(t){return function(...e){const i=e[e.length-1];return i&&i.constructor===Object&&!(i instanceof Array)?t.apply(this,e.slice(0,-1)).attr(i):t.apply(this,e)}}function Ur(){return this.parent().children()}function qr(){return this.parent().index(this)}function Hr(){return this.siblings()[this.position()+1]}function Gr(){return this.siblings()[this.position()-1]}function Kr(){const t=this.position();return this.parent().add(this.remove(),t+1),this}function Xr(){const t=this.position();return this.parent().add(this.remove(),t?t-1:0),this}function Yr(){return this.parent().add(this.remove()),this}function Jr(){return this.parent().add(this.remove(),0),this}function Zr(t){t=B(t),t.remove();const e=this.position();return this.parent().add(t,e),this}function Qr(t){t=B(t),t.remove();const e=this.position();return this.parent().add(t,e+1),this}function eo(t){return t=B(t),t.before(this),this}function to(t){return t=B(t),t.after(this),this}x("Dom",{siblings:Ur,position:qr,next:Hr,prev:Gr,forward:Kr,backward:Xr,front:Yr,back:Jr,before:Zr,after:Qr,insertBefore:eo,insertAfter:to});const As=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,io=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,so=/rgb\((\d+),(\d+),(\d+)\)/,no=/(#[a-z_][a-z0-9\-_]*)/i,ro=/\)\s*,?\s*/,oo=/\s/g,Ii=/^#[a-f0-9]{3}$|^#[a-f0-9]{6}$/i,Oi=/^rgb\(/,Wi=/^(\s+)?$/,Ri=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ao=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,te=/[\s,]+/,Zt=/[MLHVCSQTAZ]/i;function lo(){const t=this.attr("class");return t==null?[]:t.trim().split(te)}function co(t){return this.classes().indexOf(t)!==-1}function uo(t){if(!this.hasClass(t)){const e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this}function ho(t){return this.hasClass(t)&&this.attr("class",this.classes().filter(function(e){return e!==t}).join(" ")),this}function po(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}x("Dom",{classes:lo,hasClass:co,addClass:uo,removeClass:ho,toggleClass:po});function fo(t,e){const i={};if(arguments.length===0)return this.node.style.cssText.split(/\s*;\s*/).filter(function(s){return!!s.length}).forEach(function(s){const n=s.split(/\s*:\s*/);i[n[0]]=n[1]}),i;if(arguments.length<2){if(Array.isArray(t)){for(const s of t){const n=s;i[s]=this.node.style.getPropertyValue(n)}return i}if(typeof t=="string")return this.node.style.getPropertyValue(t);if(typeof t=="object")for(const s in t)this.node.style.setProperty(s,t[s]==null||Wi.test(t[s])?"":t[s])}return arguments.length===2&&this.node.style.setProperty(t,e==null||Wi.test(e)?"":e),this}function mo(){return this.css("display","")}function go(){return this.css("display","none")}function wo(){return this.css("display")!=="none"}x("Dom",{css:fo,show:mo,hide:go,visible:wo});function yo(t,e,i){if(t==null)return this.data(Kt(Rr(this.node.attributes,s=>s.nodeName.indexOf("data-")===0),s=>s.nodeName.slice(5)));if(t instanceof Array){const s={};for(const n of t)s[n]=this.data(n);return s}else if(typeof t=="object")for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch{return this.attr("data-"+t)}else this.attr("data-"+t,e===null?null:i===!0||typeof e=="string"||typeof e=="number"?e:JSON.stringify(e));return this}x("Dom",{data:yo});function bo(t,e){if(typeof arguments[0]=="object")for(const i in t)this.remember(i,t[i]);else{if(arguments.length===1)return this.memory()[t];this.memory()[t]=e}return this}function So(){if(arguments.length===0)this._memory={};else for(let t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this}function vo(){return this._memory=this._memory||{}}x("Dom",{remember:bo,forget:So,memory:vo});function zo(t){return t.length===4?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function xo(t){const e=Math.round(t),s=Math.max(0,Math.min(255,e)).toString(16);return s.length===1?"0"+s:s}function be(t,e){for(let i=e.length;i--;)if(t[e[i]]==null)return!1;return!0}function ko(t,e){const i=be(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,_d:0,space:"rgb"}:be(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:be(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:be(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:be(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:be(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return i.space=e||i.space,i}function Eo(t){return t==="lab"||t==="xyz"||t==="lch"}function Et(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}class T{constructor(...e){this.init(...e)}static isColor(e){return e&&(e instanceof T||this.isRgb(e)||this.test(e))}static isRgb(e){return e&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"}static random(e="vibrant",i){const{random:s,round:n,sin:r,PI:o}=Math;if(e==="vibrant"){const a=24*s()+57,l=38*s()+45,c=360*s();return new T(a,l,c,"lch")}else if(e==="sine"){i=i??s();const a=n(80*r(2*o*i/.5+.01)+150),l=n(50*r(2*o*i/.5+4.6)+200),c=n(100*r(2*o*i/.5+2.3)+150);return new T(a,l,c)}else if(e==="pastel"){const a=8*s()+86,l=17*s()+9,c=360*s();return new T(a,l,c,"lch")}else if(e==="dark"){const a=10+10*s(),l=50*s()+86,c=360*s();return new T(a,l,c,"lch")}else if(e==="rgb"){const a=255*s(),l=255*s(),c=255*s();return new T(a,l,c)}else if(e==="lab"){const a=100*s(),l=256*s()-128,c=256*s()-128;return new T(a,l,c,"lab")}else if(e==="grey"){const a=255*s();return new T(a,a,a)}else throw new Error("Unsupported random color mode")}static test(e){return typeof e=="string"&&(Ii.test(e)||Oi.test(e))}cmyk(){const{_a:e,_b:i,_c:s}=this.rgb(),[n,r,o]=[e,i,s].map(w=>w/255),a=Math.min(1-n,1-r,1-o);if(a===1)return new T(0,0,0,1,"cmyk");const l=(1-n-a)/(1-a),c=(1-r-a)/(1-a),d=(1-o-a)/(1-a);return new T(l,c,d,a,"cmyk")}hsl(){const{_a:e,_b:i,_c:s}=this.rgb(),[n,r,o]=[e,i,s].map(g=>g/255),a=Math.max(n,r,o),l=Math.min(n,r,o),c=(a+l)/2,d=a===l,h=a-l,w=d?0:c>.5?h/(2-a-l):h/(a+l),m=d?0:a===n?((r-o)/h+(r<o?6:0))/6:a===r?((o-n)/h+2)/6:a===o?((n-r)/h+4)/6:0;return new T(360*m,100*w,100*c,"hsl")}init(e=0,i=0,s=0,n=0,r="rgb"){if(e=e||0,this.space)for(const h in this.space)delete this[this.space[h]];if(typeof e=="number")r=typeof n=="string"?n:r,n=typeof n=="string"?0:n,Object.assign(this,{_a:e,_b:i,_c:s,_d:n,space:r});else if(e instanceof Array)this.space=i||(typeof e[3]=="string"?e[3]:e[4])||"rgb",Object.assign(this,{_a:e[0],_b:e[1],_c:e[2],_d:e[3]||0});else if(e instanceof Object){const h=ko(e,i);Object.assign(this,h)}else if(typeof e=="string")if(Oi.test(e)){const h=e.replace(oo,""),[w,m,p]=so.exec(h).slice(1,4).map(g=>parseInt(g));Object.assign(this,{_a:w,_b:m,_c:p,_d:0,space:"rgb"})}else if(Ii.test(e)){const h=g=>parseInt(g,16),[,w,m,p]=io.exec(zo(e)).map(h);Object.assign(this,{_a:w,_b:m,_c:p,_d:0,space:"rgb"})}else throw Error("Unsupported string format, can't construct Color");const{_a:o,_b:a,_c:l,_d:c}=this,d=this.space==="rgb"?{r:o,g:a,b:l}:this.space==="xyz"?{x:o,y:a,z:l}:this.space==="hsl"?{h:o,s:a,l}:this.space==="lab"?{l:o,a,b:l}:this.space==="lch"?{l:o,c:a,h:l}:this.space==="cmyk"?{c:o,m:a,y:l,k:c}:{};Object.assign(this,d)}lab(){const{x:e,y:i,z:s}=this.xyz(),n=116*i-16,r=500*(e-i),o=200*(i-s);return new T(n,r,o,"lab")}lch(){const{l:e,a:i,b:s}=this.lab(),n=Math.sqrt(i**2+s**2);let r=180*Math.atan2(s,i)/Math.PI;return r<0&&(r*=-1,r=360-r),new T(e,n,r,"lch")}rgb(){if(this.space==="rgb")return this;if(Eo(this.space)){let{x:e,y:i,z:s}=this;if(this.space==="lab"||this.space==="lch"){let{l:m,a:p,b:g}=this;if(this.space==="lch"){const{c:N,h:F}=this,ie=Math.PI/180;p=N*Math.cos(ie*F),g=N*Math.sin(ie*F)}const f=(m+16)/116,S=p/500+f,_=f-g/200,b=16/116,I=.008856,R=7.787;e=.95047*(S**3>I?S**3:(S-b)/R),i=1*(f**3>I?f**3:(f-b)/R),s=1.08883*(_**3>I?_**3:(_-b)/R)}const n=e*3.2406+i*-1.5372+s*-.4986,r=e*-.9689+i*1.8758+s*.0415,o=e*.0557+i*-.204+s*1.057,a=Math.pow,l=.0031308,c=n>l?1.055*a(n,1/2.4)-.055:12.92*n,d=r>l?1.055*a(r,1/2.4)-.055:12.92*r,h=o>l?1.055*a(o,1/2.4)-.055:12.92*o;return new T(255*c,255*d,255*h)}else if(this.space==="hsl"){let{h:e,s:i,l:s}=this;if(e/=360,i/=100,s/=100,i===0)return s*=255,new T(s,s,s);const n=s<.5?s*(1+i):s+i-s*i,r=2*s-n,o=255*Et(r,n,e+1/3),a=255*Et(r,n,e),l=255*Et(r,n,e-1/3);return new T(o,a,l)}else if(this.space==="cmyk"){const{c:e,m:i,y:s,k:n}=this,r=255*(1-Math.min(1,e*(1-n)+n)),o=255*(1-Math.min(1,i*(1-n)+n)),a=255*(1-Math.min(1,s*(1-n)+n));return new T(r,o,a)}else return this}toArray(){const{_a:e,_b:i,_c:s,_d:n,space:r}=this;return[e,i,s,n,r]}toHex(){const[e,i,s]=this._clamped().map(xo);return`#${e}${i}${s}`}toRgb(){const[e,i,s]=this._clamped();return`rgb(${e},${i},${s})`}toString(){return this.toHex()}xyz(){const{_a:e,_b:i,_c:s}=this.rgb(),[n,r,o]=[e,i,s].map(S=>S/255),a=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,l=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,c=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,d=(a*.4124+l*.3576+c*.1805)/.95047,h=(a*.2126+l*.7152+c*.0722)/1,w=(a*.0193+l*.1192+c*.9505)/1.08883,m=d>.008856?Math.pow(d,1/3):7.787*d+16/116,p=h>.008856?Math.pow(h,1/3):7.787*h+16/116,g=w>.008856?Math.pow(w,1/3):7.787*w+16/116;return new T(m,p,g,"xyz")}_clamped(){const{_a:e,_b:i,_c:s}=this.rgb(),{max:n,min:r,round:o}=Math,a=l=>n(0,r(o(l),255));return[e,i,s].map(a)}}class O{constructor(...e){this.init(...e)}clone(){return new O(this)}init(e,i){const s={x:0,y:0},n=Array.isArray(e)?{x:e[0],y:e[1]}:typeof e=="object"?{x:e.x,y:e.y}:{x:e,y:i};return this.x=n.x==null?s.x:n.x,this.y=n.y==null?s.y:n.y,this}toArray(){return[this.x,this.y]}transform(e){return this.clone().transformO(e)}transformO(e){y.isMatrixLike(e)||(e=new y(e));const{x:i,y:s}=this;return this.x=e.a*i+e.c*s+e.e,this.y=e.b*i+e.d*s+e.f,this}}function Ao(t,e){return new O(t,e).transformO(this.screenCTM().inverseO())}function Se(t,e,i){return Math.abs(e-t)<1e-6}class y{constructor(...e){this.init(...e)}static formatTransforms(e){const i=e.flip==="both"||e.flip===!0,s=e.flip&&(i||e.flip==="x")?-1:1,n=e.flip&&(i||e.flip==="y")?-1:1,r=e.skew&&e.skew.length?e.skew[0]:isFinite(e.skew)?e.skew:isFinite(e.skewX)?e.skewX:0,o=e.skew&&e.skew.length?e.skew[1]:isFinite(e.skew)?e.skew:isFinite(e.skewY)?e.skewY:0,a=e.scale&&e.scale.length?e.scale[0]*s:isFinite(e.scale)?e.scale*s:isFinite(e.scaleX)?e.scaleX*s:s,l=e.scale&&e.scale.length?e.scale[1]*n:isFinite(e.scale)?e.scale*n:isFinite(e.scaleY)?e.scaleY*n:n,c=e.shear||0,d=e.rotate||e.theta||0,h=new O(e.origin||e.around||e.ox||e.originX,e.oy||e.originY),w=h.x,m=h.y,p=new O(e.position||e.px||e.positionX||NaN,e.py||e.positionY||NaN),g=p.x,f=p.y,S=new O(e.translate||e.tx||e.translateX,e.ty||e.translateY),_=S.x,b=S.y,I=new O(e.relative||e.rx||e.relativeX,e.ry||e.relativeY),R=I.x,N=I.y;return{scaleX:a,scaleY:l,skewX:r,skewY:o,shear:c,theta:d,rx:R,ry:N,tx:_,ty:b,ox:w,oy:m,px:g,py:f}}static fromArray(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}static isMatrixLike(e){return e.a!=null||e.b!=null||e.c!=null||e.d!=null||e.e!=null||e.f!=null}static matrixMultiply(e,i,s){const n=e.a*i.a+e.c*i.b,r=e.b*i.a+e.d*i.b,o=e.a*i.c+e.c*i.d,a=e.b*i.c+e.d*i.d,l=e.e+e.a*i.e+e.c*i.f,c=e.f+e.b*i.e+e.d*i.f;return s.a=n,s.b=r,s.c=o,s.d=a,s.e=l,s.f=c,s}around(e,i,s){return this.clone().aroundO(e,i,s)}aroundO(e,i,s){const n=e||0,r=i||0;return this.translateO(-n,-r).lmultiplyO(s).translateO(n,r)}clone(){return new y(this)}decompose(e=0,i=0){const s=this.a,n=this.b,r=this.c,o=this.d,a=this.e,l=this.f,c=s*o-n*r,d=c>0?1:-1,h=d*Math.sqrt(s*s+n*n),w=Math.atan2(d*n,d*s),m=180/Math.PI*w,p=Math.cos(w),g=Math.sin(w),f=(s*r+n*o)/c,S=r*h/(f*s-n)||o*h/(f*n+s),_=a-e+e*p*h+i*(f*p*h-g*S),b=l-i+e*g*h+i*(f*g*h+p*S);return{scaleX:h,scaleY:S,shear:f,rotate:m,translateX:_,translateY:b,originX:e,originY:i,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}equals(e){if(e===this)return!0;const i=new y(e);return Se(this.a,i.a)&&Se(this.b,i.b)&&Se(this.c,i.c)&&Se(this.d,i.d)&&Se(this.e,i.e)&&Se(this.f,i.f)}flip(e,i){return this.clone().flipO(e,i)}flipO(e,i){return e==="x"?this.scaleO(-1,1,i,0):e==="y"?this.scaleO(1,-1,0,i):this.scaleO(-1,-1,e,i||e)}init(e){const i=y.fromArray([1,0,0,1,0,0]);return e=e instanceof ee?e.matrixify():typeof e=="string"?y.fromArray(e.split(te).map(parseFloat)):Array.isArray(e)?y.fromArray(e):typeof e=="object"&&y.isMatrixLike(e)?e:typeof e=="object"?new y().transform(e):arguments.length===6?y.fromArray([].slice.call(arguments)):i,this.a=e.a!=null?e.a:i.a,this.b=e.b!=null?e.b:i.b,this.c=e.c!=null?e.c:i.c,this.d=e.d!=null?e.d:i.d,this.e=e.e!=null?e.e:i.e,this.f=e.f!=null?e.f:i.f,this}inverse(){return this.clone().inverseO()}inverseO(){const e=this.a,i=this.b,s=this.c,n=this.d,r=this.e,o=this.f,a=e*n-i*s;if(!a)throw new Error("Cannot invert "+this);const l=n/a,c=-i/a,d=-s/a,h=e/a,w=-(l*r+d*o),m=-(c*r+h*o);return this.a=l,this.b=c,this.c=d,this.d=h,this.e=w,this.f=m,this}lmultiply(e){return this.clone().lmultiplyO(e)}lmultiplyO(e){const i=this,s=e instanceof y?e:new y(e);return y.matrixMultiply(s,i,this)}multiply(e){return this.clone().multiplyO(e)}multiplyO(e){const i=this,s=e instanceof y?e:new y(e);return y.matrixMultiply(i,s,this)}rotate(e,i,s){return this.clone().rotateO(e,i,s)}rotateO(e,i=0,s=0){e=zt(e);const n=Math.cos(e),r=Math.sin(e),{a:o,b:a,c:l,d:c,e:d,f:h}=this;return this.a=o*n-a*r,this.b=a*n+o*r,this.c=l*n-c*r,this.d=c*n+l*r,this.e=d*n-h*r+s*r-i*n+i,this.f=h*n+d*r-i*r-s*n+s,this}scale(){return this.clone().scaleO(...arguments)}scaleO(e,i=e,s=0,n=0){arguments.length===3&&(n=s,s=i,i=e);const{a:r,b:o,c:a,d:l,e:c,f:d}=this;return this.a=r*e,this.b=o*i,this.c=a*e,this.d=l*i,this.e=c*e-s*e+s,this.f=d*i-n*i+n,this}shear(e,i,s){return this.clone().shearO(e,i,s)}shearO(e,i=0,s=0){const{a:n,b:r,c:o,d:a,e:l,f:c}=this;return this.a=n+r*e,this.c=o+a*e,this.e=l+c*e-s*e,this}skew(){return this.clone().skewO(...arguments)}skewO(e,i=e,s=0,n=0){arguments.length===3&&(n=s,s=i,i=e),e=zt(e),i=zt(i);const r=Math.tan(e),o=Math.tan(i),{a,b:l,c,d,e:h,f:w}=this;return this.a=a+l*r,this.b=l+a*o,this.c=c+d*r,this.d=d+c*o,this.e=h+w*r-n*r,this.f=w+h*o-s*o,this}skewX(e,i,s){return this.skew(e,0,i,s)}skewY(e,i,s){return this.skew(0,e,i,s)}toArray(){return[this.a,this.b,this.c,this.d,this.e,this.f]}toString(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}transform(e){if(y.isMatrixLike(e))return new y(e).multiplyO(this);const i=y.formatTransforms(e),s=this,{x:n,y:r}=new O(i.ox,i.oy).transform(s),o=new y().translateO(i.rx,i.ry).lmultiplyO(s).translateO(-n,-r).scaleO(i.scaleX,i.scaleY).skewO(i.skewX,i.skewY).shearO(i.shear).rotateO(i.theta).translateO(n,r);if(isFinite(i.px)||isFinite(i.py)){const a=new O(n,r).transform(o),l=isFinite(i.px)?i.px-a.x:0,c=isFinite(i.py)?i.py-a.y:0;o.translateO(l,c)}return o.translateO(i.tx,i.ty),o}translate(e,i){return this.clone().translateO(e,i)}translateO(e,i){return this.e+=e||0,this.f+=i||0,this}valueOf(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}function _o(){return new y(this.node.getCTM())}function Lo(){try{if(typeof this.isRoot=="function"&&!this.isRoot()){const t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new y(e)}return new y(this.node.getScreenCTM())}catch{return new y}}A(y,"Matrix");function re(){if(!re.nodes){const t=B().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");const e=t.path().node;re.nodes={svg:t,path:e}}if(!re.nodes.svg.node.parentNode){const t=E.document.body||E.document.documentElement;re.nodes.svg.addTo(t)}return re.nodes}function _s(t){return!t.width&&!t.height&&!t.x&&!t.y}function Po(t){return t===E.document||(E.document.documentElement.contains||function(e){for(;e.parentNode;)e=e.parentNode;return e===E.document}).call(E.document.documentElement,t)}class ${constructor(...e){this.init(...e)}addOffset(){return this.x+=E.window.pageXOffset,this.y+=E.window.pageYOffset,new $(this)}init(e){const i=[0,0,0,0];return e=typeof e=="string"?e.split(te).map(parseFloat):Array.isArray(e)?e:typeof e=="object"?[e.left!=null?e.left:e.x,e.top!=null?e.top:e.y,e.width,e.height]:arguments.length===4?[].slice.call(arguments):i,this.x=e[0]||0,this.y=e[1]||0,this.width=this.w=e[2]||0,this.height=this.h=e[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}isNulled(){return _s(this)}merge(e){const i=Math.min(this.x,e.x),s=Math.min(this.y,e.y),n=Math.max(this.x+this.width,e.x+e.width)-i,r=Math.max(this.y+this.height,e.y+e.height)-s;return new $(i,s,n,r)}toArray(){return[this.x,this.y,this.width,this.height]}toString(){return this.x+" "+this.y+" "+this.width+" "+this.height}transform(e){e instanceof y||(e=new y(e));let i=1/0,s=-1/0,n=1/0,r=-1/0;return[new O(this.x,this.y),new O(this.x2,this.y),new O(this.x,this.y2),new O(this.x2,this.y2)].forEach(function(a){a=a.transform(e),i=Math.min(i,a.x),s=Math.max(s,a.x),n=Math.min(n,a.y),r=Math.max(r,a.y)}),new $(i,n,s-i,r-n)}}function Ls(t,e,i){let s;try{if(s=e(t.node),_s(s)&&!Po(t.node))throw new Error("Element not in the dom")}catch{s=i(t)}return s}function To(){const i=Ls(this,n=>n.getBBox(),n=>{try{const r=n.clone().addTo(re().svg).show(),o=r.node.getBBox();return r.remove(),o}catch(r){throw new Error(`Getting bbox of element "${n.node.nodeName}" is not possible: ${r.toString()}`)}});return new $(i)}function Co(t){const s=Ls(this,r=>r.getBoundingClientRect(),r=>{throw new Error(`Getting rbox of element "${r.node.nodeName}" is not possible`)}),n=new $(s);return t?n.transform(t.screenCTM().inverseO()):n.addOffset()}function Mo(t,e){const i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height}x({viewbox:{viewbox(t,e,i,s){return t==null?new $(this.attr("viewBox")):this.attr("viewBox",new $(t,e,i,s))},zoom(t,e){let{width:i,height:s}=this.attr(["width","height"]);if((!i&&!s||typeof i=="string"||typeof s=="string")&&(i=this.node.clientWidth,s=this.node.clientHeight),!i||!s)throw new Error("Impossible to get absolute width and height. Please provide an absolute width and height attribute on the zooming element");const n=this.viewbox(),r=i/n.width,o=s/n.height,a=Math.min(r,o);if(t==null)return a;let l=a/t;l===1/0&&(l=Number.MAX_SAFE_INTEGER/100),e=e||new O(i/2/r+n.x,s/2/o+n.y);const c=new $(n).transform(new y({scale:l,origin:e}));return this.viewbox(c)}}});A($,"Box");class me extends Array{constructor(e=[],...i){if(super(e,...i),typeof e=="number")return this;this.length=0,this.push(...e)}}k([me],{each(t,...e){return typeof t=="function"?this.map((i,s,n)=>t.call(i,i,s,n)):this.map(i=>i[t](...e))},toArray(){return Array.prototype.concat.apply([],this)}});const Do=["toArray","constructor","each"];me.extend=function(t){t=t.reduce((e,i)=>(Do.includes(i)||i[0]==="_"||(i in Array.prototype&&(e["$"+i]=Array.prototype[i]),e[i]=function(...s){return this.each(i,...s)}),e),{}),k([me],t)};function Te(t,e){return new me(Kt((e||E.document).querySelectorAll(t),function(i){return X(i)}))}function Io(t){return Te(t,this.node)}function Oo(t){return X(this.node.querySelector(t))}let Wo=0;const Ps={};function Ts(t){let e=t.getEventHolder();return e===E.window&&(e=Ps),e.events||(e.events={}),e.events}function Qt(t){return t.getEventTarget()}function Ro(t){let e=t.getEventHolder();e===E.window&&(e=Ps),e.events&&(e.events={})}function Wt(t,e,i,s,n){const r=i.bind(s||t),o=B(t),a=Ts(o),l=Qt(o);e=Array.isArray(e)?e:e.split(te),i._svgjsListenerId||(i._svgjsListenerId=++Wo),e.forEach(function(c){const d=c.split(".")[0],h=c.split(".")[1]||"*";a[d]=a[d]||{},a[d][h]=a[d][h]||{},a[d][h][i._svgjsListenerId]=r,l.addEventListener(d,r,n||!1)})}function ve(t,e,i,s){const n=B(t),r=Ts(n),o=Qt(n);typeof i=="function"&&(i=i._svgjsListenerId,!i)||(e=Array.isArray(e)?e:(e||"").split(te),e.forEach(function(a){const l=a&&a.split(".")[0],c=a&&a.split(".")[1];let d,h;if(i)r[l]&&r[l][c||"*"]&&(o.removeEventListener(l,r[l][c||"*"][i],s||!1),delete r[l][c||"*"][i]);else if(l&&c){if(r[l]&&r[l][c]){for(h in r[l][c])ve(o,[l,c].join("."),h);delete r[l][c]}}else if(c)for(a in r)for(d in r[a])c===d&&ve(o,[a,c].join("."));else if(l){if(r[l]){for(d in r[l])ve(o,[l,d].join("."));delete r[l]}}else{for(a in r)ve(o,a);Ro(n)}}))}function Fo(t,e,i,s){const n=Qt(t);return e instanceof E.window.Event||(e=new E.window.CustomEvent(e,{detail:i,cancelable:!0,...s})),n.dispatchEvent(e),e}class He extends Yt{addEventListener(){}dispatch(e,i,s){return Fo(this,e,i,s)}dispatchEvent(e){const i=this.getEventHolder().events;if(!i)return!0;const s=i[e.type];for(const n in s)for(const r in s[n])s[n][r](e);return!e.defaultPrevented}fire(e,i,s){return this.dispatch(e,i,s),this}getEventHolder(){return this}getEventTarget(){return this}off(e,i,s){return ve(this,e,i,s),this}on(e,i,s,n){return Wt(this,e,i,s,n),this}removeEventListener(){}}A(He,"EventTarget");function Fi(){}const Oe={duration:400,ease:">",delay:0},$o={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"};class Ae extends Array{constructor(...e){super(...e),this.init(...e)}clone(){return new this.constructor(this)}init(e){return typeof e=="number"?this:(this.length=0,this.push(...this.parse(e)),this)}parse(e=[]){return e instanceof Array?e:e.trim().split(te).map(parseFloat)}toArray(){return Array.prototype.concat.apply([],this)}toSet(){return new Set(this)}toString(){return this.join(" ")}valueOf(){const e=[];return e.push(...this),e}}class v{constructor(...e){this.init(...e)}convert(e){return new v(this.value,e)}divide(e){return e=new v(e),new v(this/e,this.unit||e.unit)}init(e,i){return i=Array.isArray(e)?e[1]:i,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=i||"",typeof e=="number"?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:typeof e=="string"?(i=e.match(As),i&&(this.value=parseFloat(i[1]),i[5]==="%"?this.value/=100:i[5]==="s"&&(this.value*=1e3),this.unit=i[5])):e instanceof v&&(this.value=e.valueOf(),this.unit=e.unit),this}minus(e){return e=new v(e),new v(this-e,this.unit||e.unit)}plus(e){return e=new v(e),new v(this+e,this.unit||e.unit)}times(e){return e=new v(e),new v(this*e,this.unit||e.unit)}toArray(){return[this.value,this.unit]}toJSON(){return this.toString()}toString(){return(this.unit==="%"?~~(this.value*1e8)/1e6:this.unit==="s"?this.value/1e3:this.value)+this.unit}valueOf(){return this.value}}const jo=new Set(["fill","stroke","color","bgcolor","stop-color","flood-color","lighting-color"]),Cs=[];function No(t){Cs.push(t)}function Bo(t,e,i){if(t==null){t={},e=this.node.attributes;for(const s of e)t[s.nodeName]=Ri.test(s.nodeValue)?parseFloat(s.nodeValue):s.nodeValue;return t}else{if(t instanceof Array)return t.reduce((s,n)=>(s[n]=this.attr(n),s),{});if(typeof t=="object"&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(e===null)this.node.removeAttribute(t);else{if(e==null)return e=this.node.getAttribute(t),e==null?$o[t]:Ri.test(e)?parseFloat(e):e;e=Cs.reduce((s,n)=>n(t,s,this),e),typeof e=="number"?e=new v(e):jo.has(t)&&T.isColor(e)?e=new T(e):e.constructor===Array&&(e=new Ae(e)),t==="leading"?this.leading&&this.leading(e):typeof i=="string"?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),this.rebuild&&(t==="font-size"||t==="x")&&this.rebuild()}}return this}class oe extends He{constructor(e,i){super(),this.node=e,this.type=e.nodeName,i&&e!==i&&this.attr(i)}add(e,i){return e=B(e),e.removeNamespace&&this.node instanceof E.window.SVGElement&&e.removeNamespace(),i==null?this.node.appendChild(e.node):e.node!==this.node.childNodes[i]&&this.node.insertBefore(e.node,this.node.childNodes[i]),this}addTo(e,i){return B(e).put(this,i)}children(){return new me(Kt(this.node.children,function(e){return X(e)}))}clear(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}clone(e=!0,i=!0){this.writeDataToDom();let s=this.node.cloneNode(e);return i&&(s=Es(s)),new this.constructor(s)}each(e,i){const s=this.children();let n,r;for(n=0,r=s.length;n<r;n++)e.apply(s[n],[n,s]),i&&s[n].each(e,i);return this}element(e,i){return this.put(new oe(Re(e),i))}first(){return X(this.node.firstChild)}get(e){return X(this.node.childNodes[e])}getEventHolder(){return this.node}getEventTarget(){return this.node}has(e){return this.index(e)>=0}html(e,i){return this.xml(e,i,jr)}id(e){return typeof e>"u"&&!this.node.id&&(this.node.id=ks(this.type)),this.attr("id",e)}index(e){return[].slice.call(this.node.childNodes).indexOf(e.node)}last(){return X(this.node.lastChild)}matches(e){const i=this.node,s=i.matches||i.matchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||null;return s&&s.call(i,e)}parent(e){let i=this;if(!i.node.parentNode)return null;if(i=X(i.node.parentNode),!e)return i;do if(typeof e=="string"?i.matches(e):i instanceof e)return i;while(i=X(i.node.parentNode));return i}put(e,i){return e=B(e),this.add(e,i),e}putIn(e,i){return B(e).add(this,i)}remove(){return this.parent()&&this.parent().removeElement(this),this}removeElement(e){return this.node.removeChild(e.node),this}replace(e){return e=B(e),this.node.parentNode&&this.node.parentNode.replaceChild(e.node,this.node),e}round(e=2,i=null){const s=10**e,n=this.attr(i);for(const r in n)typeof n[r]=="number"&&(n[r]=Math.round(n[r]*s)/s);return this.attr(n),this}svg(e,i){return this.xml(e,i,Xt)}toString(){return this.id()}words(e){return this.node.textContent=e,this}wrap(e){const i=this.parent();if(!i)return this.addTo(e);const s=i.index(this);return i.put(e,s).put(this)}writeDataToDom(){return this.each(function(){this.writeDataToDom()}),this}xml(e,i,s){if(typeof e=="boolean"&&(s=i,i=e,e=null),e==null||typeof e=="function"){i=i??!0,this.writeDataToDom();let a=this;if(e!=null){if(a=X(a.node.cloneNode(!0)),i){const l=e(a);if(a=l||a,l===!1)return""}a.each(function(){const l=e(this),c=l||this;l===!1?this.remove():l&&this!==c&&this.replace(c)},!0)}return i?a.node.outerHTML:a.node.innerHTML}i=i??!1;const n=Re("wrapper",s),r=E.document.createDocumentFragment();n.innerHTML=e;for(let a=n.children.length;a--;)r.appendChild(n.firstElementChild);const o=this.parent();return i?this.replace(r)&&o:this.add(r)}}k(oe,{attr:Bo,find:Io,findOne:Oo});A(oe,"Dom");class ee extends oe{constructor(e,i){super(e,i),this.dom={},this.node.instance=this,(e.hasAttribute("data-svgjs")||e.hasAttribute("svgjs:data"))&&this.setData(JSON.parse(e.getAttribute("data-svgjs"))??JSON.parse(e.getAttribute("svgjs:data"))??{})}center(e,i){return this.cx(e).cy(i)}cx(e){return e==null?this.x()+this.width()/2:this.x(e-this.width()/2)}cy(e){return e==null?this.y()+this.height()/2:this.y(e-this.height()/2)}defs(){const e=this.root();return e&&e.defs()}dmove(e,i){return this.dx(e).dy(i)}dx(e=0){return this.x(new v(e).plus(this.x()))}dy(e=0){return this.y(new v(e).plus(this.y()))}getEventHolder(){return this}height(e){return this.attr("height",e)}move(e,i){return this.x(e).y(i)}parents(e=this.root()){const i=typeof e=="string";i||(e=B(e));const s=new me;let n=this;for(;(n=n.parent())&&n.node!==E.document&&n.nodeName!=="#document-fragment"&&(s.push(n),!(!i&&n.node===e.node||i&&n.matches(e)));)if(n.node===this.root().node)return null;return s}reference(e){if(e=this.attr(e),!e)return null;const i=(e+"").match(no);return i?B(i[1]):null}root(){const e=this.parent(Br(Jt));return e&&e.root()}setData(e){return this.dom=e,this}size(e,i){const s=Pe(this,e,i);return this.width(new v(s.width)).height(new v(s.height))}width(e){return this.attr("width",e)}writeDataToDom(){return xs(this,this.dom),super.writeDataToDom()}x(e){return this.attr("x",e)}y(e){return this.attr("y",e)}}k(ee,{bbox:To,rbox:Co,inside:Mo,point:Ao,ctm:_o,screenCTM:Lo});A(ee,"Element");const Ie={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return e==="color"?t:t+"-"+e}};["fill","stroke"].forEach(function(t){const e={};let i;e[t]=function(s){if(typeof s>"u")return this.attr(t);if(typeof s=="string"||s instanceof T||T.isRgb(s)||s instanceof ee)this.attr(t,s);else for(i=Ie[t].length-1;i>=0;i--)s[Ie[t][i]]!=null&&this.attr(Ie.prefix(t,Ie[t][i]),s[Ie[t][i]]);return this},x(["Element","Runner"],e)});x(["Element","Runner"],{matrix:function(t,e,i,s,n,r){return t==null?new y(this):this.attr("transform",new y(t,e,i,s,n,r))},rotate:function(t,e,i){return this.transform({rotate:t,ox:e,oy:i},!0)},skew:function(t,e,i,s){return arguments.length===1||arguments.length===3?this.transform({skew:t,ox:e,oy:i},!0):this.transform({skew:[t,e],ox:i,oy:s},!0)},shear:function(t,e,i){return this.transform({shear:t,ox:e,oy:i},!0)},scale:function(t,e,i,s){return arguments.length===1||arguments.length===3?this.transform({scale:t,ox:e,oy:i},!0):this.transform({scale:[t,e],ox:i,oy:s},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t="both",e="center"){return"xybothtrue".indexOf(t)===-1&&(e=t,t="both"),this.transform({flip:t,origin:e},!0)},opacity:function(t){return this.attr("opacity",t)}});x("radius",{radius:function(t,e=t){return(this._element||this).type==="radialGradient"?this.attr("r",new v(t)):this.rx(t).ry(e)}});x("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new O(this.node.getPointAtLength(t))}});x(["Element","Runner"],{font:function(t,e){if(typeof t=="object"){for(e in t)this.font(e,t[e]);return this}return t==="leading"?this.leading(e):t==="anchor"?this.attr("text-anchor",e):t==="size"||t==="family"||t==="weight"||t==="stretch"||t==="variant"||t==="style"?this.attr("font-"+t,e):this.attr(t,e)}});const Vo=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel","contextmenu","wheel","pointerdown","pointermove","pointerup","pointerleave","pointercancel"].reduce(function(t,e){const i=function(s){return s===null?this.off(e):this.on(e,s),this};return t[e]=i,t},{});x("Element",Vo);function Uo(){return this.attr("transform",null)}function qo(){return(this.attr("transform")||"").split(ro).slice(0,-1).map(function(e){const i=e.trim().split("(");return[i[0],i[1].split(te).map(function(s){return parseFloat(s)})]}).reverse().reduce(function(e,i){return i[0]==="matrix"?e.lmultiply(y.fromArray(i[1])):e[i[0]].apply(e,i[1])},new y)}function Ho(t,e){if(this===t)return this;if(Ot(this.node))return this.addTo(t,e);const i=this.screenCTM(),s=t.screenCTM().inverse();return this.addTo(t,e).untransform().transform(s.multiply(i)),this}function Go(t){return this.toParent(this.root(),t)}function Ko(t,e){if(t==null||typeof t=="string"){const n=new y(this).decompose();return t==null?n:n[t]}y.isMatrixLike(t)||(t={...t,origin:It(t,this)});const i=e===!0?this:e||!1,s=new y(i).transform(t);return this.attr("transform",s)}x("Element",{untransform:Uo,matrixify:qo,toParent:Ho,toRoot:Go,transform:Ko});class H extends ee{flatten(){return this.each(function(){if(this instanceof H)return this.flatten().ungroup()}),this}ungroup(e=this.parent(),i=e.index(this)){return i=i===-1?e.children().length:i,this.each(function(s,n){return n[n.length-s-1].toParent(e,i)}),this.remove()}}A(H,"Container");class ei extends H{constructor(e,i=e){super(D("defs",e),i)}flatten(){return this}ungroup(){return this}}A(ei,"Defs");class K extends ee{}A(K,"Shape");function ti(t){return this.attr("rx",t)}function ii(t){return this.attr("ry",t)}function Ms(t){return t==null?this.cx()-this.rx():this.cx(t+this.rx())}function Ds(t){return t==null?this.cy()-this.ry():this.cy(t+this.ry())}function Is(t){return this.attr("cx",t)}function Os(t){return this.attr("cy",t)}function Ws(t){return t==null?this.rx()*2:this.rx(new v(t).divide(2))}function Rs(t){return t==null?this.ry()*2:this.ry(new v(t).divide(2))}const Xo=Object.freeze(Object.defineProperty({__proto__:null,cx:Is,cy:Os,height:Rs,rx:ti,ry:ii,width:Ws,x:Ms,y:Ds},Symbol.toStringTag,{value:"Module"}));class pt extends K{constructor(e,i=e){super(D("ellipse",e),i)}size(e,i){const s=Pe(this,e,i);return this.rx(new v(s.width).divide(2)).ry(new v(s.height).divide(2))}}k(pt,Xo);x("Container",{ellipse:C(function(t=0,e=t){return this.put(new pt).size(t,e).move(0,0)})});A(pt,"Ellipse");class Fs extends oe{constructor(e=E.document.createDocumentFragment()){super(e)}xml(e,i,s){if(typeof e=="boolean"&&(s=i,i=e,e=null),e==null||typeof e=="function"){const n=new oe(Re("wrapper",s));return n.add(this.node.cloneNode(!0)),n.xml(!1,s)}return super.xml(e,!1,s)}}A(Fs,"Fragment");function $s(t,e){return(this._element||this).type==="radialGradient"?this.attr({fx:new v(t),fy:new v(e)}):this.attr({x1:new v(t),y1:new v(e)})}function js(t,e){return(this._element||this).type==="radialGradient"?this.attr({cx:new v(t),cy:new v(e)}):this.attr({x2:new v(t),y2:new v(e)})}const Yo=Object.freeze(Object.defineProperty({__proto__:null,from:$s,to:js},Symbol.toStringTag,{value:"Module"}));class Ge extends H{constructor(e,i){super(D(e+"Gradient",typeof e=="string"?null:e),i)}attr(e,i,s){return e==="transform"&&(e="gradientTransform"),super.attr(e,i,s)}bbox(){return new $}targets(){return Te("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}k(Ge,Yo);x({Container:{gradient(...t){return this.defs().gradient(...t)}},Defs:{gradient:C(function(t,e){return this.put(new Ge(t)).update(e)})}});A(Ge,"Gradient");class Fe extends H{constructor(e,i=e){super(D("pattern",e),i)}attr(e,i,s){return e==="transform"&&(e="patternTransform"),super.attr(e,i,s)}bbox(){return new $}targets(){return Te("svg [fill*="+this.id()+"]")}toString(){return this.url()}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}url(){return"url(#"+this.id()+")"}}x({Container:{pattern(...t){return this.defs().pattern(...t)}},Defs:{pattern:C(function(t,e,i){return this.put(new Fe).update(i).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})})}});A(Fe,"Pattern");class ft extends K{constructor(e,i=e){super(D("image",e),i)}load(e,i){if(!e)return this;const s=new E.window.Image;return Wt(s,"load",function(n){const r=this.parent(Fe);this.width()===0&&this.height()===0&&this.size(s.width,s.height),r instanceof Fe&&r.width()===0&&r.height()===0&&r.size(this.width(),this.height()),typeof i=="function"&&i.call(this,n)},this),Wt(s,"load error",function(){ve(s)}),this.attr("href",s.src=e,qe)}}No(function(t,e,i){return(t==="fill"||t==="stroke")&&ao.test(e)&&(e=i.root().defs().image(e)),e instanceof ft&&(e=i.root().defs().pattern(0,0,s=>{s.add(e)})),e});x({Container:{image:C(function(t,e){return this.put(new ft).size(0,0).load(t,e)})}});A(ft,"Image");class ae extends Ae{bbox(){let e=-1/0,i=-1/0,s=1/0,n=1/0;return this.forEach(function(r){e=Math.max(r[0],e),i=Math.max(r[1],i),s=Math.min(r[0],s),n=Math.min(r[1],n)}),new $(s,n,e-s,i-n)}move(e,i){const s=this.bbox();if(e-=s.x,i-=s.y,!isNaN(e)&&!isNaN(i))for(let n=this.length-1;n>=0;n--)this[n]=[this[n][0]+e,this[n][1]+i];return this}parse(e=[0,0]){const i=[];e instanceof Array?e=Array.prototype.concat.apply([],e):e=e.trim().split(te).map(parseFloat),e.length%2!==0&&e.pop();for(let s=0,n=e.length;s<n;s=s+2)i.push([e[s],e[s+1]]);return i}size(e,i){let s;const n=this.bbox();for(s=this.length-1;s>=0;s--)n.width&&(this[s][0]=(this[s][0]-n.x)*e/n.width+n.x),n.height&&(this[s][1]=(this[s][1]-n.y)*i/n.height+n.y);return this}toLine(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}}toString(){const e=[];for(let i=0,s=this.length;i<s;i++)e.push(this[i].join(","));return e.join(" ")}transform(e){return this.clone().transformO(e)}transformO(e){y.isMatrixLike(e)||(e=new y(e));for(let i=this.length;i--;){const[s,n]=this[i];this[i][0]=e.a*s+e.c*n+e.e,this[i][1]=e.b*s+e.d*n+e.f}return this}}const Jo=ae;function Zo(t){return t==null?this.bbox().x:this.move(t,this.bbox().y)}function Qo(t){return t==null?this.bbox().y:this.move(this.bbox().x,t)}function ea(t){const e=this.bbox();return t==null?e.width:this.size(t,e.height)}function ta(t){const e=this.bbox();return t==null?e.height:this.size(e.width,t)}const si=Object.freeze(Object.defineProperty({__proto__:null,MorphArray:Jo,height:ta,width:ea,x:Zo,y:Qo},Symbol.toStringTag,{value:"Module"}));class $e extends K{constructor(e,i=e){super(D("line",e),i)}array(){return new ae([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}move(e,i){return this.attr(this.array().move(e,i).toLine())}plot(e,i,s,n){return e==null?this.array():(typeof i<"u"?e={x1:e,y1:i,x2:s,y2:n}:e=new ae(e).toLine(),this.attr(e))}size(e,i){const s=Pe(this,e,i);return this.attr(this.array().size(s.width,s.height).toLine())}}k($e,si);x({Container:{line:C(function(...t){return $e.prototype.plot.apply(this.put(new $e),t[0]!=null?t:[0,0,0,0])})}});A($e,"Line");class nt extends H{constructor(e,i=e){super(D("marker",e),i)}height(e){return this.attr("markerHeight",e)}orient(e){return this.attr("orient",e)}ref(e,i){return this.attr("refX",e).attr("refY",i)}toString(){return"url(#"+this.id()+")"}update(e){return this.clear(),typeof e=="function"&&e.call(this,this),this}width(e){return this.attr("markerWidth",e)}}x({Container:{marker(...t){return this.defs().marker(...t)}},Defs:{marker:C(function(t,e,i){return this.put(new nt).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(i)})},marker:{marker(t,e,i,s){let n=["marker"];return t!=="all"&&n.push(t),n=n.join("-"),t=arguments[1]instanceof nt?arguments[1]:this.defs().marker(e,i,s),this.attr(n,t)}}});A(nt,"Marker");function ze(t,e){return function(i){return i==null?this[t]:(this[t]=i,e&&e.call(this),this)}}const ia={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return-Math.cos(t*Math.PI/2)+1},bezier:function(t,e,i,s){return function(n){return n<0?t>0?e/t*n:i>0?s/i*n:0:n>1?i<1?(1-s)/(1-i)*n+(s-i)/(1-i):t<1?(1-e)/(1-t)*n+(e-t)/(1-t):1:3*n*(1-n)**2*e+3*n**2*(1-n)*s+n**3}},steps:function(t,e="end"){e=e.split("-").reverse()[0];let i=t;return e==="none"?--i:e==="both"&&++i,(s,n=!1)=>{let r=Math.floor(s*t);const o=s*r%1===0;return(e==="start"||e==="both")&&++r,n&&o&&--r,s>=0&&r<0&&(r=0),s<=1&&r>i&&(r=i),r/i}}};class ni{done(){return!1}}class Rt extends ni{constructor(e=Oe.ease){super(),this.ease=ia[e]||e}step(e,i,s){return typeof e!="number"?s<1?e:i:e+(i-e)*this.ease(s)}}class rt extends ni{constructor(e){super(),this.stepper=e}done(e){return e.done}step(e,i,s,n){return this.stepper(e,i,s,n)}}function $i(){const t=(this._duration||500)/1e3,e=this._overshoot||0,i=1e-10,s=Math.PI,n=Math.log(e/100+i),r=-n/Math.sqrt(s*s+n*n),o=3.9/(r*t);this.d=2*r*o,this.k=o*o}class sa extends rt{constructor(e=500,i=0){super(),this.duration(e).overshoot(i)}step(e,i,s,n){if(typeof e=="string")return e;if(n.done=s===1/0,s===1/0)return i;if(s===0)return e;s>100&&(s=16),s/=1e3;const r=n.velocity||0,o=-this.d*r-this.k*(e-i),a=e+r*s+o*s*s/2;return n.velocity=r+o*s,n.done=Math.abs(i-a)+Math.abs(r)<.002,n.done?i:a}}k(sa,{duration:ze("_duration",$i),overshoot:ze("_overshoot",$i)});class na extends rt{constructor(e=.1,i=.01,s=0,n=1e3){super(),this.p(e).i(i).d(s).windup(n)}step(e,i,s,n){if(typeof e=="string")return e;if(n.done=s===1/0,s===1/0)return i;if(s===0)return e;const r=i-e;let o=(n.integral||0)+r*s;const a=(r-(n.error||0))/s,l=this._windup;return l!==!1&&(o=Math.max(-l,Math.min(o,l))),n.error=r,n.integral=o,n.done=Math.abs(r)<.001,n.done?i:e+(this.P*r+this.I*o+this.D*a)}}k(na,{windup:ze("_windup"),p:ze("P"),i:ze("I"),d:ze("D")});const ra={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0},Ft={M:function(t,e,i){return e.x=i.x=t[0],e.y=i.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,i){return e.x=i.x,e.y=i.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},At="mlhvqtcsaz".split("");for(let t=0,e=At.length;t<e;++t)Ft[At[t]]=(function(i){return function(s,n,r){if(i==="H")s[0]=s[0]+n.x;else if(i==="V")s[0]=s[0]+n.y;else if(i==="A")s[5]=s[5]+n.x,s[6]=s[6]+n.y;else for(let o=0,a=s.length;o<a;++o)s[o]=s[o]+(o%2?n.y:n.x);return Ft[i](s,n,r)}})(At[t].toUpperCase());function oa(t){const e=t.segment[0];return Ft[e](t.segment.slice(1),t.p,t.p0)}function $t(t){return t.segment.length&&t.segment.length-1===ra[t.segment[0].toUpperCase()]}function aa(t,e){t.inNumber&&ce(t,!1);const i=Zt.test(e);if(i)t.segment=[e];else{const s=t.lastCommand,n=s.toLowerCase(),r=s===n;t.segment=[n==="m"?r?"l":"L":s]}return t.inSegment=!0,t.lastCommand=t.segment[0],i}function ce(t,e){if(!t.inNumber)throw new Error("Parser Error");t.number&&t.segment.push(parseFloat(t.number)),t.inNumber=e,t.number="",t.pointSeen=!1,t.hasExponent=!1,$t(t)&&jt(t)}function jt(t){t.inSegment=!1,t.absolute&&(t.segment=oa(t)),t.segments.push(t.segment)}function la(t){if(!t.segment.length)return!1;const e=t.segment[0].toUpperCase()==="A",i=t.segment.length;return e&&(i===4||i===5)}function ca(t){return t.lastToken.toUpperCase()==="E"}const da=new Set([" ",",","	",`
`,"\r","\f"]);function ua(t,e=!0){let i=0,s="";const n={segment:[],inNumber:!1,number:"",lastToken:"",inSegment:!1,segments:[],pointSeen:!1,hasExponent:!1,absolute:e,p0:new O,p:new O};for(;n.lastToken=s,s=t.charAt(i++);)if(!(!n.inSegment&&aa(n,s))){if(s==="."){if(n.pointSeen||n.hasExponent){ce(n,!1),--i;continue}n.inNumber=!0,n.pointSeen=!0,n.number+=s;continue}if(!isNaN(parseInt(s))){if(n.number==="0"||la(n)){n.inNumber=!0,n.number=s,ce(n,!0);continue}n.inNumber=!0,n.number+=s;continue}if(da.has(s)){n.inNumber&&ce(n,!1);continue}if(s==="-"||s==="+"){if(n.inNumber&&!ca(n)){ce(n,!1),--i;continue}n.number+=s,n.inNumber=!0;continue}if(s.toUpperCase()==="E"){n.number+=s,n.hasExponent=!0;continue}if(Zt.test(s)){if(n.inNumber)ce(n,!1);else if($t(n))jt(n);else throw new Error("parser Error");--i}}return n.inNumber&&ce(n,!1),n.inSegment&&$t(n)&&jt(n),n.segments}function ha(t){let e="";for(let i=0,s=t.length;i<s;i++)e+=t[i][0],t[i][1]!=null&&(e+=t[i][1],t[i][2]!=null&&(e+=" ",e+=t[i][2],t[i][3]!=null&&(e+=" ",e+=t[i][3],e+=" ",e+=t[i][4],t[i][5]!=null&&(e+=" ",e+=t[i][5],e+=" ",e+=t[i][6],t[i][7]!=null&&(e+=" ",e+=t[i][7])))));return e+" "}class ge extends Ae{bbox(){return re().path.setAttribute("d",this.toString()),new $(re.nodes.path.getBBox())}move(e,i){const s=this.bbox();if(e-=s.x,i-=s.y,!isNaN(e)&&!isNaN(i))for(let n,r=this.length-1;r>=0;r--)n=this[r][0],n==="M"||n==="L"||n==="T"?(this[r][1]+=e,this[r][2]+=i):n==="H"?this[r][1]+=e:n==="V"?this[r][1]+=i:n==="C"||n==="S"||n==="Q"?(this[r][1]+=e,this[r][2]+=i,this[r][3]+=e,this[r][4]+=i,n==="C"&&(this[r][5]+=e,this[r][6]+=i)):n==="A"&&(this[r][6]+=e,this[r][7]+=i);return this}parse(e="M0 0"){return Array.isArray(e)&&(e=Array.prototype.concat.apply([],e).toString()),ua(e)}size(e,i){const s=this.bbox();let n,r;for(s.width=s.width===0?1:s.width,s.height=s.height===0?1:s.height,n=this.length-1;n>=0;n--)r=this[n][0],r==="M"||r==="L"||r==="T"?(this[n][1]=(this[n][1]-s.x)*e/s.width+s.x,this[n][2]=(this[n][2]-s.y)*i/s.height+s.y):r==="H"?this[n][1]=(this[n][1]-s.x)*e/s.width+s.x:r==="V"?this[n][1]=(this[n][1]-s.y)*i/s.height+s.y:r==="C"||r==="S"||r==="Q"?(this[n][1]=(this[n][1]-s.x)*e/s.width+s.x,this[n][2]=(this[n][2]-s.y)*i/s.height+s.y,this[n][3]=(this[n][3]-s.x)*e/s.width+s.x,this[n][4]=(this[n][4]-s.y)*i/s.height+s.y,r==="C"&&(this[n][5]=(this[n][5]-s.x)*e/s.width+s.x,this[n][6]=(this[n][6]-s.y)*i/s.height+s.y)):r==="A"&&(this[n][1]=this[n][1]*e/s.width,this[n][2]=this[n][2]*i/s.height,this[n][6]=(this[n][6]-s.x)*e/s.width+s.x,this[n][7]=(this[n][7]-s.y)*i/s.height+s.y);return this}toString(){return ha(this)}}const Ns=t=>{const e=typeof t;return e==="number"?v:e==="string"?T.isColor(t)?T:te.test(t)?Zt.test(t)?ge:Ae:As.test(t)?v:Nt:ri.indexOf(t.constructor)>-1?t.constructor:Array.isArray(t)?Ae:e==="object"?je:Nt};class de{constructor(e){this._stepper=e||new Rt("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}at(e){return this._morphObj.morph(this._from,this._to,e,this._stepper,this._context)}done(){return this._context.map(this._stepper.done).reduce(function(i,s){return i&&s},!0)}from(e){return e==null?this._from:(this._from=this._set(e),this)}stepper(e){return e==null?this._stepper:(this._stepper=e,this)}to(e){return e==null?this._to:(this._to=this._set(e),this)}type(e){return e==null?this._type:(this._type=e,this)}_set(e){this._type||this.type(Ns(e));let i=new this._type(e);return this._type===T&&(i=this._to?i[this._to[4]]():this._from?i[this._from[4]]():i),this._type===je&&(i=this._to?i.align(this._to):this._from?i.align(this._from):i),i=i.toConsumable(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(i.length)).map(Object).map(function(s){return s.done=!0,s}),i}}class Nt{constructor(...e){this.init(...e)}init(e){return e=Array.isArray(e)?e[0]:e,this.value=e,this}toArray(){return[this.value]}valueOf(){return this.value}}class Ke{constructor(...e){this.init(...e)}init(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,Ke.defaults,e),this}toArray(){const e=this;return[e.scaleX,e.scaleY,e.shear,e.rotate,e.translateX,e.translateY,e.originX,e.originY]}}Ke.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};const pa=(t,e)=>t[0]<e[0]?-1:t[0]>e[0]?1:0;class je{constructor(...e){this.init(...e)}align(e){const i=this.values;for(let s=0,n=i.length;s<n;++s){if(i[s+1]===e[s+1]){if(i[s+1]===T&&e[s+7]!==i[s+7]){const a=e[s+7],l=new T(this.values.splice(s+3,5))[a]().toArray();this.values.splice(s+3,0,...l)}s+=i[s+2]+2;continue}if(!e[s+1])return this;const r=new e[s+1]().toArray(),o=i[s+2]+3;i.splice(s,o,e[s],e[s+1],e[s+2],...r),s+=i[s+2]+2}return this}init(e){if(this.values=[],Array.isArray(e)){this.values=e.slice();return}e=e||{};const i=[];for(const s in e){const n=Ns(e[s]),r=new n(e[s]).toArray();i.push([s,n,r.length,...r])}return i.sort(pa),this.values=i.reduce((s,n)=>s.concat(n),[]),this}toArray(){return this.values}valueOf(){const e={},i=this.values;for(;i.length;){const s=i.shift(),n=i.shift(),r=i.shift(),o=i.splice(0,r);e[s]=new n(o)}return e}}const ri=[Nt,Ke,je];function fa(t=[]){ri.push(...[].concat(t))}function ma(){k(ri,{to(t){return new de().type(this.constructor).from(this.toArray()).to(t)},fromArray(t){return this.init(t),this},toConsumable(){return this.toArray()},morph(t,e,i,s,n){const r=function(o,a){return s.step(o,e[a],i,n[a],n)};return this.fromArray(t.map(r))}})}class Ce extends K{constructor(e,i=e){super(D("path",e),i)}array(){return this._array||(this._array=new ge(this.attr("d")))}clear(){return delete this._array,this}height(e){return e==null?this.bbox().height:this.size(this.bbox().width,e)}move(e,i){return this.attr("d",this.array().move(e,i))}plot(e){return e==null?this.array():this.clear().attr("d",typeof e=="string"?e:this._array=new ge(e))}size(e,i){const s=Pe(this,e,i);return this.attr("d",this.array().size(s.width,s.height))}width(e){return e==null?this.bbox().width:this.size(e,this.bbox().height)}x(e){return e==null?this.bbox().x:this.move(e,this.bbox().y)}y(e){return e==null?this.bbox().y:this.move(this.bbox().x,e)}}Ce.prototype.MorphArray=ge;x({Container:{path:C(function(t){return this.put(new Ce).plot(t||new ge)})}});A(Ce,"Path");function ga(){return this._array||(this._array=new ae(this.attr("points")))}function wa(){return delete this._array,this}function ya(t,e){return this.attr("points",this.array().move(t,e))}function ba(t){return t==null?this.array():this.clear().attr("points",typeof t=="string"?t:this._array=new ae(t))}function Sa(t,e){const i=Pe(this,t,e);return this.attr("points",this.array().size(i.width,i.height))}const Bs=Object.freeze(Object.defineProperty({__proto__:null,array:ga,clear:wa,move:ya,plot:ba,size:Sa},Symbol.toStringTag,{value:"Module"}));class Xe extends K{constructor(e,i=e){super(D("polygon",e),i)}}x({Container:{polygon:C(function(t){return this.put(new Xe).plot(t||new ae)})}});k(Xe,si);k(Xe,Bs);A(Xe,"Polygon");class Ye extends K{constructor(e,i=e){super(D("polyline",e),i)}}x({Container:{polyline:C(function(t){return this.put(new Ye).plot(t||new ae)})}});k(Ye,si);k(Ye,Bs);A(Ye,"Polyline");class mt extends K{constructor(e,i=e){super(D("rect",e),i)}}k(mt,{rx:ti,ry:ii});x({Container:{rect:C(function(t,e){return this.put(new mt).size(t,e)})}});A(mt,"Rect");class _t{constructor(){this._first=null,this._last=null}first(){return this._first&&this._first.value}last(){return this._last&&this._last.value}push(e){const i=typeof e.next<"u"?e:{value:e,next:null,prev:null};return this._last?(i.prev=this._last,this._last.next=i,this._last=i):(this._last=i,this._first=i),i}remove(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._last&&(this._last=e.prev),e===this._first&&(this._first=e.next),e.prev=null,e.next=null}shift(){const e=this._first;return e?(this._first=e.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,e.value):null}}const P={nextDraw:null,frames:new _t,timeouts:new _t,immediates:new _t,timer:()=>E.window.performance||E.window.Date,transforms:[],frame(t){const e=P.frames.push({run:t});return P.nextDraw===null&&(P.nextDraw=E.window.requestAnimationFrame(P._draw)),e},timeout(t,e){e=e||0;const i=P.timer().now()+e,s=P.timeouts.push({run:t,time:i});return P.nextDraw===null&&(P.nextDraw=E.window.requestAnimationFrame(P._draw)),s},immediate(t){const e=P.immediates.push(t);return P.nextDraw===null&&(P.nextDraw=E.window.requestAnimationFrame(P._draw)),e},cancelFrame(t){t!=null&&P.frames.remove(t)},clearTimeout(t){t!=null&&P.timeouts.remove(t)},cancelImmediate(t){t!=null&&P.immediates.remove(t)},_draw(t){let e=null;const i=P.timeouts.last();for(;(e=P.timeouts.shift())&&(t>=e.time?e.run():P.timeouts.push(e),e!==i););let s=null;const n=P.frames.last();for(;s!==n&&(s=P.frames.shift());)s.run(t);let r=null;for(;r=P.immediates.shift();)r();P.nextDraw=P.timeouts.first()||P.frames.first()?E.window.requestAnimationFrame(P._draw):null}},va=function(t){const e=t.start,i=t.runner.duration(),s=e+i;return{start:e,duration:i,end:s,runner:t.runner}},za=function(){const t=E.window;return(t.performance||t.Date).now()};class Vs extends He{constructor(e=za){super(),this._timeSource=e,this.terminate()}active(){return!!this._nextFrame}finish(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}getEndTime(){const e=this.getLastRunnerInfo(),i=e?e.runner.duration():0;return(e?e.start:this._time)+i}getEndTimeOfTimeline(){const e=this._runners.map(i=>i.start+i.runner.duration());return Math.max(0,...e)}getLastRunnerInfo(){return this.getRunnerInfoById(this._lastRunnerId)}getRunnerInfoById(e){return this._runners[this._runnerIds.indexOf(e)]||null}pause(){return this._paused=!0,this._continue()}persist(e){return e==null?this._persist:(this._persist=e,this)}play(){return this._paused=!1,this.updateTime()._continue()}reverse(e){const i=this.speed();if(e==null)return this.speed(-i);const s=Math.abs(i);return this.speed(e?-s:s)}schedule(e,i,s){if(e==null)return this._runners.map(va);let n=0;const r=this.getEndTime();if(i=i||0,s==null||s==="last"||s==="after")n=r;else if(s==="absolute"||s==="start")n=i,i=0;else if(s==="now")n=this._time;else if(s==="relative"){const l=this.getRunnerInfoById(e.id);l&&(n=l.start+i,i=0)}else if(s==="with-last"){const l=this.getLastRunnerInfo();n=l?l.start:this._time}else throw new Error('Invalid value for the "when" parameter');e.unschedule(),e.timeline(this);const o=e.persist(),a={persist:o===null?this._persist:o,start:n+i,runner:e};return this._lastRunnerId=e.id,this._runners.push(a),this._runners.sort((l,c)=>l.start-c.start),this._runnerIds=this._runners.map(l=>l.runner.id),this.updateTime()._continue(),this}seek(e){return this.time(this._time+e)}source(e){return e==null?this._timeSource:(this._timeSource=e,this)}speed(e){return e==null?this._speed:(this._speed=e,this)}stop(){return this.time(0),this.pause()}time(e){return e==null?this._time:(this._time=e,this._continue(!0))}unschedule(e){const i=this._runnerIds.indexOf(e.id);return i<0?this:(this._runners.splice(i,1),this._runnerIds.splice(i,1),e.timeline(null),this)}updateTime(){return this.active()||(this._lastSourceTime=this._timeSource()),this}_continue(e=!1){return P.cancelFrame(this._nextFrame),this._nextFrame=null,e?this._stepImmediate():this._paused?this:(this._nextFrame=P.frame(this._step),this)}_stepFn(e=!1){const i=this._timeSource();let s=i-this._lastSourceTime;e&&(s=0);const n=this._speed*s+(this._time-this._lastStepTime);this._lastSourceTime=i,e||(this._time+=n,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(let o=this._runners.length;o--;){const a=this._runners[o],l=a.runner;this._time-a.start<=0&&l.reset()}let r=!1;for(let o=0,a=this._runners.length;o<a;o++){const l=this._runners[o],c=l.runner;let d=n;const h=this._time-l.start;if(h<=0){r=!0;continue}else h<d&&(d=h);if(!c.active())continue;c.step(d).done?l.persist!==!0&&c.duration()-c.time()+this._time+l.persist<this._time&&(c.unschedule(),--o,--a):r=!0}return r&&!(this._speed<0&&this._time===0)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}terminate(){this._startTime=0,this._speed=1,this._persist=0,this._nextFrame=null,this._paused=!0,this._runners=[],this._runnerIds=[],this._lastRunnerId=-1,this._time=0,this._lastSourceTime=0,this._lastStepTime=0,this._step=this._stepFn.bind(this,!1),this._stepImmediate=this._stepFn.bind(this,!0)}}x({Element:{timeline:function(t){return t==null?(this._timeline=this._timeline||new Vs,this._timeline):(this._timeline=t,this)}}});class G extends He{constructor(e){super(),this.id=G.id++,e=e??Oe.duration,e=typeof e=="function"?new rt(e):e,this._element=null,this._timeline=null,this.done=!1,this._queue=[],this._duration=typeof e=="number"&&e,this._isDeclarative=e instanceof rt,this._stepper=this._isDeclarative?e:new Rt,this._history={},this.enabled=!0,this._time=0,this._lastTime=0,this._reseted=!0,this.transforms=new y,this.transformId=1,this._haveReversed=!1,this._reverse=!1,this._loopsDone=0,this._swing=!1,this._wait=0,this._times=1,this._frameId=null,this._persist=this._isDeclarative?!0:null}static sanitise(e,i,s){let n=1,r=!1,o=0;return e=e??Oe.duration,i=i??Oe.delay,s=s||"last",typeof e=="object"&&!(e instanceof ni)&&(i=e.delay??i,s=e.when??s,r=e.swing||r,n=e.times??n,o=e.wait??o,e=e.duration??Oe.duration),{duration:e,delay:i,swing:r,times:n,wait:o,when:s}}active(e){return e==null?this.enabled:(this.enabled=e,this)}addTransform(e){return this.transforms.lmultiplyO(e),this}after(e){return this.on("finished",e)}animate(e,i,s){const n=G.sanitise(e,i,s),r=new G(n.duration);return this._timeline&&r.timeline(this._timeline),this._element&&r.element(this._element),r.loop(n).schedule(n.delay,n.when)}clearTransform(){return this.transforms=new y,this}clearTransformsFromQueue(){(!this.done||!this._timeline||!this._timeline._runnerIds.includes(this.id))&&(this._queue=this._queue.filter(e=>!e.isTransform))}delay(e){return this.animate(0,e)}duration(){return this._times*(this._wait+this._duration)-this._wait}during(e){return this.queue(null,e)}ease(e){return this._stepper=new Rt(e),this}element(e){return e==null?this._element:(this._element=e,e._prepareRunner(),this)}finish(){return this.step(1/0)}loop(e,i,s){return typeof e=="object"&&(i=e.swing,s=e.wait,e=e.times),this._times=e||1/0,this._swing=i||!1,this._wait=s||0,this._times===!0&&(this._times=1/0),this}loops(e){const i=this._duration+this._wait;if(e==null){const o=Math.floor(this._time/i),l=(this._time-o*i)/this._duration;return Math.min(o+l,this._times)}const s=Math.floor(e),n=e%1,r=i*s+this._duration*n;return this.time(r)}persist(e){return e==null?this._persist:(this._persist=e,this)}position(e){const i=this._time,s=this._duration,n=this._wait,r=this._times,o=this._swing,a=this._reverse;let l;if(e==null){const w=function(p){const g=o*Math.floor(p%(2*(n+s))/(n+s)),f=g&&!a||!g&&a,S=Math.pow(-1,f)*(p%(n+s))/s+f;return Math.max(Math.min(S,1),0)},m=r*(n+s)-n;return l=i<=0?Math.round(w(1e-5)):i<m?w(i):Math.round(w(m-1e-5)),l}const c=Math.floor(this.loops()),d=o&&c%2===0;return l=c+(d&&!a||a&&d?e:1-e),this.loops(l)}progress(e){return e==null?Math.min(1,this._time/this.duration()):this.time(e*this.duration())}queue(e,i,s,n){return this._queue.push({initialiser:e||Fi,runner:i||Fi,retarget:s,isTransform:n,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}reset(){return this._reseted?this:(this.time(0),this._reseted=!0,this)}reverse(e){return this._reverse=e??!this._reverse,this}schedule(e,i,s){if(e instanceof Vs||(s=i,i=e,e=this.timeline()),!e)throw Error("Runner cannot be scheduled without timeline");return e.schedule(this,i,s),this}step(e){if(!this.enabled)return this;e=e??16,this._time+=e;const i=this.position(),s=this._lastPosition!==i&&this._time>=0;this._lastPosition=i;const n=this.duration(),r=this._lastTime<=0&&this._time>0,o=this._lastTime<n&&this._time>=n;this._lastTime=this._time,r&&this.fire("start",this);const a=this._isDeclarative;this.done=!a&&!o&&this._time>=n,this._reseted=!1;let l=!1;return(s||a)&&(this._initialise(s),this.transforms=new y,l=this._run(a?e:i),this.fire("step",this)),this.done=this.done||l&&a,o&&this.fire("finished",this),this}time(e){if(e==null)return this._time;const i=e-this._time;return this.step(i),this}timeline(e){return typeof e>"u"?this._timeline:(this._timeline=e,this)}unschedule(){const e=this.timeline();return e&&e.unschedule(this),this}_initialise(e){if(!(!e&&!this._isDeclarative))for(let i=0,s=this._queue.length;i<s;++i){const n=this._queue[i],r=this._isDeclarative||!n.initialised&&e;e=!n.finished,r&&e&&(n.initialiser.call(this),n.initialised=!0)}}_rememberMorpher(e,i){if(this._history[e]={morpher:i,caller:this._queue[this._queue.length-1]},this._isDeclarative){const s=this.timeline();s&&s.play()}}_run(e){let i=!0;for(let s=0,n=this._queue.length;s<n;++s){const r=this._queue[s],o=r.runner.call(this,e);r.finished=r.finished||o===!0,i=i&&r.finished}return i}_tryRetarget(e,i,s){if(this._history[e]){if(!this._history[e].caller.initialised){const r=this._queue.indexOf(this._history[e].caller);return this._queue.splice(r,1),!1}this._history[e].caller.retarget?this._history[e].caller.retarget.call(this,i,s):this._history[e].morpher.to(i),this._history[e].caller.finished=!1;const n=this.timeline();return n&&n.play(),!0}return!1}}G.id=0;class ot{constructor(e=new y,i=-1,s=!0){this.transforms=e,this.id=i,this.done=s}clearTransformsFromQueue(){}}k([G,ot],{mergeWith(t){return new ot(t.transforms.lmultiply(this.transforms),t.id)}});const Us=(t,e)=>t.lmultiplyO(e),qs=t=>t.transforms;function xa(){const e=this._transformationRunners.runners.map(qs).reduce(Us,new y);this.transform(e),this._transformationRunners.merge(),this._transformationRunners.length()===1&&(this._frameId=null)}class ka{constructor(){this.runners=[],this.ids=[]}add(e){if(this.runners.includes(e))return;const i=e.id+1;return this.runners.push(e),this.ids.push(i),this}clearBefore(e){const i=this.ids.indexOf(e+1)||1;return this.ids.splice(0,i,0),this.runners.splice(0,i,new ot).forEach(s=>s.clearTransformsFromQueue()),this}edit(e,i){const s=this.ids.indexOf(e+1);return this.ids.splice(s,1,e+1),this.runners.splice(s,1,i),this}getByID(e){return this.runners[this.ids.indexOf(e+1)]}length(){return this.ids.length}merge(){let e=null;for(let i=0;i<this.runners.length;++i){const s=this.runners[i];if(e&&s.done&&e.done&&(!s._timeline||!s._timeline._runnerIds.includes(s.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))){this.remove(s.id);const r=s.mergeWith(e);this.edit(e.id,r),e=r,--i}else e=s}return this}remove(e){const i=this.ids.indexOf(e+1);return this.ids.splice(i,1),this.runners.splice(i,1),this}}x({Element:{animate(t,e,i){const s=G.sanitise(t,e,i),n=this.timeline();return new G(s.duration).loop(s).element(this).timeline(n.play()).schedule(s.delay,s.when)},delay(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore(t){this._transformationRunners.clearBefore(t.id)},_currentTransform(t){return this._transformationRunners.runners.filter(e=>e.id<=t.id).map(qs).reduce(Us,new y)},_addRunner(t){this._transformationRunners.add(t),P.cancelImmediate(this._frameId),this._frameId=P.immediate(xa.bind(this))},_prepareRunner(){this._frameId==null&&(this._transformationRunners=new ka().add(new ot(new y(this))))}}});const Ea=(t,e)=>t.filter(i=>!e.includes(i));k(G,{attr(t,e){return this.styleAttr("attr",t,e)},css(t,e){return this.styleAttr("css",t,e)},styleAttr(t,e,i){if(typeof e=="string")return this.styleAttr(t,{[e]:i});let s=e;if(this._tryRetarget(t,s))return this;let n=new de(this._stepper).to(s),r=Object.keys(s);return this.queue(function(){n=n.from(this.element()[t](r))},function(o){return this.element()[t](n.at(o).valueOf()),n.done()},function(o){const a=Object.keys(o),l=Ea(a,r);if(l.length){const d=this.element()[t](l),h=new je(n.from()).valueOf();Object.assign(h,d),n.from(h)}const c=new je(n.to()).valueOf();Object.assign(c,o),n.to(c),r=a,s=o}),this._rememberMorpher(t,n),this},zoom(t,e){if(this._tryRetarget("zoom",t,e))return this;let i=new de(this._stepper).to(new v(t));return this.queue(function(){i=i.from(this.element().zoom())},function(s){return this.element().zoom(i.at(s),e),i.done()},function(s,n){e=n,i.to(s)}),this._rememberMorpher("zoom",i),this},transform(t,e,i){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;const s=y.isMatrixLike(t);i=t.affine!=null?t.affine:i??!s;const n=new de(this._stepper).type(i?Ke:y);let r,o,a,l,c;function d(){o=o||this.element(),r=r||It(t,o),c=new y(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}function h(m){e||this.clearTransform();const{x:p,y:g}=new O(r).transform(o._currentTransform(this));let f=new y({...t,origin:[p,g]}),S=this._isDeclarative&&a?a:c;if(i){f=f.decompose(p,g),S=S.decompose(p,g);const b=f.rotate,I=S.rotate,R=[b-360,b,b+360],N=R.map(we=>Math.abs(we-I)),F=Math.min(...N),ie=N.indexOf(F);f.rotate=R[ie]}e&&(s||(f.rotate=t.rotate||0),this._isDeclarative&&l&&(S.rotate=l)),n.from(S),n.to(f);const _=n.at(m);return l=_.rotate,a=new y(_),this.addTransform(a),o._addRunner(this),n.done()}function w(m){(m.origin||"center").toString()!==(t.origin||"center").toString()&&(r=It(m,o)),t={...m,origin:r}}return this.queue(d,h,w,!0),this._isDeclarative&&this._rememberMorpher("transform",n),this},x(t){return this._queueNumber("x",t)},y(t){return this._queueNumber("y",t)},ax(t){return this._queueNumber("ax",t)},ay(t){return this._queueNumber("ay",t)},dx(t=0){return this._queueNumberDelta("x",t)},dy(t=0){return this._queueNumberDelta("y",t)},dmove(t,e){return this.dx(t).dy(e)},_queueNumberDelta(t,e){if(e=new v(e),this._tryRetarget(t,e))return this;const i=new de(this._stepper).to(e);let s=null;return this.queue(function(){s=this.element()[t](),i.from(s),i.to(s+e)},function(n){return this.element()[t](i.at(n)),i.done()},function(n){i.to(s+new v(n))}),this._rememberMorpher(t,i),this},_queueObject(t,e){if(this._tryRetarget(t,e))return this;const i=new de(this._stepper).to(e);return this.queue(function(){i.from(this.element()[t]())},function(s){return this.element()[t](i.at(s)),i.done()}),this._rememberMorpher(t,i),this},_queueNumber(t,e){return this._queueObject(t,new v(e))},cx(t){return this._queueNumber("cx",t)},cy(t){return this._queueNumber("cy",t)},move(t,e){return this.x(t).y(e)},amove(t,e){return this.ax(t).ay(e)},center(t,e){return this.cx(t).cy(e)},size(t,e){let i;return(!t||!e)&&(i=this._element.bbox()),t||(t=i.width/i.height*e),e||(e=i.height/i.width*t),this.width(t).height(e)},width(t){return this._queueNumber("width",t)},height(t){return this._queueNumber("height",t)},plot(t,e,i,s){if(arguments.length===4)return this.plot([t,e,i,s]);if(this._tryRetarget("plot",t))return this;const n=new de(this._stepper).type(this._element.MorphArray).to(t);return this.queue(function(){n.from(this._element.array())},function(r){return this._element.plot(n.at(r)),n.done()}),this._rememberMorpher("plot",n),this},leading(t){return this._queueNumber("leading",t)},viewbox(t,e,i,s){return this._queueObject("viewbox",new $(t,e,i,s))},update(t){return typeof t!="object"?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(t.opacity!=null&&this.attr("stop-opacity",t.opacity),t.color!=null&&this.attr("stop-color",t.color),t.offset!=null&&this.attr("offset",t.offset),this)}});k(G,{rx:ti,ry:ii,from:$s,to:js});A(G,"Runner");class oi extends H{constructor(e,i=e){super(D("svg",e),i),this.namespace()}defs(){return this.isRoot()?X(this.node.querySelector("defs"))||this.put(new ei):this.root().defs()}isRoot(){return!this.node.parentNode||!(this.node.parentNode instanceof E.window.SVGElement)&&this.node.parentNode.nodeName!=="#document-fragment"}namespace(){return this.isRoot()?this.attr({xmlns:Xt,version:"1.1"}).attr("xmlns:xlink",qe,xt):this.root().namespace()}removeNamespace(){return this.attr({xmlns:null,version:null}).attr("xmlns:xlink",null,xt).attr("xmlns:svgjs",null,xt)}root(){return this.isRoot()?this:super.root()}}x({Container:{nested:C(function(){return this.put(new oi)})}});A(oi,"Svg",!0);let ai=class extends H{constructor(e,i=e){super(D("symbol",e),i)}};x({Container:{symbol:C(function(){return this.put(new ai)})}});A(ai,"Symbol");function Aa(t){return this._build===!1&&this.clear(),this.node.appendChild(E.document.createTextNode(t)),this}function _a(){return this.node.getComputedTextLength()}function La(t,e=this.bbox()){return t==null?e.x:this.attr("x",this.attr("x")+t-e.x)}function Pa(t,e=this.bbox()){return t==null?e.y:this.attr("y",this.attr("y")+t-e.y)}function Ta(t,e,i=this.bbox()){return this.x(t,i).y(e,i)}function Ca(t,e=this.bbox()){return t==null?e.cx:this.attr("x",this.attr("x")+t-e.cx)}function Ma(t,e=this.bbox()){return t==null?e.cy:this.attr("y",this.attr("y")+t-e.cy)}function Da(t,e,i=this.bbox()){return this.cx(t,i).cy(e,i)}function Ia(t){return this.attr("x",t)}function Oa(t){return this.attr("y",t)}function Wa(t,e){return this.ax(t).ay(e)}function Ra(t){return this._build=!!t,this}const Hs=Object.freeze(Object.defineProperty({__proto__:null,amove:Wa,ax:Ia,ay:Oa,build:Ra,center:Da,cx:Ca,cy:Ma,length:_a,move:Ta,plain:Aa,x:La,y:Pa},Symbol.toStringTag,{value:"Module"}));class Y extends K{constructor(e,i=e){super(D("text",e),i),this.dom.leading=this.dom.leading??new v(1.3),this._rebuild=!0,this._build=!1}leading(e){return e==null?this.dom.leading:(this.dom.leading=new v(e),this.rebuild())}rebuild(e){if(typeof e=="boolean"&&(this._rebuild=e),this._rebuild){const i=this;let s=0;const n=this.dom.leading;this.each(function(r){if(Ot(this.node))return;const o=E.window.getComputedStyle(this.node).getPropertyValue("font-size"),a=n*new v(o);this.dom.newLined&&(this.attr("x",i.attr("x")),this.text()===`
`?s+=a:(this.attr("dy",r?a+s:0),s=0))}),this.fire("rebuild")}return this}setData(e){return this.dom=e,this.dom.leading=new v(e.leading||1.3),this}writeDataToDom(){return xs(this,this.dom,{leading:1.3}),this}text(e){if(e===void 0){const i=this.node.childNodes;let s=0;e="";for(let n=0,r=i.length;n<r;++n){if(i[n].nodeName==="textPath"||Ot(i[n])){n===0&&(s=n+1);continue}n!==s&&i[n].nodeType!==3&&X(i[n]).dom.newLined===!0&&(e+=`
`),e+=i[n].textContent}return e}if(this.clear().build(!0),typeof e=="function")e.call(this,this);else{e=(e+"").split(`
`);for(let i=0,s=e.length;i<s;i++)this.newLine(e[i])}return this.build(!1).rebuild()}}k(Y,Hs);x({Container:{text:C(function(t=""){return this.put(new Y).text(t)}),plain:C(function(t=""){return this.put(new Y).plain(t)})}});A(Y,"Text");class gt extends K{constructor(e,i=e){super(D("tspan",e),i),this._build=!1}dx(e){return this.attr("dx",e)}dy(e){return this.attr("dy",e)}newLine(){this.dom.newLined=!0;const e=this.parent();if(!(e instanceof Y))return this;const i=e.index(this),s=E.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=e.dom.leading*new v(s);return this.dy(i?n:0).attr("x",e.x())}text(e){return e==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof e=="function"?(this.clear().build(!0),e.call(this,this),this.build(!1)):this.plain(e),this)}}k(gt,Hs);x({Tspan:{tspan:C(function(t=""){const e=new gt;return this._build||this.clear(),this.put(e).text(t)})},Text:{newLine:function(t=""){return this.tspan(t).newLine()}}});A(gt,"Tspan");class li extends K{constructor(e,i=e){super(D("circle",e),i)}radius(e){return this.attr("r",e)}rx(e){return this.attr("r",e)}ry(e){return this.rx(e)}size(e){return this.radius(new v(e).divide(2))}}k(li,{x:Ms,y:Ds,cx:Is,cy:Os,width:Ws,height:Rs});x({Container:{circle:C(function(t=0){return this.put(new li).size(t).move(0,0)})}});A(li,"Circle");class Bt extends H{constructor(e,i=e){super(D("clipPath",e),i)}remove(){return this.targets().forEach(function(e){e.unclip()}),super.remove()}targets(){return Te("svg [clip-path*="+this.id()+"]")}}x({Container:{clip:C(function(){return this.defs().put(new Bt)})},Element:{clipper(){return this.reference("clip-path")},clipWith(t){const e=t instanceof Bt?t:this.parent().clip().add(t);return this.attr("clip-path","url(#"+e.id()+")")},unclip(){return this.attr("clip-path",null)}}});A(Bt,"ClipPath");class Gs extends ee{constructor(e,i=e){super(D("foreignObject",e),i)}}x({Container:{foreignObject:C(function(t,e){return this.put(new Gs).size(t,e)})}});A(Gs,"ForeignObject");function Fa(t,e){return this.children().forEach(i=>{let s;try{s=i.node instanceof Nr().SVGSVGElement?new $(i.attr(["x","y","width","height"])):i.bbox()}catch{return}const n=new y(i),r=n.translate(t,e).transform(n.inverse()),o=new O(s.x,s.y).transform(r);i.move(o.x,o.y)}),this}function $a(t){return this.dmove(t,0)}function ja(t){return this.dmove(0,t)}function Na(t,e=this.bbox()){return t==null?e.height:this.size(e.width,t,e)}function Ba(t=0,e=0,i=this.bbox()){const s=t-i.x,n=e-i.y;return this.dmove(s,n)}function Va(t,e,i=this.bbox()){const s=Pe(this,t,e,i),n=s.width/i.width,r=s.height/i.height;return this.children().forEach(o=>{const a=new O(i).transform(new y(o).inverse());o.scale(n,r,a.x,a.y)}),this}function Ua(t,e=this.bbox()){return t==null?e.width:this.size(t,e.height,e)}function qa(t,e=this.bbox()){return t==null?e.x:this.move(t,e.y,e)}function Ha(t,e=this.bbox()){return t==null?e.y:this.move(e.x,t,e)}const Ks=Object.freeze(Object.defineProperty({__proto__:null,dmove:Fa,dx:$a,dy:ja,height:Na,move:Ba,size:Va,width:Ua,x:qa,y:Ha},Symbol.toStringTag,{value:"Module"}));class ci extends H{constructor(e,i=e){super(D("g",e),i)}}k(ci,Ks);x({Container:{group:C(function(){return this.put(new ci)})}});A(ci,"G");class at extends H{constructor(e,i=e){super(D("a",e),i)}target(e){return this.attr("target",e)}to(e){return this.attr("href",e,qe)}}k(at,Ks);x({Container:{link:C(function(t){return this.put(new at).to(t)})},Element:{unlink(){const t=this.linker();if(!t)return this;const e=t.parent();if(!e)return this.remove();const i=e.index(t);return e.add(this,i),t.remove(),this},linkTo(t){let e=this.linker();return e||(e=new at,this.wrap(e)),typeof t=="function"?t.call(e,e):e.to(t),this},linker(){const t=this.parent();return t&&t.node.nodeName.toLowerCase()==="a"?t:null}}});A(at,"A");class Vt extends H{constructor(e,i=e){super(D("mask",e),i)}remove(){return this.targets().forEach(function(e){e.unmask()}),super.remove()}targets(){return Te("svg [mask*="+this.id()+"]")}}x({Container:{mask:C(function(){return this.defs().put(new Vt)})},Element:{masker(){return this.reference("mask")},maskWith(t){const e=t instanceof Vt?t:this.parent().mask().add(t);return this.attr("mask","url(#"+e.id()+")")},unmask(){return this.attr("mask",null)}}});A(Vt,"Mask");class Xs extends ee{constructor(e,i=e){super(D("stop",e),i)}update(e){return(typeof e=="number"||e instanceof v)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),e.opacity!=null&&this.attr("stop-opacity",e.opacity),e.color!=null&&this.attr("stop-color",e.color),e.offset!=null&&this.attr("offset",new v(e.offset)),this}}x({Gradient:{stop:function(t,e,i){return this.put(new Xs).update(t,e,i)}}});A(Xs,"Stop");function Ga(t,e){if(!t)return"";if(!e)return t;let i=t+"{";for(const s in e)i+=Fr(s)+":"+e[s]+";";return i+="}",i}class Ut extends ee{constructor(e,i=e){super(D("style",e),i)}addText(e=""){return this.node.textContent+=e,this}font(e,i,s={}){return this.rule("@font-face",{fontFamily:e,src:i,...s})}rule(e,i){return this.addText(Ga(e,i))}}x("Dom",{style(t,e){return this.put(new Ut).rule(t,e)},fontface(t,e,i){return this.put(new Ut).font(t,e,i)}});A(Ut,"Style");class di extends Y{constructor(e,i=e){super(D("textPath",e),i)}array(){const e=this.track();return e?e.array():null}plot(e){const i=this.track();let s=null;return i&&(s=i.plot(e)),e==null?s:this}track(){return this.reference("href")}}x({Container:{textPath:C(function(t,e){return t instanceof Y||(t=this.text(t)),t.path(e)})},Text:{path:C(function(t,e=!0){const i=new di;t instanceof Ce||(t=this.defs().path(t)),i.attr("href","#"+t,qe);let s;if(e)for(;s=this.node.firstChild;)i.node.appendChild(s);return this.put(i)}),textPath(){return this.findOne("textPath")}},Path:{text:C(function(t){return t instanceof Y||(t=new Y().addTo(this.parent()).text(t)),t.path(this)}),targets(){return Te("svg textPath").filter(t=>(t.attr("href")||"").includes(this.id()))}}});di.prototype.MorphArray=ge;A(di,"TextPath");class Ys extends K{constructor(e,i=e){super(D("use",e),i)}use(e,i){return this.attr("href",(i||"")+"#"+e,qe)}}x({Container:{use:C(function(t,e){return this.put(new Ys).use(t,e)})}});A(Ys,"Use");const Ka=B;k([oi,ai,ft,Fe,nt],q("viewbox"));k([$e,Ye,Xe,Ce],q("marker"));k(Y,q("Text"));k(Ce,q("Path"));k(ei,q("Defs"));k([Y,gt],q("Tspan"));k([mt,pt,Ge,G],q("radius"));k(He,q("EventTarget"));k(oe,q("Dom"));k(ee,q("Element"));k(K,q("Shape"));k([H,Fs],q("Container"));k(Ge,q("Gradient"));k(G,q("Runner"));me.extend(Wr());fa([v,T,$,y,Ae,ae,ge,O]);ma();class Xa{constructor(){this.iconCache=new Map,this.iconDefinitions={loading:{size:{width:16,height:16},classes:"animate-spin text-white",paths:[{type:"circle",attrs:{cx:12,cy:12,r:10,stroke:"currentColor","stroke-width":4,fill:"none",opacity:.25}},{type:"path",attrs:{fill:"currentColor",opacity:.75,d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}}]},check:{size:{width:20,height:20},classes:"text-current",paths:[{type:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"}}]},close:{size:{width:24,height:24},classes:"text-current",paths:[{type:"path",attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":2,stroke:"currentColor",fill:"none",d:"M6 18L18 6M6 6l12 12"}}]},arrowRight:{size:{width:24,height:24},classes:"text-current",paths:[{type:"path",attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":2,stroke:"currentColor",fill:"none",d:"M13 7l5 5m0 0l-5 5m5-5H6"}}]},arrowLeft:{size:{width:24,height:24},classes:"text-current",paths:[{type:"path",attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":2,stroke:"currentColor",fill:"none",d:"M15 19l-7-7 7-7"}}]},location:{size:{width:24,height:24},classes:"text-current",paths:[{type:"path",attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":2,stroke:"currentColor",fill:"none",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}},{type:"path",attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":2,stroke:"currentColor",fill:"none",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"}}]},settings:{size:{width:20,height:20},classes:"text-current",paths:[{type:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"}}]},error:{size:{width:20,height:20},classes:"text-current",paths:[{type:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"}}]},checkCircle:{size:{width:20,height:20},classes:"text-current",paths:[{type:"path",attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"currentColor",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"}}]}}}createIcon(e,i,s={}){try{const n=this.iconDefinitions[e];if(!n)return null;i.innerHTML="";const r={size:{...n.size,...s.size},classes:s.classes||n.classes,style:s.style||{}},o=Ka().addTo(i).size(r.size.width,r.size.height).viewbox(0,0,24,24);return r.classes&&o.addClass(r.classes),r.style&&Object.keys(r.style).forEach(a=>{o.css(a,r.style[a])}),n.paths.forEach(a=>{let l;switch(a.type){case"path":l=o.path(a.attrs.d);break;case"circle":l=o.circle(a.attrs.r*2).center(a.attrs.cx,a.attrs.cy);break;case"rect":l=o.rect(a.attrs.width,a.attrs.height).move(a.attrs.x||0,a.attrs.y||0);break;default:return}Object.keys(a.attrs).forEach(c=>{["d","cx","cy","r","width","height","x","y"].includes(c)||l.attr(c,a.attrs[c])})}),o}catch{return null}}initializeIcons(e=document){e.querySelectorAll("[data-svg-icon]").forEach(s=>{const n=s.getAttribute("data-svg-icon"),r={};if(s.hasAttribute("data-svg-size")){const o=s.getAttribute("data-svg-size"),[a,l]=o.split("x").map(Number);r.size={width:a,height:l}}if(s.hasAttribute("data-svg-classes")){let o=s.getAttribute("data-svg-classes");o&&(o.startsWith('"')||o.endsWith('"'))&&(o=o.replace(/^["']|["']$/g,"")),r.classes=o}this.createIcon(n,s,r)})}addIcon(e,i){this.iconDefinitions[e]=i}createLoadingSpinner(e,i={}){return this.createIcon("loading",e,{classes:"animate-spin "+(i.classes||"text-white"),size:i.size||{width:16,height:16},...i})}}const wt=new Xa;window.SafeSVGIcons=wt;document.addEventListener("DOMContentLoaded",()=>{wt.initializeIcons()});document.addEventListener("livewire:navigated",()=>{wt.initializeIcons()});document.addEventListener("livewire:morph.updated",t=>{const e=t.target;e&&(e.id==="map-container"||e.closest("#map-container")||e.querySelector("#map-container"))||wt.initializeIcons(e)});window.copyToClipboard=async function(t){try{if(navigator.clipboard&&navigator.clipboard.writeText)return await navigator.clipboard.writeText(t),!0;{const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",e.style.top="-999999px",document.body.appendChild(e),e.focus(),e.select();try{const i=document.execCommand("copy");return document.body.removeChild(e),i}catch{return document.body.removeChild(e),!1}}}catch{return!1}};window.createMapComponent=ds;document.addEventListener("DOMContentLoaded",()=>{});document.addEventListener("alpine:init",()=>{window.Alpine&&window.Alpine.data("mapComponent",ds)});document.addEventListener("livewire:init",()=>{})});export default Ya();
